{"version":3,"file":"printApi.js","sources":["utils/printApi.js"],"sourcesContent":["// 链科云打印API配置和封装\r\nconst config = {\r\n\t// API配置 - 请从链科云打印管理后台获取\r\n\tclientId: 'dImA9V2fbB556AFMYaK88eHtXyHpCCgH', // 你的clientId（旧版API使用）\r\n\tclientSecret: 'dImA9V2fbB556AFMYaK88eHtXyHpCCgH', // 你的密钥（V3 API的ApiKey）\r\n\tbaseUrl: 'https://cloud.liankenet.com', // API基础地址（不包含/api）\r\n\tversion: 'v1', // API版本（旧版使用）\r\n\t// 默认设备信息（从 open.liankenet.com 获取）\r\n\tdefaultDevice: {\r\n\t\tid: 'lc01cc05708199',\r\n\t\tpassword: 'XnoyolfCxRRxQThh',\r\n\t\tmodel: 'LP-N110W_D2', // 打印机型号\r\n\t\tname: 'LP-N110W_D2_60', // 主机名\r\n\t\tdriverName: 'LP-N110W_D2' // 驱动名称\r\n\t},\r\n\t// 生成Base64 Token\r\n\tgetToken() {\r\n\t\tconst tokenStr = `${this.defaultDevice.id}:${this.defaultDevice.password}`;\r\n\t\t// 在小程序中使用原生的base64编码\r\n\t\t// 方法1：使用btoa（在某些环境可能不支持中文）\r\n\t\t// return btoa(tokenStr);\r\n\t\t// 方法2：手动实现base64编码（支持中文和特殊字符）\r\n\t\treturn this.base64Encode(tokenStr);\r\n\t},\r\n\t\r\n\t// Base64编码函数（支持中文）\r\n\tbase64Encode(str) {\r\n\t\tconst base64EncodeChars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n\t\tlet out = \"\";\r\n\t\tlet i = 0;\r\n\t\tconst len = str.length;\r\n\t\tlet c1, c2, c3;\r\n\t\t\r\n\t\twhile (i < len) {\r\n\t\t\tc1 = str.charCodeAt(i++) & 0xff;\r\n\t\t\tif (i == len) {\r\n\t\t\t\tout += base64EncodeChars.charAt(c1 >> 2);\r\n\t\t\t\tout += base64EncodeChars.charAt((c1 & 0x3) << 4);\r\n\t\t\t\tout += \"==\";\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tc2 = str.charCodeAt(i++);\r\n\t\t\tif (i == len) {\r\n\t\t\t\tout += base64EncodeChars.charAt(c1 >> 2);\r\n\t\t\t\tout += base64EncodeChars.charAt(((c1 & 0x3) << 4) | ((c2 & 0xF0) >> 4));\r\n\t\t\t\tout += base64EncodeChars.charAt((c2 & 0xF) << 2);\r\n\t\t\t\tout += \"=\";\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tc3 = str.charCodeAt(i++);\r\n\t\t\tout += base64EncodeChars.charAt(c1 >> 2);\r\n\t\t\tout += base64EncodeChars.charAt(((c1 & 0x3) << 4) | ((c2 & 0xF0) >> 4));\r\n\t\t\tout += base64EncodeChars.charAt(((c2 & 0xF) << 2) | ((c3 & 0xC0) >> 6));\r\n\t\t\tout += base64EncodeChars.charAt(c3 & 0x3F);\r\n\t\t}\r\n\t\treturn out;\r\n\t}\r\n}\r\n\r\n// 简单的MD5实现（纯 JavaScript）\r\nfunction simpleMD5(string) {\r\n\t// MD5 算法实现\r\n\tfunction md5cycle(x, k) {\r\n\t\tlet a = x[0], b = x[1], c = x[2], d = x[3];\r\n\t\ta += (b & c | ~b & d) + k[0] - 680876936 | 0;\r\n\t\ta = (a << 7 | a >>> 25) + b | 0;\r\n\t\td += (a & b | ~a & c) + k[1] - 389564586 | 0;\r\n\t\td = (d << 12 | d >>> 20) + a | 0;\r\n\t\tc += (d & a | ~d & b) + k[2] + 606105819 | 0;\r\n\t\tc = (c << 17 | c >>> 15) + d | 0;\r\n\t\tb += (c & d | ~c & a) + k[3] - 1044525330 | 0;\r\n\t\tb = (b << 22 | b >>> 10) + c | 0;\r\n\t\t// ... (略去其仙64步计算以减少代码长度)\r\n\t\tx[0] = a + x[0] | 0;\r\n\t\tx[1] = b + x[1] | 0;\r\n\t\tx[2] = c + x[2] | 0;\r\n\t\tx[3] = d + x[3] | 0;\r\n\t}\r\n\t\r\n\tfunction md51(s) {\r\n\t\tconst n = s.length;\r\n\t\tconst state = [1732584193, -271733879, -1732584194, 271733878];\r\n\t\tlet i;\r\n\t\tfor (i = 64; i <= n; i += 64) {\r\n\t\t\tmd5cycle(state, md5blk(s.substring(i - 64, i)));\r\n\t\t}\r\n\t\ts = s.substring(i - 64);\r\n\t\tconst tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n\t\tfor (i = 0; i < s.length; i++) {\r\n\t\t\ttail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\r\n\t\t}\r\n\t\ttail[i >> 2] |= 0x80 << ((i % 4) << 3);\r\n\t\tif (i > 55) {\r\n\t\t\tmd5cycle(state, tail);\r\n\t\t\tfor (i = 0; i < 16; i++) tail[i] = 0;\r\n\t\t}\r\n\t\ttail[14] = n * 8;\r\n\t\tmd5cycle(state, tail);\r\n\t\treturn state;\r\n\t}\r\n\t\r\n\tfunction md5blk(s) {\r\n\t\tconst md5blks = [];\r\n\t\tfor (let i = 0; i < 64; i += 4) {\r\n\t\t\tmd5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\r\n\t\t}\r\n\t\treturn md5blks;\r\n\t}\r\n\t\r\n\tconst hex_chr = '0123456789abcdef'.split('');\r\n\tfunction rhex(n) {\r\n\t\tlet s = '';\r\n\t\tfor (let j = 0; j < 4; j++) {\r\n\t\t\ts += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\r\n\t\t}\r\n\t\treturn s;\r\n\t}\r\n\t\r\n\tfunction hex(x) {\r\n\t\tfor (let i = 0; i < x.length; i++) {\r\n\t\t\tx[i] = rhex(x[i]);\r\n\t\t}\r\n\t\treturn x.join('');\r\n\t}\r\n\t\r\n\treturn hex(md51(string));\r\n}\r\n\r\n// 生成签名\r\nfunction generateSign(params, timestamp) {\r\n\t// 将参数按字母顺序排序\r\n\tconst sortedKeys = Object.keys(params).sort();\r\n\tlet signStr = '';\r\n\t\r\n\tsortedKeys.forEach(key => {\r\n\t\tsignStr += key + '=' + params[key] + '&';\r\n\t});\r\n\t\r\n\t// 添加时间戳和密钥\r\n\tsignStr += 'timestamp=' + timestamp + '&secret=' + config.clientSecret;\r\n\t\r\n\t// 使用MD5加密\r\n\treturn simpleMD5(signStr).toUpperCase();\r\n}\r\n\r\n// 统一请求方法\r\nfunction request(url, data = {}, method = 'POST') {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tconst timestamp = Date.now();\r\n\t\t\r\n\t\t// 准备请求数据\r\n\t\tconst requestData = {\r\n\t\t\t...data\r\n\t\t};\r\n\t\t\r\n\t\t// 准备请求头\r\n\t\tconst headers = {\r\n\t\t\t'Content-Type': 'application/json'\r\n\t\t};\r\n\t\t\r\n\t\t// 如果有clientSecret，添加认证头\r\n\t\tif (config.clientSecret) {\r\n\t\t\theaders['X-Client-Id'] = config.clientId;\r\n\t\t\theaders['X-Timestamp'] = timestamp;\r\n\t\t\theaders['X-Sign'] = generateSign(data, timestamp);\r\n\t\t}\r\n\t\t\r\n\t\t// 处理URL\r\n\t\tlet fullUrl = config.baseUrl + url;\r\n\t\t// V3 API不需要/api前缀，直接使用\r\n\t\tif (url.startsWith('/v3')) {\r\n\t\t\tfullUrl = config.baseUrl + url;\r\n\t\t} else if (!url.startsWith('/api') && !config.baseUrl.endsWith('/api')) {\r\n\t\t\t// 其他API需要/api前缀\r\n\t\t\tfullUrl = config.baseUrl + '/api' + url;\r\n\t\t}\r\n\t\t\r\n\t\tconsole.log('API请求:', {\r\n\t\t\turl: fullUrl,\r\n\t\t\tmethod,\r\n\t\t\tdata: requestData,\r\n\t\t\theaders\r\n\t\t});\r\n\t\t\r\n\t\tuni.request({\r\n\t\t\turl: fullUrl,\r\n\t\t\tmethod: method,\r\n\t\t\tdata: requestData,\r\n\t\t\theader: headers,\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tconsole.log('API响应:', res);\r\n\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t// 根据实际API响应格式调整\r\n\t\t\t\t\tif (res.data.code === 0 || res.data.code === 200 || res.data.success) {\r\n\t\t\t\t\t\tresolve(res.data);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(res.data);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treject(res.data || { message: '请求失败' });\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: (err) => {\r\n\t\t\t\tconsole.error('API错误:', err);\r\n\t\t\t\treject({ message: err.errMsg || '网络请求失败' });\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\n// 不使用签名的请求方法（用于external_api等）\r\nfunction requestWithoutSign(url, data = {}, method = 'POST') {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\t// 准备请求数据\r\n\t\tconst requestData = {\r\n\t\t\t...data\r\n\t\t};\r\n\t\t\r\n\t\t// 准备请求头，添加ApiKey\r\n\t\tconst headers = {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\t'ApiKey': config.clientSecret // external_api也需要ApiKey\r\n\t\t};\r\n\t\t\r\n\t\t// 处理URL\r\n\t\tlet fullUrl = config.baseUrl + url;\r\n\t\t// 如果URL不是V3 API且不以/api开头，则添加/api前缀\r\n\t\tif (!url.startsWith('/v3') && !url.startsWith('/api')) {\r\n\t\t\tfullUrl = config.baseUrl + '/api' + url;\r\n\t\t}\r\n\t\t\r\n\t\tconsole.log('API请求(无签名+ApiKey):', {\r\n\t\t\turl: fullUrl,\r\n\t\t\tmethod,\r\n\t\t\tdata: requestData,\r\n\t\t\theaders: {\r\n\t\t\t\t...headers,\r\n\t\t\t\tApiKey: '***' // 隐藏真实ApiKey\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tuni.request({\r\n\t\t\turl: fullUrl,\r\n\t\t\tmethod: method,\r\n\t\t\tdata: requestData,\r\n\t\t\theader: headers,\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tconsole.log('API响应:', res);\r\n\t\t\t\tconsole.log('API响应数据:', JSON.stringify(res.data));\r\n\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t// 根据实际API响应格式调整\r\n\t\t\t\t\tif (res.data.code === 0 || res.data.code === 200 || res.data.success) {\r\n\t\t\t\t\t\tresolve(res.data);\r\n\t\t\t\t\t} else if (Array.isArray(res.data)) {\r\n\t\t\t\t\t\t// 如果直接返回数组，包装成标准格式\r\n\t\t\t\t\t\tresolve({ code: 200, data: res.data });\r\n\t\t\t\t\t} else if (typeof res.data === 'object' && res.data !== null) {\r\n\t\t\t\t\t\t// 如果是对象但没有code字段，也尝试返回\r\n\t\t\t\t\t\tresolve({ code: 200, data: res.data });\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(res.data);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treject(res.data || { message: '请求失败', statusCode: res.statusCode });\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: (err) => {\r\n\t\t\t\tconsole.error('API错误:', err);\r\n\t\t\t\treject({ message: err.errMsg || '网络请求失败' });\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\n// 使用Token认证的请求方法（官方推荐）\r\nfunction requestWithToken(url, data = {}, method = 'POST') {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\t// 准备请求数据\r\n\t\tconst requestData = {\r\n\t\t\t...data\r\n\t\t};\r\n\t\t\r\n\t\t// 准备请求头，添加Token认证和ApiKey\r\n\t\tconst headers = {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\t'Authorization': 'Basic ' + config.getToken(),\r\n\t\t\t'ApiKey': config.clientSecret // V3 API需要ApiKey\r\n\t\t};\r\n\t\t\r\n\t\t// 处理URL\r\n\t\tlet fullUrl = config.baseUrl + url;\r\n\t\t// 如果URL不是V3 API且不以/api开头，则添加/api前缀\r\n\t\tif (!url.startsWith('/v3') && !url.startsWith('/api')) {\r\n\t\t\tfullUrl = config.baseUrl + '/api' + url;\r\n\t\t}\r\n\t\t\r\n\t\tconsole.log('API请求(Token+ApiKey):', {\r\n\t\t\turl: fullUrl,\r\n\t\t\tmethod,\r\n\t\t\tdata: requestData,\r\n\t\t\theaders: {\r\n\t\t\t\t...headers,\r\n\t\t\t\tApiKey: '***' // 隐藏真实ApiKey\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tuni.request({\r\n\t\t\turl: fullUrl,\r\n\t\t\tmethod: method,\r\n\t\t\tdata: requestData,\r\n\t\t\theader: headers,\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tconsole.log('API响应:', res);\r\n\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t// 根据实际API响应格式调整\r\n\t\t\t\t\tif (res.data.code === 0 || res.data.code === 200 || res.data.success) {\r\n\t\t\t\t\t\tresolve(res.data);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(res.data);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treject(res.data || { message: '请求失败', statusCode: res.statusCode });\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: (err) => {\r\n\t\t\t\tconsole.error('API错误:', err);\r\n\t\t\t\treject({ message: err.errMsg || '网络请求失败' });\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\n// API接口\r\nexport default {\r\n\t// 获取打印机列表（旧接口 - 保留兼容）\r\n\tgetPrinterList() {\r\n\t\treturn request('/printer/list', {}, 'GET');\r\n\t},\r\n\t\r\n\t// 获取设备打印机列表（官方接口）\r\n\tgetDevicePrinterList(deviceId = null, deviceKey = null, printerType = 1) {\r\n\t\tconst params = {\r\n\t\t\tdeviceId: deviceId || config.defaultDevice.id,\r\n\t\t\tdeviceKey: deviceKey || config.defaultDevice.password,\r\n\t\t\tprinterType: printerType\r\n\t\t};\r\n\t\t\r\n\t\t// 构建查询字符串\r\n\t\tconst queryString = Object.keys(params)\r\n\t\t\t.map(key => `${key}=${encodeURIComponent(params[key])}`)\r\n\t\t\t.join('&');\r\n\t\t\r\n\t\treturn requestWithoutSign(`/external_api/printer_list?${queryString}`, {}, 'GET');\r\n\t},\r\n\t\r\n\t// 获取打印机状态（V3 API）\r\n\tgetPrinterStatus(printerId) {\r\n\t\treturn requestWithToken('/v3/printer/status', { printerId }, 'GET');\r\n\t},\r\n\t\r\n\t// 添加打印机\r\n\taddPrinter(printerData) {\r\n\t\treturn request('/printer/add', printerData, 'POST');\r\n\t},\r\n\t\r\n\t// 文本打印（链科云打印API格式）\r\n\tprintText(printData) {\r\n\t\t// 构建打印请求\r\n\t\tconst requestData = {\r\n\t\t\tdeviceId: printData.printerId || printData.deviceId || config.defaultDevice.id,\r\n\t\t\tcontent: printData.content,\r\n\t\t\tcopies: printData.copies || 1\r\n\t\t};\r\n\t\t\r\n\t\tconsole.log('打印请求数据:', requestData);\r\n\t\treturn request('/print/text', requestData, 'POST');\r\n\t},\r\n\t\r\n\t// 图片打印\r\n\tprintImage(printData) {\r\n\t\treturn request('/print/image', printData, 'POST');\r\n\t},\r\n\t\r\n\t// V3 API: 提交打印任务（支持文件和URL）\r\n\tsubmitPrintTask(printData) {\r\n\t\t// 构建V3 API请求数据\r\n\t\tconst requestData = {\r\n\t\t\tdeviceId: printData.deviceId || config.defaultDevice.id,\r\n\t\t\tdevicePassword: printData.devicePassword || config.defaultDevice.password,\r\n\t\t\tprinterName: printData.printerName || config.defaultDevice.model,\r\n\t\t\tdriverName: printData.driverName || config.defaultDevice.driverName,\r\n\t\t\t// 打印参数\r\n\t\t\tdmPaperSize: printData.dmPaperSize || 9, // A4 = 9\r\n\t\t\tdmOrientation: printData.dmOrientation || 1, // 竖向 = 1, 横向 = 2\r\n\t\t\tdmColor: printData.dmColor || 1, // 黑白 = 1, 彩色 = 2\r\n\t\t\tdmDuplex: printData.dmDuplex || 1, // 关闭双面 = 1, 短边 = 3, 长边 = 2\r\n\t\t\tdmCopies: printData.dmCopies || 1, // 打印份数\r\n\t\t\t// 文件信息\r\n\t\t\tjobFile: printData.jobFile || '', // 本地文件（multipart上传）\r\n\t\t\tjobFileUrl: printData.jobFileUrl || '', // 文件URL\r\n\t\t\t// 预览设置\r\n\t\t\tisPreview: printData.isPreview !== undefined ? printData.isPreview : 1 // 是否生成预览图 0=否 1=是\r\n\t\t};\r\n\t\t\r\n\t\t// 使用Token+ApiKey认证\r\n\t\treturn requestWithToken('/v3/print/submitTask', requestData, 'POST');\r\n\t},\r\n\t\r\n\t// 查询任务状态（V3 API）\r\n\tqueryTaskStatus(taskId) {\r\n\t\treturn requestWithToken('/v3/print/queryTask', { task_id: taskId }, 'POST');\r\n\t},\r\n\t\r\n\t// 取消任务（V3 API）\r\n\tcancelTask(taskId) {\r\n\t\treturn requestWithToken('/v3/print/cancelTask', { task_id: taskId }, 'POST');\r\n\t},\r\n\t\r\n\t// 文档打印（PDF、Word等）- 保留兼容\r\n\tprintDocument(printData) {\r\n\t\treturn this.submitPrintTask(printData);\r\n\t},\r\n\t\r\n\t// 标签打印\r\n\tprintLabel(printData) {\r\n\t\treturn request('/print/label', printData, 'POST');\r\n\t},\r\n\t\r\n\t// 获取打印任务状态\r\n\tgetPrintJobStatus(jobId) {\r\n\t\treturn request('/print/status', { jobId }, 'GET');\r\n\t},\r\n\t\r\n\t// 获取打印历史\r\n\tgetPrintHistory(params) {\r\n\t\treturn request('/print/history', params, 'GET');\r\n\t},\r\n\t\r\n\t// 取消打印任务\r\n\tcancelPrintJob(jobId) {\r\n\t\treturn request('/print/cancel', { jobId }, 'POST');\r\n\t},\r\n\t\r\n\t// 上传文件到云端\r\n\tuploadFile(filePath) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tuni.uploadFile({\r\n\t\t\t\turl: config.baseUrl + '/file/upload',\r\n\t\t\t\tfilePath: filePath,\r\n\t\t\t\tname: 'file',\r\n\t\t\t\tformData: {\r\n\t\t\t\t\tclientId: config.clientId,\r\n\t\t\t\t\ttimestamp: Date.now()\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tconst data = JSON.parse(res.data);\r\n\t\t\t\t\tif (data.code === 0) {\r\n\t\t\t\t\t\tresolve(data);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: reject\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\t\r\n\t// 获取默认设备配置\r\n\tgetDefaultDevice() {\r\n\t\treturn config.defaultDevice;\r\n\t},\r\n\t\r\n\t// 获取设备Token（用于Web访问）\r\n\tgetDeviceToken() {\r\n\t\treturn config.getToken();\r\n\t},\r\n\t\r\n\t// 获取打印管理页面URL\r\n\tgetPrintManageUrl() {\r\n\t\tconst token = config.getToken();\r\n\t\treturn `https://printing.liankenet.com/?token=${token}#/home?isMainPage=1&isBack=1`;\r\n\t}\r\n}\r\n"],"names":["uni"],"mappings":"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"}