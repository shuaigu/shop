// 文档教程: https://uniapp.dcloud.net.cn/uniCloud/schema
{
	"bsonType": "object",
	"required": [ "user_id", "content", "create_time" ],
	"permission": {
		"read": true,
		"create": "auth.uid != null",
		"update": false,
		"delete": false
	},
	"properties": {
		"_id": {
			"description": "ID，系统自动生成",
			"foreignKey": "uni-id-users._id"
		},
		"user_id": {
			"bsonType": "string",
			"description": "发布者ID",
			"foreignKey": "user._id"
		},
		"user_nickName": {
			"bsonType": "string",
			"description": "发布者昵称"
		},
		"user_avatarUrl": {
			"bsonType": "string",
			"description": "发布者头像"
		},
		"user_mobile": {
			"bsonType": "string",
			"description": "发布者电话"
		},
		"content": {
			"bsonType": "string",
			"description": "文章内容",
			"maxLength": 500,
			"trim": "both"
		},
		"images": {
			"bsonType": "array",
			"description": "图片列表",
			"maxItems": 9
		},
		"address": {
			"bsonType": "string",
			"description": "发布地址",
			"trim": "both"
		},
		"district": {
			"bsonType": "string",
			"description": "区县"
		},
		"cate_id": {
			"bsonType": "string",
			"description": "分类ID",
			"foreignKey": "cateList._id"
		},
		"like_count": {
			"bsonType": "int",
			"description": "点赞数"
		},
		"look_count": {
			"bsonType": "int",
			"description": "阅读量",
			"minimum": 0,
			"defaultValue": 0
		},
		"comment_count": {
			"bsonType": "int",
			"description": "评论数量，关联commentList表中的记录数",
			"minimum": 0,
			"defaultValue": 0
		},
		"create_time": {
			"bsonType": "timestamp",
			"description": "创建时间",
			"defaultValue": {
				"$env": "now"
			}
		},
		"state": {
			"bsonType": "int",
			"description": "状态：0-待审核 1-已通过 2-已拒绝",
			"minimum": 0,
			"maximum": 2,
			"defaultValue": 0
		},
		"reject_reason": {
			"bsonType": "string",
			"description": "拒绝原因",
			"trim": "both"
		},
		"update_time": {
			"bsonType": "timestamp",
			"description": "更新时间",
			"defaultValue": {
				"$env": "now"
			}
		}
	}
}