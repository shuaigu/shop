{"version":3,"file":"page-meta.js","sources":["D:/代码测试/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/node_modules/@dcloudio/uni-components/lib/page-meta/page-meta.vue","D:/代码测试/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDov5Luj56CB5rWL6K-VL0hCdWlsZGVyWC40LjQ1LjIwMjUwMTA1MDIvSEJ1aWxkZXJYL3BsdWdpbnMvdW5pYXBwLWNsaS12aXRlL25vZGVfbW9kdWxlcy9AZGNsb3VkaW8vdW5pLWNvbXBvbmVudHMvbGliL3BhZ2UtbWV0YS9wYWdlLW1ldGEudnVl"],"sourcesContent":["<template>\r\n  <view style=\"display: none;\">\r\n    <slot />\r\n  </view>\r\n</template>\r\n<script>\r\nimport { onMounted } from 'vue'\r\n// #ifndef H5\r\nimport { onResize } from '@dcloudio/uni-app'\r\n// #endif\r\n// #ifdef H5\r\nimport { onWindowResize } from '@dcloudio/uni-h5'\r\n// #endif\r\nconst scrolldoneEvent = {\r\n  type: 'scrolldone',\r\n  target: {\r\n    id: '',\r\n    offsetLeft: 0,\r\n    offsetTop: 0,\r\n    dataset: {}\r\n  },\r\n  currentTarget: {\r\n    id: '',\r\n    offsetLeft: 0,\r\n    offsetTop: 0,\r\n    dataset: {}\r\n  },\r\n  detail: {}\r\n}\r\n\r\nexport default {\r\n  name: 'PageMeta',\r\n  setup(props, { emit }) {\r\n    // #ifndef H5\r\n    onResize((evt) => {\r\n      emit('resize', evt)\r\n    })\r\n    // #endif\r\n\r\n    // #ifdef H5\r\n    onMounted(() => {\r\n      onWindowResize(evt => {\r\n        emit('resize', evt)\r\n      })\r\n    })\r\n    // #endif\r\n\r\n    // let currentInstance = getCurrentInstance()\r\n    // let proxy = currentInstance.proxy\r\n    // onPageScroll((evt) => {\r\n    //   if (proxy._invokePageScrollToFlag === true && evt.scrollTop === proxy._invokeScrollTop) {\r\n    //     proxy._invokePageScrollToFlag = false\r\n    //     emit('scrolldone', scrolldoneEvent)\r\n    //   }\r\n    // })\r\n  },\r\n  props: {\r\n    backgroundTextStyle: {\r\n      type: String,\r\n      default: 'dark',\r\n      validator (value) {\r\n        return ['dark', 'light'].indexOf(value) !== -1\r\n      }\r\n    },\r\n    backgroundColor: {\r\n      type: String,\r\n      default: '#ffffff'\r\n    },\r\n    backgroundColorTop: {\r\n      type: String,\r\n      default: '#ffffff'\r\n    },\r\n    backgroundColorBottom: {\r\n      type: String,\r\n      default: '#ffffff'\r\n    },\r\n    scrollTop: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    scrollDuration: {\r\n      type: Number,\r\n      default: 300\r\n    },\r\n    pageStyle: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    enablePullDownRefresh: {\r\n      type: [Boolean, String],\r\n      default: false\r\n    },\r\n    rootFontSize: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  created () {\r\n    const page = getCurrentPages()[0]\r\n    this.$pageVm = page.$vm || page\r\n    // #ifdef APP-PLUS\r\n    this._currentWebview = page.$getAppWebview()\r\n    if (this.enablePullDownRefresh) {\r\n      this.setPullDownRefresh(this._currentWebview, true)\r\n    }\r\n    this.$watch('enablePullDownRefresh', (val) => {\r\n      this.setPullDownRefresh(this._currentWebview, val)\r\n    })\r\n    // #endif\r\n\r\n    // props\r\n\r\n    this.$watch('backgroundTextStyle', () => {\r\n      this.setBackgroundTextStyle()\r\n    })\r\n    this.$watch(() => [\r\n      this.rootFontSize,\r\n      this.pageStyle\r\n    ], () => {\r\n      this.setPageMeta()\r\n    })\r\n    this.$watch(() => [\r\n      this.backgroundColor,\r\n      this.backgroundColorTop,\r\n      this.backgroundColorBottom\r\n    ], () => {\r\n      this.setBackgroundColor()\r\n    })\r\n    this.$watch(() => [\r\n      this.scrollTop,\r\n      this.scrollDuration\r\n    ], () => {\r\n      this.pageScrollTo()\r\n    })\r\n\r\n    // this._invokeScrollTop = -1\r\n    // this._invokePageScrollToFlag = false\r\n  },\r\n  beforeMount () {\r\n    this.setBackgroundColor()\r\n    if (this.rootFontSize || this.pageStyle) {\r\n      this.setPageMeta()\r\n    }\r\n    this.backgroundTextStyle && this.setBackgroundTextStyle()\r\n  },\r\n  mounted() {\r\n    this.scrollTop && this.pageScrollTo()\r\n  },\r\n  methods: {\r\n    setPullDownRefresh (webview, enabled) {\r\n      webview.setStyle({\r\n        pullToRefresh: {\r\n          support: enabled,\r\n          style: plus.os.name === 'Android' ? 'circle' : 'default'\r\n        }\r\n      })\r\n    },\r\n    setPageMeta () {\r\n      // h5 和 app-plus 设置 rootFontSize\r\n      // #ifdef H5 || APP-PLUS\r\n      uni.setPageMeta({\r\n        pageStyle: this.pageStyle,\r\n        rootFontSize: this.rootFontSize\r\n      })\r\n      // #endif\r\n    },\r\n    setBackgroundTextStyle () {\r\n      // TODO h5 app-plus 暂不支持\r\n      // #ifdef MP\r\n      uni.setBackgroundTextStyle && uni.setBackgroundTextStyle({\r\n        textStyle: this.backgroundTextStyle\r\n      })\r\n      // #endif\r\n    },\r\n    setBackgroundColor () {\r\n      // TODO h5 app-plus 暂不支持\r\n      // #ifdef MP\r\n      uni.setBackgroundColor && uni.setBackgroundColor({\r\n        backgroundColor: this.backgroundColor,\r\n        backgroundColorTop: this.backgroundColorTop,\r\n        backgroundColorBottom: this.backgroundColorBottom\r\n      })\r\n      // #endif\r\n    },\r\n    pageScrollTo () {\r\n      let scrollTop = String(this.scrollTop)\r\n      if (scrollTop.indexOf('rpx') !== -1) {\r\n        scrollTop = uni.upx2px(scrollTop.replace('rpx', ''))\r\n      }\r\n      scrollTop = parseFloat(scrollTop)\r\n      if (isNaN(scrollTop)) {\r\n        return\r\n      }\r\n\r\n      // this._invokeScrollTop = scrollTop\r\n\r\n      uni.pageScrollTo({\r\n        scrollTop,\r\n        duration: this.scrollDuration,\r\n        success: () => {\r\n          //this._invokePageScrollToFlag = true\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import Component from 'D:/代码测试/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/node_modules/@dcloudio/uni-components/lib/page-meta/page-meta.vue'\ntt.createComponent(Component)"],"names":["onResize","uni"],"mappings":"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","x_google_ignoreList":[0]}