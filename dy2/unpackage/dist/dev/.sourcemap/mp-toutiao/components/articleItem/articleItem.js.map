{"version":3,"file":"articleItem.js","sources":["components/articleItem/articleItem.vue","D:/代码测试/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTovZHkyL2NvbXBvbmVudHMvYXJ0aWNsZUl0ZW0vYXJ0aWNsZUl0ZW0udnVl"],"sourcesContent":["<script setup>\n\timport { ref, watch, computed, onUnmounted, onMounted } from 'vue'\n\timport { useUserInfoStore } from '@/store/user.js'\n\tconst userStore = useUserInfoStore( )\n\n\t// 抖音小程序判断\n\tconst isToutiao = ref(false)\n\t\n\t// 在组件挂载时检测平台\n\tonMounted(() => {\n\t\t// #ifdef MP-TOUTIAO\n\t\tisToutiao.value = true\n\t\tconsole.log('运行在抖音小程序环境')\n\t\t// #endif\n\t})\n\n\t// 定义组件属性\n\tconst props = defineProps( {\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\trequire: true,\n\t\t\tdefault: ( ) => ( {\n\t\t\t\tuser_info: {\n\t\t\t\t\tnickName: '未知用户',\n\t\t\t\t\tavatarUrl: '/static/images/default-avatar.png',\n\t\t\t\t\tmobile: '未填写'\n\t\t\t\t}\n\t\t\t} )\n\t\t},\n\t\t// 是否显示评论区\n\t\tshowComments: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\t// 是否启用头像点击功能\n\t\tavatarClickEnabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t} )\n\n\t// 视频默认缩略图\n\tconst defaultVideoThumbnail = '/static/images/video-thumbnail.png'\n\t\n\t// 获取视频缩略图\n\tconst getVideoThumbnail = (video) => {\n\t\tif (!video) return defaultVideoThumbnail\n\t\t\n\t\tif (video.thumbnailURL) {\n\t\t\treturn video.thumbnailURL\n\t\t}\n\t\t\n\t\treturn defaultVideoThumbnail\n\t}\n\n\t// 自定义格式化日期函数\n\tconst formatDate = (timestamp) => {\n\t\tif (!timestamp) return '未知时间'\n\t\t\n\t\tconst now = Date.now()\n\t\tconst diff = now - timestamp\n\t\t\n\t\t// 转换为秒\n\t\tconst seconds = Math.floor(diff / 1000)\n\t\t// 转换为分钟\n\t\tconst minutes = Math.floor(seconds / 60)\n\t\t// 转换为小时\n\t\tconst hours = Math.floor(minutes / 60)\n\t\t// 转换为天\n\t\tconst days = Math.floor(hours / 24)\n\t\t\n\t\t// 获取日期对象\n\t\tconst date = new Date(timestamp)\n\t\tconst year = date.getFullYear()\n\t\tconst month = date.getMonth() + 1\n\t\tconst day = date.getDate()\n\t\tconst hour = date.getHours()\n\t\tconst minute = date.getMinutes()\n\t\t\n\t\t// 格式化为两位数\n\t\tconst formattedMonth = month < 10 ? `0${month}` : month\n\t\tconst formattedDay = day < 10 ? `0${day}` : day\n\t\tconst formattedHour = hour < 10 ? `0${hour}` : hour\n\t\tconst formattedMinute = minute < 10 ? `0${minute}` : minute\n\t\tconst timeStr = `${formattedHour}:${formattedMinute}`\n\t\t\n\t\t// 在地址栏显示的时间格式：始终显示年份\n\t\tif (days < 1) {\n\t\t\treturn `${year}年 今天${timeStr}`\n\t\t} else if (days < 2) {\n\t\t\treturn `${year}年 昨天${timeStr}`\n\t\t} else if (days < 10) {\n\t\t\treturn `${year}年 ${days}天前${timeStr}`\n\t\t} else {\n\t\t\treturn `${year}年${formattedMonth}月${formattedDay}日 ${timeStr}`\n\t\t}\n\t}\n\n\t// 定义事件\n\tconst emit = defineEmits( [ 'delete', 'contact', 'comment', 'like', 'preview', 'userList',\n\t\t'update:comments'\n\t] )\n\n\t// 处理用户列表点击\n\tconst handleUserList = ( user_id ) => {\n\t\t// 检查头像点击功能是否启用\n\t\tif (!props.avatarClickEnabled) {\n\t\t\tconsole.log('头像点击功能已禁用')\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '此功能开发中',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\t\n\t\temit( 'userList', user_id )\n\t}\n\n\t// 处理删除\n\tconst handleDelete = ( id ) => {\n\t\temit( 'delete', id )\n\t}\n\n\t// 处理联系\n\tconst handleContact = ( mobile ) => {\n\t\temit( 'contact', mobile )\n\t}\n\n\t// 处理评论\n\tconst handleComment = ( id ) => {\n\t\tif ( props.showComments ) {\n\t\t\t// 在详情页中，触发评论事件\n\t\t\temit( 'comment' )\n\t\t} else {\n\t\t\t// 在其他页面中，跳转到详情页，同时传递必要的用户信息\n\t\t\tuni.navigateTo( {\n\t\t\t\turl: `/pages/article/articleDetail?article_id=${id}&user_id=${props.item.user_id}`,\n\t\t\t\tanimationType: 'slide-in-right', // 添加滑入动画\n\t\t\t\tanimationDuration: 300 // 设置动画持续时间为300ms\n\t\t\t} )\n\t\t}\n\t}\n\n\t// 处理点赞\n\tconst handleLove = ( id ) => {\n\t\temit( 'like', id )\n\t}\n\n\t// 处理评论更新\n\tconst handleCommentsUpdate = ( newComments ) => {\n\t\temit( 'update:comments', newComments )\n\t}\n\n\t// 点击详情\n\tconst handleDetail = ( article_id ) => {\n\t\tconsole.log( article_id, '跳转文章详情' )\n\t\tuni.navigateTo( {\n\t\t\turl: `/pages/article/articleDetail?article_id=${article_id}`,\n\t\t\tanimationType: 'slide-in-right', // 添加滑入动画\n\t\t\tanimationDuration: 300 // 设置动画持续时间为300ms\n\t\t} )\n\t}\n\n\t// 跳转到文章详情\n\tconst goToDetail = ( item ) => {\n\t\tif ( !props.showComments ) { // 如果不是在详情页中\n\t\t\t// 防止快速多次点击\n\t\t\tif (isNavigating.value) return;\n\t\t\tisNavigating.value = true;\n\t\t\t\n\t\t\ttry {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: `/pages/article/articleDetail?article_id=${item._id}&user_id=${item.user_id}`,\n\t\t\t\t\tanimationType: 'slide-in-right', // 添加滑入动画\n\t\t\t\t\tanimationDuration: 300, // 设置动画持续时间为300ms\n\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\tconsole.log('跳转到文章详情成功');\n\t\t\t\t\t},\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tconsole.error('跳转到文章详情失败:', err);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 抖音小程序特定错误处理\n\t\t\t\t\t\t// #ifdef MP-TOUTIAO\n\t\t\t\t\t\t// 如果是因为跳转过于频繁导致的错误，可以延迟重试\n\t\t\t\t\t\tif (err.errMsg && err.errMsg.includes('too frequent')) {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\t\t\turl: `/pages/article/articleDetail?article_id=${item._id}&user_id=${item.user_id}`\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}, 500);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '页面跳转失败',\n\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// #endif\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 非抖音小程序环境\n\t\t\t\t\t\t// #ifndef MP-TOUTIAO\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '页面跳转失败',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// #endif\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\t// 防抖处理，500ms后重置状态\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tisNavigating.value = false;\n\t\t\t\t\t\t}, 500);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('跳转异常:', e);\n\t\t\t\tisNavigating.value = false;\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '操作异常，请重试',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t// 防抖变量\n\tconst isNavigating = ref(false);\n\n\t// 计算用户信息\n\tconst userInfo = computed( ( ) => {\n\t\treturn props.item || {\n\t\t\tnickName: '未知用户',\n\t\t\tavatarUrl: '/static/images/default-avatar.png',\n\t\t\tmobile: '未填写'\n\t\t}\n\t} )\n\n\tconst onAvatarError = ( e ) => {\n\t\te.target.src = '/static/images/default-avatar.png'\n\t}\n\n\tconst handlePreview = (url, index) => {\n\t\tif (!url) return\n\t\tconsole.log('Preview URL:', url)\n\t\t\n\t\t// 获取有效图片列表\n\t\tconst validImages = props.item.images.filter(img => img.thumbnailURL || img.compressedURL || img.url)\n\t\tif (validImages.length) {\n\t\t\t// 图片超过9张时，只预览前8张\n\t\t\tconst maxPreviewImages = validImages.length > 9 ? 8 : 9\n\t\t\t// 提取图片URL列表 - 优先使用compressedURL，最多显示maxPreviewImages张\n\t\t\tconst limitedImages = validImages.slice(0, maxPreviewImages)\n\t\t\tlet urls = limitedImages.map(img => img.compressedURL || img.thumbnailURL || img.url)\n\t\t\t\n\t\t\t// 抖音小程序图片处理\n\t\t\t// #ifdef MP-TOUTIAO\n\t\t\t// 确保所有图片URL都是https\n\t\t\turls = urls.map(imgUrl => {\n\t\t\t\t// 修复协议为https\n\t\t\t\tif (imgUrl && imgUrl.startsWith('http://')) {\n\t\t\t\t\treturn imgUrl.replace('http://', 'https://');\n\t\t\t\t}\n\t\t\t\treturn imgUrl;\n\t\t\t});\n\t\t\t// #endif\n\t\t\t\n\t\t\t// 确保索引不超过限制后的图片数量\n\t\t\tconst previewIndex = Math.min(index, urls.length - 1)\n\t\t\t\n\t\t\t// 使用uni.previewImage实现图片预览和左右滑动功能\n\t\t\tuni.previewImage({\n\t\t\t\turls: urls,           // 需要预览的图片链接列表\n\t\t\t\tcurrent: urls[previewIndex], // 当前显示图片的链接\n\t\t\t\tindicator: 'number',  // 显示页码指示器\n\t\t\t\tloop: true,           // 循环预览\n\t\t\t\t// 抖音小程序特殊处理\n\t\t\t\t// #ifdef MP-TOUTIAO\n\t\t\t\tlongPressActions: {\n\t\t\t\t\titemList: ['保存图片', '分享'],\n\t\t\t\t\tsuccess: function(data) {\n\t\t\t\t\t\tconsole.log('选中了第' + (data.tapIndex + 1) + '个按钮');\n\t\t\t\t\t},\n\t\t\t\t\tfail: function(err) {\n\t\t\t\t\t\tconsole.log(err.errMsg);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t// #endif\n\t\t\t\tsuccess: () => {\n\t\t\t\t\tconsole.log('图片预览成功');\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\tconsole.error('预览图片失败:', err);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '预览图片失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t// Add a new function for image preview on long press\n\tconst handleLongPressPreview = (url, index) => {\n\t\tif (!url) return\n\t\tconsole.log('Original URL:', url)\n\t\t\n\t\t// 获取有效图片列表\n\t\tconst validImages = props.item.images.filter(img => img.thumbnailURL || img.compressedURL || img.url)\n\t\tif (validImages.length) {\n\t\t\t// 图片超过9张时，只预览前8张\n\t\t\tconst maxPreviewImages = validImages.length > 9 ? 8 : 9\n\t\t\t// 提取图片URL列表 - 优先使用compressedURL，最多显示maxPreviewImages张\n\t\t\tconst limitedImages = validImages.slice(0, maxPreviewImages)\n\t\t\tlet urls = limitedImages.map(img => img.compressedURL || img.thumbnailURL || img.url)\n\t\t\t\n\t\t\t// 抖音小程序图片处理\n\t\t\t// #ifdef MP-TOUTIAO\n\t\t\t// 确保所有图片URL都是https\n\t\t\turls = urls.map(imgUrl => {\n\t\t\t\t// 修复协议为https\n\t\t\t\tif (imgUrl && imgUrl.startsWith('http://')) {\n\t\t\t\t\treturn imgUrl.replace('http://', 'https://');\n\t\t\t\t}\n\t\t\t\treturn imgUrl;\n\t\t\t});\n\t\t\t// #endif\n\t\t\t\n\t\t\t// 传递所有图片URL到父组件进行预览\n\t\t\t// 确保索引不超过限制后的图片数量\n\t\t\tconst previewIndex = Math.min(index, urls.length - 1)\n\t\t\temit('preview', urls[previewIndex], urls)\n\t\t}\n\t}\n</script>\n\n<template>\n\t<view class=\"pyqContent\">\n\t\t<!-- \n\t\t\t抖音小程序适配说明：\n\t\t\t1. 图片事件：使用@longpress替代@longtap\n\t\t\t2. 图片属性：添加show-menu-by-longpress支持长按菜单\n\t\t\t3. 链接处理：确保所有外部链接和图片链接使用https协议\n\t\t\t4. 样式优化：添加will-change和transform:translateZ(0)提升渲染性能\n\t\t\t5. 添加防抖处理：避免快速点击导致的页面跳转问题\n\t\t-->\n\t\t<!-- 动态头部 -->\n\t\t<view class=\"pyq-head\">\n\t\t\t<view class=\"left\" @click=\"handleUserList(item.user_id)\" :class=\"{'disabled': !avatarClickEnabled}\">\n\t\t\t\t<view class=\"userAvatar\">\n\t\t\t\t\t<image class=\"avatar-image\" :src=\"userInfo.user_avatarUrl\" mode=\"aspectFill\" @error=\"onAvatarError\"></image>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"info\">\n\t\t\t\t\t<view class=\"top\">\n\t\t\t\t\t\t<view class=\"nickName\">\n\t\t\t\t\t\t\t{{userInfo.user_nickName}}\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<!-- 审核状态样式 -->\n\t\t\t\t\t\t<view class=\"examine\">\n\t\t\t\t\t\t\t<slot></slot>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"address\">\n\t\t\t\t\t\t<uni-icons custom-prefix=\"icon\" type=\"lishuai-dingwei\" size=\"12\" color=\"#8a8a8a\"></uni-icons>\n\t\t\t\t\t\t<text class=\"address-text\">{{item.district || '未知位置'}}</text>\n\t\t\t\t\t\t<!-- 在地区后面添加时间和浏览次数 -->\n\t\t\t\t\t\t<text class=\"time-text\" v-if=\"item.create_time\">{{ formatDate(item.create_time) }}</text>\n\t\t\t\t\t\t<!-- <text class=\"view-count-text\" v-if=\"item.look_count !== undefined\">{{ item.look_count || 0 }}次浏览</text/> -->\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 文章的功能操作 -->\n\t\t\t<view class=\"right\">\n\t\t\t\t<view class=\"operation\">\n\t\t\t\t\t<!-- 统一根据用户ID判断显示按钮 -->\n\t\t\t\t\t<view class=\"action-btn\" v-if=\"item.user_id === userStore.userInfo.uid\"\n\t\t\t\t\t\t@click=\"handleDelete(item._id)\">\n\t\t\t\t\t\t<uni-icons color=\"#999999\" custom-prefix=\"icon\" type=\"lishuai-shanchu\" size=\"18\"></uni-icons>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"action-btn\" v-else @click=\"handleContact(item.user_mobile)\">\n\t\t\t\t\t\t<uni-icons color=\"#5cb85c\" custom-prefix=\"icon\" type=\"lishuai-dianhua\" size=\"18\"></uni-icons>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t<!-- 动态发布的内容 -->\n\t\t<view class=\"pyq-c\" @click=\"goToDetail(item)\">\n\t\t\t<view class=\"text-content\">{{item.content}}</view>\n\t\t</view>\n\t\t<!-- 动态照片 -->\n\t\t<view class=\"pyq-img\" v-if=\"item.images?.length\">\n\t\t\t<!-- 单张图片显示 -->\n\t\t\t<view class=\"single-img\" v-if=\"item.images.length === 1\">\n\t\t\t\t<image class=\"single-img-item\" :lazy-load=\"true\" :src=\"item.images[0].compressedURL || item.images[0].thumbnailURL || item.images[0].url\" mode=\"widthFix\"\n\t\t\t\t\t@click=\"goToDetail(item)\"\n\t\t\t\t\t@longpress=\"() => handleLongPressPreview(item.images[0].compressedURL || item.images[0].thumbnailURL || item.images[0].url, 0)\"\n\t\t\t\t\tshow-menu-by-longpress></image>\n\t\t\t</view>\n\t\t\t<!-- 多张图片显示 -->\n\t\t\t<view class=\"multi-img\" v-else>\n\t\t\t\t<view :class=\"['img-grid', `grid-${Math.min(item.images.length, 9)}`]\">\n\t\t\t\t\t<!-- 如果超过9张图片，只显示8张+更多按钮；否则显示全部图片 -->\n\t\t\t\t\t<template v-if=\"item.images.length > 9\">\n\t\t\t\t\t\t<image class=\"grid-item\" :lazy-load=\"true\" v-for=\"(img, index) in item.images.slice(0, 8)\" :key=\"index\" :src=\"img.compressedURL || img.thumbnailURL || img.url\"\n\t\t\t\t\t\t\tmode=\"aspectFill\" \n\t\t\t\t\t\t\t@click=\"goToDetail(item)\"\n\t\t\t\t\t\t\t@longpress=\"() => handleLongPressPreview(img.compressedURL || img.thumbnailURL || img.url, index)\"\n\t\t\t\t\t\t\tshow-menu-by-longpress></image>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- 第9个位置显示\"更多\"提示，使用第9张图片作为背景 -->\n\t\t\t\t\t\t<view class=\"grid-item more-images-indicator\" @click=\"goToDetail(item)\">\n\t\t\t\t\t\t\t<image class=\"more-background-image\" :src=\"item.images[8].compressedURL || item.images[8].thumbnailURL || item.images[8].url\" mode=\"aspectFill\"></image>\n\t\t\t\t\t\t\t<view class=\"more-overlay\">\n\t\t\t\t\t\t\t\t<text>+{{item.images.length - 8}}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</template>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 数量小于等于9张时，正常显示 -->\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<image class=\"grid-item\" :lazy-load=\"true\" v-for=\"(img, index) in item.images\" :key=\"index\" :src=\"img.compressedURL || img.thumbnailURL || img.url\"\n\t\t\t\t\t\t\tmode=\"aspectFill\" \n\t\t\t\t\t\t\t@click=\"goToDetail(item)\"\n\t\t\t\t\t\t\t@longpress=\"() => handleLongPressPreview(img.compressedURL || img.thumbnailURL || img.url, index)\"\n\t\t\t\t\t\t\tshow-menu-by-longpress></image>\n\t\t\t\t\t</template>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 动态操作功能 -->\n\t\t<view class=\"pyq-gn\">\n\t\t\t<!-- 左侧区域，可以放置其他内容或保留空白 -->\n\t\t\t<view class=\"left-area\">\n\t\t\t\t<!-- 视频标识图标 -->\n\t\t\t\t<uni-icons v-if=\"item.videoURL || item.video?.videoURL\" custom-prefix=\"icon\" type=\"lishuai-shipin\" size=\"14\" color=\"#999999\"></uni-icons>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 右侧功能区 - 时间和浏览量一起显示 -->\n\t\t\t<view class=\"right\">\n\t\t\t\t<!-- 发布时间 -->\n\t\t\t\t<view class=\"publicTime time-info\">\n\t\t\t\t\t{{ formatDate(item.create_time) }}\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 浏览次数 -->\n\t\t\t\t<view class=\"publicTime view-info\">\n\t\t\t\t\t{{ item.look_count || 0 }}次浏览\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<style lang=\"scss\" scoped>\n\t/*朋友圈动态*/\n\t.pyqContent {\n\t\tflex: 1;\n\t\tmargin-bottom: 2rpx;\n\t\tpadding: 24rpx;\n\t\tbackground-color: #fff;\n\n\t\t/* 显示详情按钮 */\n\t\t.detail-btn {\n\t\t\tpadding: 8rpx 20rpx;\n\t\t\tbackground-color: #1890ff;\n\t\t\tcolor: #ffffff;\n\t\t\tborder-radius: 8rpx;\n\t\t\tfont-size: 24rpx;\n\t\t}\n\t\t\n\t\t/*头部-用户基本信息*/\n\t\t.pyq-head {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\n\t\t\t/*左侧用户信息*/\n\t\t\t.left {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\n\t\t\t\t&.disabled {\n\t\t\t\t\tcursor: not-allowed;\n\t\t\t\t\topacity: 0.9;\n\t\t\t\t}\n\n\t\t\t\t/*头像*/\n\t\t\t\t.userAvatar {\n\t\t\t\t\twidth: 80rpx;\n\t\t\t\t\theight: 80rpx;\n\t\t\t\t\tborder-radius: 8rpx;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\n\t\t\t\t\t.avatar-image {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.info {\n\t\t\t\t\tmargin: 0 16rpx;\n\n\t\t\t\t\t.top {\n\t\t\t\t\t\tdisplay: flex;\n\n\t\t\t\t\t\t/*昵称*/\n\t\t\t\t\t\t.nickName {\n\t\t\t\t\t\t\t@include gradientText;\n\t\t\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t/*审核样式*/\n\t\t\t\t\t\t.examine {\n\t\t\t\t\t\t\tmargin-left: 16rpx;\n\t\t\t\t\t\t\tcolor: #fa8c16;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t/*定位*/\n\t\t\t\t\t.address {\n\t\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\t\tcolor: $pyq-text-color-helper;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tflex-wrap: wrap; /* 小屏幕上允许换行 */\n\t\t\t\t\t\tmargin-top: 4rpx; /* 添加顶部间距 */\n\t\t\t\t\t\t\n\t\t\t\t\t\t.address-text {\n\t\t\t\t\t\t\tmargin-left: 4rpx;\n\t\t\t\t\t\t\tmargin-right: 8rpx; /* 右侧添加间距 */\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t/* 时间文本样式 */\n\t\t\t\t\t\t.time-text {\n\t\t\t\t\t\t\tcolor: #999;\n\t\t\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\t\t\tposition: relative; /* 用于定位分隔符 */\n\t\t\t\t\t\t\tpadding-left: 12rpx; /* 为分隔符留出空间 */\n\t\t\t\t\t\t\tmargin-right: 8rpx; /* 右侧添加间距 */\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t/* 使用伪元素添加分隔符 */\n\t\t\t\t\t\t\t&:before {\n\t\t\t\t\t\t\t\tcontent: '|';\n\t\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t\t\t\tcolor: #ddd;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t/* 浏览次数文本样式 */\n\t\t\t\t\t\t.view-count-text {\n\t\t\t\t\t\t\tcolor: #999;\n\t\t\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\t\t\tposition: relative; /* 用于定位分隔符 */\n\t\t\t\t\t\t\tpadding-left: 12rpx; /* 为分隔符留出空间 */\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t/* 使用伪元素添加分隔符 */\n\t\t\t\t\t\t\t&:before {\n\t\t\t\t\t\t\t\tcontent: '|';\n\t\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t\t\t\tcolor: #ddd;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*顶部右侧功能*/\n\t\t\t.right {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\n\t\t\t\t.operation {\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\n\t\t\t\t\t.action-btn {\n\t\t\t\t\t\tpadding: 20rpx;\n\t\t\t\t\t\tcursor: pointer;\n\n\t\t\t\t\t\t&:active {\n\t\t\t\t\t\t\topacity: 0.7;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/*内容-发布文字内容*/\n\t\t.pyq-c {\n\t\t\tmargin-left: 96rpx;\n\t\t\tfont-size: 32rpx;\n\t\t\tcolor: $pyq-text-color-body;\n\t\t\tcursor: pointer;\n\n\t\t\t&:active {\n\t\t\t\topacity: 0.7;\n\t\t\t}\n\t\t}\n\n\t\t/*文字内容*/\n\t\t.text-content {\n\t\t\t@include textShenglue(5);\n\t\t\tmargin-bottom: 16rpx;\n\t\t}\n\n\t\t/*发布的图片*/\n\t\t.pyq-img {\n\t\t\tmargin-left: 96rpx;\n\n\t\t\t// 单张图片样式\n\t\t\t.single-img {\n\t\t\t\twidth: 300rpx;\n\t\t\t\tmin-height: 100rpx;\n\t\t\t\tmax-height: 600rpx;\n\t\t\t\tborder-radius: 8rpx;\n\t\t\t\toverflow: hidden;\n\t\t\t\t/* 抖音小程序兼容性优化 */\n\t\t\t\tposition: relative;\n\t\t\t\tfont-size: 0;\n\n\t\t\t\t.single-img-item {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: auto;\n\t\t\t\t\tvertical-align: top;\n\t\t\t\t\t/* 抖音小程序图片优化 */\n\t\t\t\t\twill-change: transform;\n\t\t\t\t\ttransform: translateZ(0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 多张图片样式\n\t\t\t.multi-img {\n\t\t\t\twidth: 100%; // 确保容器宽度占满父元素\n\t\t\t\t\n\t\t\t\t.img-grid {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-wrap: wrap;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tmax-width: 630rpx; // 设置最大宽度，防止在大屏上过宽\n\t\t\t\t\t\n\t\t\t\t\t// 使用统一间距\n\t\t\t\t\tmargin: -5rpx;\n\t\t\t\t\tpadding: 5rpx;\n\n\t\t\t\t\t.grid-item {\n\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\twidth: calc(33.333% - 10rpx); // 3等分减去间距\n\t\t\t\t\t\theight: 180rpx; // 恢复固定高度\n\t\t\t\t\t\tmargin: 5rpx;\n\t\t\t\t\t\tborder-radius: 8rpx;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\t\n\t\t\t\t\t\t/* 抖音小程序图片优化 */\n\t\t\t\t\t\twill-change: transform;\n\t\t\t\t\t\ttransform: translateZ(0);\n\t\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 更多图片指示器样式\n\t\t\t\t\t.more-images-indicator {\n\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\twidth: calc(33.333% - 10rpx); // 与普通图片保持一致的宽度\n\t\t\t\t\t\theight: 180rpx; // 恢复固定高度\n\t\t\t\t\t\tmargin: 5rpx;\n\t\t\t\t\t\tborder-radius: 8rpx;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 抖音小程序兼容性优化\n\t\t\t\t\t\tz-index: 1;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 背景图片样式\n\t\t\t\t\t\t.more-background-image {\n\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t\t\tz-index: 1;\n\t\t\t\t\t\t\tobject-fit: cover;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 半透明遮罩层\n\t\t\t\t\t\t.more-overlay {\n\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t\t\tbackground-color: rgba(0, 0, 0, 0.5);\n\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t\tz-index: 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\ttext {\n\t\t\t\t\t\t\t// 确保文字在抖音小程序中正确显示\n\t\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\t\tz-index: 3;\n\t\t\t\t\t\t\tfont-size: 32rpx;\n\t\t\t\t\t\t\tcolor: #fff;\n\t\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// 特殊处理特定数量的图片\n\t\t\t\t\t&.grid-1 {\n\t\t\t\t\t\t// 单图样式特殊处理\n\t\t\t\t\t\t.grid-item {\n\t\t\t\t\t\t\twidth: 300rpx; // 单图固定宽度\n\t\t\t\t\t\t\theight: 300rpx; // 单图固定高度\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 4张图片特殊处理 - 2x2布局\n\t\t\t\t\t&.grid-4 {\n\t\t\t\t\t\tmax-width: 420rpx; // 4张图特殊宽度\n\t\t\t\t\t\t\n\t\t\t\t\t\t.grid-item {\n\t\t\t\t\t\t\twidth: calc(50% - 10rpx); // 二等分宽度减去间隙\n\t\t\t\t\t\t\theight: 180rpx; // 保持固定高度\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// 5-9张图片使用3x3网格布局\n\t\t\t\t\t&.grid-5, &.grid-6, &.grid-7, &.grid-8, &.grid-9 {\n\t\t\t\t\t\t/* 抖音小程序网格布局优化 */\n\t\t\t\t\t\tmax-width: 630rpx;\n\t\t\t\t\t\t\n\t\t\t\t\t\t.grid-item {\n\t\t\t\t\t\t\twidth: calc(33.333% - 10rpx);\n\t\t\t\t\t\t\theight: 180rpx; // 保持固定高度\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/*朋友圈动态操作功能区*/\n\t\t.pyq-gn {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\t\t\tmargin-top: 24rpx;\n\t\t\tpadding-left: 96rpx;\n\n\t\t\t/*左侧区域，可以放置其他内容或保留空白 */\n\t\t\t.left-area {\n\t\t\t\t// 视频标识图标\n\t\t\t\t.uni-icons {\n\t\t\t\t\tmargin-right: 8rpx;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\ttop: 2rpx;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*右侧功能区 - 时间和浏览量一起显示 */\n\t\t\t.right {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\n\t\t\t\t/*发布时间*/\n\t\t\t\t.publicTime {\n\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\tcolor: $pyq-text-color-placeholder;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t/* 分隔符 */\n\t\t\t\t.time-info:after {\n\t\t\t\t\tcontent: '|';\n\t\t\t\t\tmargin: 0 10rpx;\n\t\t\t\t\tcolor: #ddd;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</style>","import Component from 'E:/dy2/components/articleItem/articleItem.vue'\ntt.createComponent(Component)"],"names":["useUserInfoStore","ref","onMounted","uni","computed"],"mappings":"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"}