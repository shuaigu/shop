{"version":3,"file":"manage-popup.js","sources":["components/manage-popup/manage-popup.vue","D:/代码测试/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTovZHkyL2NvbXBvbmVudHMvbWFuYWdlLXBvcHVwL21hbmFnZS1wb3B1cC52dWU"],"sourcesContent":["<script setup>\r\n\timport { ref, watch } from 'vue'\r\n\r\n\tconst props = defineProps({\r\n\t\tshow: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\ttitle: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '添加分类'\r\n\t\t},\r\n\t\teditValue: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: ''\r\n\t\t},\r\n\t\timageUrl: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: ''\r\n\t\t},\r\n\t\timageUploading: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\tuploadProgress: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 0\r\n\t\t},\r\n\t\tisVisible: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t}\r\n\t})\r\n\r\n\tconst emit = defineEmits(['update:show', 'confirm', 'choose-image'])\r\n\r\n\t// 输入内容\r\n\tconst inputValue = ref('')\r\n\t// 本地图片URL\r\n\tconst localImageUrl = ref('')\r\n\t// 是否可见\r\n\tconst visibleState = ref(true)\r\n\r\n\t// 监听 show 和 editValue 的组合变化\r\n\twatch([() => props.show, () => props.editValue, () => props.imageUrl, () => props.isVisible], ([showVal, editVal, imgVal, visibleVal]) => {\r\n\t\tif (showVal) {\r\n\t\t\t// 当弹窗显示且有编辑值时，设置输入值\r\n\t\t\tif (editVal) {\r\n\t\t\t\tinputValue.value = editVal\r\n\t\t\t}\r\n\t\t\t// 设置图片URL\r\n\t\t\tlocalImageUrl.value = imgVal\r\n\t\t\t// 设置可见性状态\r\n\t\t\tvisibleState.value = visibleVal\r\n\t\t} else {\r\n\t\t\t// 当弹窗关闭时，清空输入值和图片\r\n\t\t\tinputValue.value = ''\r\n\t\t\tlocalImageUrl.value = ''\r\n\t\t\tvisibleState.value = true\r\n\t\t}\r\n\t})\r\n\r\n\t// 输入事件处理\r\n\tconst handleInput = (e) => {\r\n\t\tinputValue.value = e.detail.value\r\n\t}\r\n\r\n\t// 选择图片\r\n\tconst chooseImage = () => {\r\n\t\temit('choose-image')\r\n\t}\r\n\r\n\t// 确认\r\n\tconst handleConfirm = () => {\r\n\t\tif (!inputValue.value.trim()) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请输入分类名称',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\t\r\n\t\t// 发送确认事件，传递分类名称和图片URL\r\n\t\temit('confirm', {\r\n\t\t\tcate_name: inputValue.value,\r\n\t\t\tcate_img: props.imageUrl,\r\n\t\t\tis_visible: visibleState.value\r\n\t\t})\r\n\t\t\r\n\t\temit('update:show', false)\r\n\t\tinputValue.value = ''\r\n\t}\r\n\r\n\t// 取消\r\n\tconst handleCancel = () => {\r\n\t\temit('update:show', false)\r\n\t}\r\n</script>\r\n\r\n<template>\r\n\t<view class=\"popup-wrapper\" v-if=\"props.show\">\r\n\t\t<!-- 遮罩层 -->\r\n\t\t<view class=\"mask\" @click=\"handleCancel\"></view>\r\n\t\t<!-- 弹窗内容 -->\r\n\t\t<view class=\"popup-content\">\r\n\t\t\t<view class=\"popup-title\">{{ title }}</view>\r\n\t\t\t\r\n\t\t\t<!-- 图片上传区域 -->\r\n\t\t\t<view class=\"image-upload-area\">\r\n\t\t\t\t<view class=\"image-preview\" v-if=\"props.imageUrl\" @click=\"chooseImage\">\r\n\t\t\t\t\t<image :src=\"props.imageUrl\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t<view class=\"image-overlay\" v-if=\"props.imageUploading\">\r\n\t\t\t\t\t\t<view class=\"progress-text\">{{ props.uploadProgress }}%</view>\r\n\t\t\t\t\t\t<view class=\"progress-bar\">\r\n\t\t\t\t\t\t\t<view class=\"progress\" :style=\"{width: props.uploadProgress + '%'}\"></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"image-upload-btn\" v-else @click=\"chooseImage\">\r\n\t\t\t\t\t<uni-icons type=\"camera\" size=\"24\" color=\"#999\"></uni-icons>\r\n\t\t\t\t\t<text class=\"upload-text\">点击上传图标</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"popup-body\">\r\n\t\t\t\t<input type=\"text\" :value=\"inputValue\" @input=\"handleInput\" placeholder=\"请输入分类名称\"\r\n\t\t\t\t\tclass=\"input\" />\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"visibility-toggle\">\r\n\t\t\t\t\t<text class=\"toggle-label\">隐藏此分类</text>\r\n\t\t\t\t\t<switch :checked=\"!visibleState\" @change=\"e => visibleState = !e.detail.value\" color=\"#399bfe\" />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"popup-footer\">\r\n\t\t\t\t<button class=\"btn cancel-btn\" @click=\"handleCancel\">取消</button>\r\n\t\t\t\t<button class=\"btn confirm-btn\" @click=\"handleConfirm\">确定</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<style lang=\"scss\" scoped>\r\n\t.popup-wrapper {\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\ttop: 0;\r\n\t\tbottom: 0;\r\n\t\tz-index: 9999;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.mask {\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\ttop: 0;\r\n\t\tbottom: 0;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.5);\r\n\t\tz-index: 9998;\r\n\t}\r\n\r\n\t.popup-content {\r\n\t\tposition: relative;\r\n\t\twidth: 560rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 48rpx 32rpx;\r\n\t\tz-index: 10000;\r\n\r\n\t\t.popup-title {\r\n\t\t\ttext-align: center;\r\n\t\t\tfont-size: 32rpx;\r\n\t\t\tfont-weight: bold;\r\n\t\t\tcolor: $pyq-text-color-body;\r\n\t\t\tmargin-bottom: 32rpx;\r\n\t\t}\r\n\t\t\r\n\t\t.image-upload-area {\r\n\t\t\tmargin-bottom: 32rpx;\r\n\t\t}\r\n\t\t\r\n\t\t.image-preview {\r\n\t\t\twidth: 120rpx;\r\n\t\t\theight: 120rpx;\r\n\t\t\tmargin: 0 auto;\r\n\t\t\tborder-radius: 12rpx;\r\n\t\t\toverflow: hidden;\r\n\t\t\tposition: relative;\r\n\t\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);\r\n\t\t\t\r\n\t\t\timage {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tobject-fit: cover;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.image-overlay {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttop: 0;\r\n\t\t\t\tleft: 0;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tbackground-color: rgba(0, 0, 0, 0.5);\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.progress-text {\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tmargin-bottom: 10rpx;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.progress-bar {\r\n\t\t\t\twidth: 80%;\r\n\t\t\t\theight: 6rpx;\r\n\t\t\t\tbackground-color: rgba(255, 255, 255, 0.3);\r\n\t\t\t\tborder-radius: 3rpx;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.progress {\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tbackground-color: #fff;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t.image-upload-btn {\r\n\t\t\twidth: 120rpx;\r\n\t\t\theight: 120rpx;\r\n\t\t\tmargin: 0 auto;\r\n\t\t\tbackground-color: #f8f8f8;\r\n\t\t\tborder: 1rpx dashed #ddd;\r\n\t\t\tborder-radius: 12rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\t\r\n\t\t\t.upload-text {\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tcolor: #999;\r\n\t\t\t\tmargin-top: 10rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.popup-body {\r\n\t\t\tposition: relative;\r\n\t\t\tmargin-bottom: 48rpx;\r\n\t\t\tz-index: 10001;\r\n\r\n\t\t\t.input {\r\n\t\t\t\tposition: relative;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 88rpx;\r\n\t\t\t\tpadding: 0 24rpx;\r\n\t\t\t\tbackground-color: #f7f7f7;\r\n\t\t\t\tborder-radius: 8rpx;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tz-index: 10002;\r\n\t\t\t\tmargin-bottom: 24rpx;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.visibility-toggle {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding: 8rpx 24rpx;\r\n\t\t\t\t\r\n\t\t\t\t.toggle-label {\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tcolor: $pyq-text-color-body;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.popup-footer {\r\n\t\t\tdisplay: flex;\r\n\t\t\tgap: 24rpx;\r\n\r\n\t\t\t.btn {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\theight: 88rpx;\r\n\t\t\t\tline-height: 88rpx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tborder-radius: 44rpx;\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tmargin: 0;\r\n\t\t\t\tpadding: 0;\r\n\t\t\t}\r\n\r\n\t\t\t.cancel-btn {\r\n\t\t\t\tbackground-color: #f7f7f7;\r\n\t\t\t\tcolor: $pyq-text-color-body;\r\n\r\n\t\t\t\t&:active {\r\n\t\t\t\t\topacity: 0.8;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.confirm-btn {\r\n\t\t\t\tbackground: linear-gradient(to right, $pyq-vi-color, rgba($pyq-vi-color, 0.6));\r\n\t\t\t\tcolor: #fff;\r\n\r\n\t\t\t\t&:active {\r\n\t\t\t\t\topacity: 0.8;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import Component from 'E:/dy2/components/manage-popup/manage-popup.vue'\ntt.createComponent(Component)"],"names":["ref","watch","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGC,UAAM,QAAQ;AA+Bd,UAAM,OAAO;AAGb,UAAM,aAAaA,cAAG,IAAC,EAAE;AAEzB,UAAM,gBAAgBA,cAAG,IAAC,EAAE;AAE5B,UAAM,eAAeA,cAAG,IAAC,IAAI;AAG7BC,kBAAK,MAAC,CAAC,MAAM,MAAM,MAAM,MAAM,MAAM,WAAW,MAAM,MAAM,UAAU,MAAM,MAAM,SAAS,GAAG,CAAC,CAAC,SAAS,SAAS,QAAQ,UAAU,MAAM;AACzI,UAAI,SAAS;AAEZ,YAAI,SAAS;AACZ,qBAAW,QAAQ;AAAA,QACnB;AAED,sBAAc,QAAQ;AAEtB,qBAAa,QAAQ;AAAA,MACxB,OAAS;AAEN,mBAAW,QAAQ;AACnB,sBAAc,QAAQ;AACtB,qBAAa,QAAQ;AAAA,MACrB;AAAA,IACH,CAAE;AAGD,UAAM,cAAc,CAAC,MAAM;AAC1B,iBAAW,QAAQ,EAAE,OAAO;AAAA,IAC5B;AAGD,UAAM,cAAc,MAAM;AACzB,WAAK,cAAc;AAAA,IACnB;AAGD,UAAM,gBAAgB,MAAM;AAC3B,UAAI,CAAC,WAAW,MAAM,QAAQ;AAC7BC,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AACD;AAAA,MACA;AAGD,WAAK,WAAW;AAAA,QACf,WAAW,WAAW;AAAA,QACtB,UAAU,MAAM;AAAA,QAChB,YAAY,aAAa;AAAA,MAC5B,CAAG;AAED,WAAK,eAAe,KAAK;AACzB,iBAAW,QAAQ;AAAA,IACnB;AAGD,UAAM,eAAe,MAAM;AAC1B,WAAK,eAAe,KAAK;AAAA,IACzB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/FF,GAAG,gBAAgB,SAAS;"}