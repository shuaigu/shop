{"version":3,"file":"articleDetail-choujia.js","sources":["components/articleDetail-choujia/articleDetail-choujia.vue","D:/代码测试/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTovZHkyL2NvbXBvbmVudHMvYXJ0aWNsZURldGFpbC1jaG91amlhL2FydGljbGVEZXRhaWwtY2hvdWppYS52dWU"],"sourcesContent":["<template>\n\t<view class=\"lottery-container\">\n\t\t<view class=\"lottery-header\">\n\t\t\t<text class=\"lottery-title\">评论区抽大奖</text>\n\t\t\t<view class=\"lottery-subtitle\">\n\t\t\t\t<text>评论区共 {{commenterCount}} 人参与</text>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 九宫格抽奖 -->\n\t\t<view class=\"lottery-grid\">\n\t\t\t<view \n\t\t\t\tv-for=\"(prize, index) in prizes\" \n\t\t\t\t:key=\"index\"\n\t\t\t\t:class=\"['prize-cell', {'active': currentIndex === index}]\"\n\t\t\t\t:style=\"{'animation-delay': isRotating ? `${index * 0.1}s` : '0s'}\"\n\t\t\t>\n\t\t\t\t<view class=\"prize-content\">\n\t\t\t\t\t<image \n\t\t\t\t\t\tclass=\"prize-avatar\" \n\t\t\t\t\t\t:src=\"prize.avatar\" \n\t\t\t\t\t\tmode=\"aspectFill\"\n\t\t\t\t\t></image>\n\t\t\t\t\t<text class=\"prize-name\">{{ prize.name }}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 立即领取按钮 -->\n\t\t<view class=\"lottery-btn\" @click=\"startLottery\">\n\t\t\t<text>{{isRotating ? '抽奖中...' : '开始抽奖'}} ></text>\n\t\t</view>\n\t\t\n\t\t<!-- 中奖弹窗 -->\n\t\t<view v-if=\"showResult\" class=\"result-popup\">\n\t\t\t<view class=\"result-content\">\n\t\t\t\t<view class=\"result-header\">抽奖结果</view>\n\t\t\t\t\n\t\t\t\t<!-- 显示幸运用户 -->\n\t\t\t\t<view v-if=\"luckyUsers.length > 0\" class=\"lucky-users\">\n\t\t\t\t\t<view class=\"lucky-users-title\">幸运用户:</view>\n\t\t\t\t\t<view class=\"prize-time\">{{ currentTime }}</view>\n\t\t\t\t\t<view v-for=\"(user, index) in luckyUsers\" :key=\"index\" class=\"lucky-user-item\">\n\t\t\t\t\t\t<image class=\"lucky-user-avatar\" :src=\"user.avatarUrl\" mode=\"aspectFill\"></image>\n\t\t\t\t\t\t<view class=\"lucky-user-info\">\n\t\t\t\t\t\t\t<view class=\"name-time-container\">\n\t\t\t\t\t\t\t\t<text class=\"lucky-user-name\">{{user.nickName}}</text>\n\t\t\t\t\t\t\t\t<text class=\"time\" v-if=\"user.create_time\">{{formatTime(user.create_time)}}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"comment-text\">\n\t\t\t\t\t\t\t\t<view class=\"content-wrapper\">\n\t\t\t\t\t\t\t\t\t<text class=\"content\">评论说：{{user.content}}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<button class=\"result-btn\" @click=\"closeResult\">确定</button>\n\t\t\t\t\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted, computed, watch } from 'vue';\n\n// 定义props接收评论者列表\nconst props = defineProps({\n\tcommenters: {\n\t\ttype: Array,\n\t\tdefault: () => []\n\t}\n});\n\n// 定义事件\nconst emit = defineEmits(['lottery-result']);\n\n// 抽奖奖品列表 - 将由云对象提供\nconst prizes = reactive([]);\n\n// 顺序数组，定义灯光走向 - 将由云对象提供\nconst sequence = ref([]);\n\n// 当前高亮索引\nconst currentIndex = ref(-1);\n\n// 抽奖结果\nconst result = ref('');\n\n// 显示结果弹窗\nconst showResult = ref(false);\n\n// 抽奖状态\nconst isRotating = ref(false);\n\n// 获取幸运用户\nconst luckyUsers = ref([]);\n\n// 计算评论者数量 - 显示实际参与抽奖的人数（最多25人）\nconst commenterCount = computed(() => Math.min(props.commenters.length, 25));\n\n// 添加当前时间\nconst currentTime = ref('');\n\n// 监听评论者列表变化\nwatch(() => props.commenters, (newVal) => {\n\tif (newVal && newVal.length > 0) {\n\t\t// 当评论者列表变化时，清空抽奖结果\n\t\tresult.value = '';\n\t\tshowResult.value = false;\n\t\tluckyUsers.value = [];\n\t}\n}, { deep: true });\n\nlet timer = null;\nlet times = 0;\n\n// 速度控制 - 定义初始、最快和最终速度\nconst INITIAL_SPEED = 200; // 开始时较慢\nconst MAX_SPEED = 50;     // 中间最快速度\nconst FINAL_SPEED = 300;  // 结束时很慢\nlet currentSpeed = INITIAL_SPEED;\n\n// 初始化：设置用户展示数据\nonMounted(async () => {\n\ttry {\n\t\t// 按时间排序评论，确保最新的评论在前\n\t\tconst sortedCommenters = [...props.commenters].sort((a, b) => {\n\t\t\t// 如果有创建时间，按时间倒序排列（新的在前）\n\t\t\tif (a.create_time && b.create_time) {\n\t\t\t\treturn b.create_time - a.create_time;\n\t\t\t}\n\t\t\t// 没有时间的情况下保持原顺序\n\t\t\treturn 0;\n\t\t});\n\t\t\n\t\t// 只使用最新的25个评论者\n\t\tconst availableCommenters = sortedCommenters.slice(0, 25);\n\t\t\n\t\t// 构建展示列表\n\t\tconst prizeList = availableCommenters.map((commenter) => ({\n\t\t\tavatar: commenter.avatarUrl || '/static/images/default-avatar.png',\n\t\t\tname: (commenter.nickName || '匿名用户').slice(0, 5)\n\t\t}));\n\t\t\n\t\t// 更新响应式数据\n\t\tObject.assign(prizes, prizeList);\n\t\t\n\t\t// 设置抽奖动画顺序\n\t\tsequence.value = Array.from({length: prizeList.length}, (_, i) => i);\n\t} catch (error) {\n\t\tconsole.error('初始化用户展示失败:', error);\n\t\tuni.showToast({\n\t\t\ttitle: '初始化失败，请重试',\n\t\t\ticon: 'none'\n\t\t});\n\t}\n\t\n\treturn () => {\n\t\tif (timer) {\n\t\t\tclearTimeout(timer);\n\t\t\ttimer = null;\n\t\t}\n\t};\n});\n\n// 开始抽奖\nconst startLottery = async () => {\n\t// 检查是否正在抽奖中\n\tif (isRotating.value) {\n\t\treturn;\n\t}\n\t\n\t// 检查是否有评论者参与\n\tif (props.commenters.length === 0) {\n\t\tuni.showToast({\n\t\t\ttitle: '暂无评论者参与',\n\t\t\ticon: 'none'\n\t\t});\n\t\treturn;\n\t}\n\t\n\t// 设置抽奖状态\n\tisRotating.value = true;\n\t\n\t// 清空上次抽奖结果\n\tresult.value = '';\n\tluckyUsers.value = [];\n\t\n\ttry {\n\t\t// 限制最多25个参与者\n\t\tconst participantCount = Math.min(props.commenters.length, 25);\n\t\t\n\t\t// 调用云函数执行抽奖\n\t\tconst choujiangWx = uniCloud.importObject('choujiangWx');\n\t\tconst lotteryResult = await choujiangWx.doLottery({\n\t\t\tuserId: uni.getStorageSync('userId') || '', // 记录抽奖操作者\n\t\t\tcommentCount: participantCount\n\t\t});\n\t\t\n\t\tif (!lotteryResult.success) {\n\t\t\tthrow new Error('抽奖失败');\n\t\t}\n\t\t\n\t\t// 获取抽奖结果\n\t\tconst { selectedIndex, targetPosition } = lotteryResult;\n\t\t\n\t\t// 重置抽奖动画参数\n\t\tcurrentSpeed = INITIAL_SPEED;\n\t\ttimes = 0;\n\t\t\n\t\t// 设置动画总圈数\n\t\tconst totalRounds = 4; // 转4圈\n\t\tconst targetTimes = totalRounds * sequence.value.length + targetPosition + 1;\n\t\t\n\t\t// 开始抽奖动画\n\t\trunLottery(targetPosition, targetTimes, lotteryResult.prize);\n\t\t\n\t} catch (error) {\n\t\tconsole.error('抽奖执行失败:', error);\n\t\tuni.showToast({\n\t\t\ttitle: '抽奖失败，请重试',\n\t\t\ticon: 'none'\n\t\t});\n\t\tisRotating.value = false;\n\t}\n};\n\n// 运行抽奖动画 - 实现先慢后快再慢的效果\nconst runLottery = (targetPosition, targetTimes, finalPrize) => {\n\ttimer = setTimeout(() => {\n\t\t// 计算当前应该高亮的格子序号\n\t\tlet index = times % sequence.value.length;\n\t\tcurrentIndex.value = index; // 直接使用索引，不需要通过sequence映射\n\t\t\n\t\ttimes++;\n\t\t\n\t\t// 动态调整速度\n\t\tconst accelerationPhase = Math.floor(targetTimes * 0.3);\n\t\tconst decelerationPhase = Math.floor(targetTimes * 0.7);\n\t\t\n\t\tif (times < accelerationPhase) {\n\t\t\tcurrentSpeed = INITIAL_SPEED - Math.floor((INITIAL_SPEED - MAX_SPEED) * (times / accelerationPhase));\n\t\t} else if (times > decelerationPhase) {\n\t\t\tconst slowDownProgress = (times - decelerationPhase) / (targetTimes - decelerationPhase);\n\t\t\tcurrentSpeed = MAX_SPEED + Math.floor((FINAL_SPEED - MAX_SPEED) * slowDownProgress);\n\t\t} else {\n\t\t\tcurrentSpeed = MAX_SPEED;\n\t\t}\n\t\t\n\t\t// 判断是否需要停止\n\t\tif (times >= targetTimes) {\n\t\t\tclearTimeout(timer);\n\t\t\tisRotating.value = false;\n\t\t\tresult.value = finalPrize.name;\n\t\t\tcurrentIndex.value = targetPosition; // 确保最终位置准确\n\t\t\t\n\t\t\t// 设置当前时间\n\t\t\tconst now = new Date();\n\t\t\tconst year = now.getFullYear();\n\t\t\tconst month = (now.getMonth() + 1).toString().padStart(2, '0');\n\t\t\tconst day = now.getDate().toString().padStart(2, '0');\n\t\t\tconst hours = now.getHours().toString().padStart(2, '0');\n\t\t\tconst minutes = now.getMinutes().toString().padStart(2, '0');\n\t\t\tcurrentTime.value = `${year}年${month}月${day}日 ${hours}:${minutes}`;\n\t\t\t\n\t\t\tsetTimeout(() => {\n\t\t\t\t// 选择中奖用户时使用实际位置\n\t\t\t\tselectLuckyUsers(result.value, targetPosition);\n\t\t\t\tshowResult.value = true;\n\t\t\t\temit('lottery-result', result.value);\n\t\t\t}, 2000);\n\t\t} else {\n\t\t\trunLottery(targetPosition, targetTimes, finalPrize);\n\t\t}\n\t}, currentSpeed);\n};\n\n// 选择幸运用户\nconst selectLuckyUsers = (prizeResult, targetPosition) => {\n\tif (!props.commenters || props.commenters.length === 0) {\n\t\treturn;\n\t}\n\t\n\t// 按时间排序评论，确保最新的评论在前\n\tconst sortedCommenters = [...props.commenters].sort((a, b) => {\n\t\t// 如果有创建时间，按时间倒序排列（新的在前）\n\t\tif (a.create_time && b.create_time) {\n\t\t\treturn b.create_time - a.create_time;\n\t\t}\n\t\t// 没有时间的情况下保持原顺序\n\t\treturn 0;\n\t});\n\t\n\t// 限制为最新25个评论用户\n\tconst limitedCommenters = sortedCommenters.slice(0, 25);\n\t\n\t// 直接使用目标位置的用户\n\tconst selectedUser = limitedCommenters[targetPosition];\n\tif (selectedUser) {\n\t\tluckyUsers.value = [selectedUser];\n\t}\n\t\n\t// 展示中奖提示\n\tif (!prizeResult.includes('谢谢参与')) {\n\t\tuni.showToast({\n\t\t\ttitle: '恭喜你抽中奖品！',\n\t\t\ticon: 'success',\n\t\t\tduration: 2000\n\t\t});\n\t}\n};\n\n// 关闭结果弹窗\nconst closeResult = () => {\n\tshowResult.value = false;\n};\n\n// 格式化时间\nconst formatTime = (timestamp) => {\n\tif (!timestamp) return '';\n\t\n\tconst now = Date.now();\n\tconst diff = now - timestamp;\n\t\n\t// 小于1分钟\n\tif (diff < 60000) {\n\t\treturn '刚刚';\n\t}\n\t// 小于1小时\n\tif (diff < 3600000) {\n\t\treturn Math.floor(diff / 60000) + '分钟前';\n\t}\n\t// 小于24小时\n\tif (diff < 86400000) {\n\t\treturn Math.floor(diff / 3600000) + '小时前';\n\t}\n\t// 小于30天\n\tif (diff < 2592000000) {\n\t\treturn Math.floor(diff / 86400000) + '天前';\n\t}\n\t// 其他情况显示具体日期\n\tconst date = new Date(timestamp);\n\tconst month = date.getMonth() + 1;\n\tconst day = date.getDate();\n\treturn `${month}月${day}日`;\n};\n</script>\n\n<style lang=\"scss\">\n.lottery-container {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tpadding: 40rpx 30rpx;\n\tbackground-color: #FF5500; // 更强烈的橙红色背景\n\tposition: relative;\n\tborder-radius: 20rpx;\n\tmin-height: auto; // 改为auto使其自适应内容高度\n\theight: auto; // 确保高度能够自适应\n\toverflow: hidden; // 防止内容溢出\n\ttransition: height 0.3s ease; // 添加高度变化的过渡效果\n}\n\n.lottery-header {\n\twidth: 100%;\n\ttext-align: center;\n\tmargin-bottom: 40rpx;\n\tdisplay: contents;\n\t\n}\n\n.lottery-title {\n\tfont-size: 56rpx;\n\tfont-weight: bold;\n\tcolor: #FFFFFF;\n\ttext-shadow: 0 2rpx 6rpx rgba(0, 0, 0, 0.2);\n\tmargin-bottom: 10rpx;\n}\n\n.lottery-subtitle {\n\tbackground-color: #FFFFFF;\n\tborder-radius: 30rpx;\n\tpadding: 10rpx 30rpx;\n\tdisplay: inline-block;\n\tmargin-top: 10rpx;\n\tmargin-bottom: 20rpx;\n\ttext {\n\t\tfont-size: 28rpx;\n\t\tcolor: #FF5500;\n\t\tfont-weight: 500;\n\t}\n}\n\n\n\n// 添加响应式布局支持\n@media screen and (max-width: 375px) {\n\t.lottery-grid {\n\t\tgrid-template-columns: repeat(4, 1fr); // 小屏幕设备每行4个\n\t}\n}\n\n@media screen and (min-width: 768px) {\n\t.lottery-grid {\n\t\tmax-width: 650rpx; // 在大屏幕上限制最大宽度\n\t\tmargin: 0 auto;\n\t}\n}\n\n.lottery-grid {\n\twidth: 100%;\n\tbackground-color: #FFFFFF;\n\tborder-radius: 20rpx;\n\tdisplay: grid;\n\tgrid-template-columns: repeat(5, 1fr); // 每行5个头像，最多支持5*5=25个用户\n\tgap: 15rpx;\n\tpadding: 20rpx;\n\tposition: relative;\n\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\n\tmax-height: 700rpx; // 设置最大高度\n\toverflow-y: auto; // 超出部分可滚动\n}\n\n.prize-cell {\n\tbackground-color: #FFFFFF;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: relative;\n\toverflow: hidden;\n\ttransition: all 0.15s ease;\n\tpadding: 5rpx;\n\tborder-radius: 8rpx;\n\t\n\t&.active {\n\t\ttransform: scale(1.1);\n\t\tz-index: 5;\n\t\tbackground-color: #FFD700; // 添加黄色背景\n\t\tbox-shadow: 0 0 10rpx rgba(255, 215, 0, 0.5);\n\t\t\n\t\t.prize-avatar {\n\t\t\tborder: 2rpx solid #FF5500;\n\t\t\ttransform: scale(1.1);\n\t\t}\n\t\t\n\t\t.prize-name {\n\t\t\tcolor: #FF5500;\n\t\t\tfont-weight: bold;\n\t\t}\n\t}\n}\n\n.prize-content {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\twidth: 100%;\n}\n\n.prize-avatar {\n\twidth: 80rpx;\n\theight: 80rpx;\n\tborder-radius: 50%;\n\tmargin-bottom: 8rpx;\n\tbackground-color: #f5f5f5;\n}\n\n.prize-name {\n\tfont-size: 20rpx;\n\tcolor: #333333;\n\ttext-align: center;\n\twidth: 90rpx;\n\tline-height: 1.2;\n\ttransform: scale(0.9);\n\ttransform-origin: center top;\n\tmargin: 0 auto;\n\t\n\t&.active {\n\t\ttransform: scale(0.9);\n\t\tcolor: #FF5500;\n\t\tfont-weight: bold;\n\t}\n}\n\n.lottery-btn {\n\tmargin-top: 60rpx;\n\tbackground-color: #FFD700; // 更亮的按钮\n\tcolor: #FF3300;\n\tpadding: 20rpx 60rpx;\n\tborder-radius: 40rpx;\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tbox-shadow: 0 6rpx 20rpx rgba(255, 215, 0, 0.5);\n\t\n\t&:active {\n\t\ttransform: scale(0.98);\n\t}\n}\n\n.result-popup {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground-color: rgba(0, 0, 0, 0.6);\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tz-index: 100;\n}\n\n.result-content {\n\twidth: 580rpx;\n\tbackground-color: #FFFFFF;\n\tborder-radius: 20rpx;\n\tpadding: 40rpx 30rpx;\n\ttext-align: center;\n\tbox-shadow: 0 10rpx 30rpx rgba(0, 0, 0, 0.2);\n}\n\n.result-header {\n\tfont-size: 40rpx;\n\tfont-weight: bold;\n\tmargin-bottom: 30rpx;\n\tcolor: #FF3300;\n\ttext-shadow: 0 1rpx 2rpx rgba(255, 51, 0, 0.2);\n}\n\n.result-prize {\n\tfont-size: 48rpx;\n\tcolor: #FF3300;\n\tfont-weight: bold;\n\tmargin-bottom: 30rpx;\n\tbackground-color: #FFFAF0;\n\tpadding: 20rpx;\n\tborder-radius: 15rpx;\n\tbox-shadow: 0 2rpx 6rpx rgba(255, 51, 0, 0.15);\n\t\n\t.prize-text {\n\t\tfont-size: 48rpx;\n\t\tmargin-bottom: 10rpx;\n\t}\n\t\n\t.prize-time {\n\t\tfont-size: 24rpx;\n\t\tcolor: #999;\n\t\tmargin-top: 10rpx;\n\t}\n}\n\n.result-empty {\n\tcolor: #999999;\n}\n\n/* 幸运用户列表样式 */\n.lucky-users {\n\tmargin-bottom: 30rpx;\n\tpadding: 20rpx;\n\tbackground-color: #FFF4E8;\n\tborder-radius: 15rpx;\n\tborder: 2rpx dashed #FF5500;\n\t\n\t.prize-time {\n\t\tfont-size: 24rpx;\n\t\tcolor: #999;\n\t\tmargin: 10rpx 0 20rpx;\n\t\ttext-align: center;\n\t}\n}\n\n.lucky-users-title {\n\tfont-size: 32rpx;\n\tcolor: #FF3300;\n\tmargin-bottom: 20rpx;\n\tfont-weight: bold;\n\ttext-align: center;\n}\n\n.lucky-user-item {\n\tdisplay: flex;\n\talign-items: flex-start;\n\tpadding: 15rpx;\n\tmargin-bottom: 15rpx;\n\tbackground-color: #FFFFFF;\n\tborder-radius: 12rpx;\n\tbox-shadow: 0 4rpx 8rpx rgba(255, 85, 0, 0.1);\n\ttext-align: left;\n}\n\n.lucky-user-avatar {\n\twidth: 80rpx;\n\theight: 80rpx;\n\tborder-radius: 50%;\n\tmargin-right: 15rpx;\n\tbackground-color: #EEEEEE;\n\tflex-shrink: 0;\n\tborder: 2rpx solid #FFD700;\n}\n\n.lucky-user-info {\n\tflex: 1;\n\tdisplay: flex;\n\tflex-direction: column;\n\toverflow: hidden;\n\tjustify-content: center;\n}\n\n.name-time-container {\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-bottom: 8rpx;\n}\n\n.lucky-user-name {\n\tfont-size: 30rpx;\n\tcolor: #333333;\n}\n\n.time {\n\tfont-size: 22rpx;\n\tcolor: #999;\n\tmargin-left: 10rpx;\n\tvertical-align: baseline;\n}\n\n.comment-text {\n\tfont-size: 28rpx;\n\tcolor: #666666;\n}\n\n.content-wrapper {\n\tline-height: 1.5;\n\tdisplay: block;\n\t\n\t.content {\n\t\tfont-size: 28rpx;\n\t\tcolor: #666666;\n\t}\n}\n\n.content-time-wrapper {\n\tmargin-top: 4rpx;\n\tline-height: 1.5;\n\tdisplay: block;\n\t\n\t.content {\n\t\tfont-size: 28rpx;\n\t\tcolor: #666666;\n\t}\n}\n\n.lucky-user-comment {\n\tfont-size: 26rpx;\n\tcolor: #666666;\n\tline-height: 1.4;\n\tword-break: break-all;\n\tdisplay: -webkit-box;\n\t-webkit-line-clamp: 2;\n\t-webkit-box-orient: vertical;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n\n.result-btn {\n\tbackground-color: #FF3300; // 更鲜艳的按钮\n\tcolor: #FFFFFF;\n\tpadding: 15rpx 0;\n\tborder-radius: 40rpx;\n\tfont-size: 32rpx;\n\tborder: none;\n\twidth: 80%;\n\tmargin: 0 auto;\n}\n\n.result-remaining-times {\n\tmargin-top: 25rpx;\n\tfont-size: 26rpx;\n\tcolor: #FF5500;\n\tfont-weight: 500;\n}\n</style>\n","import Component from 'E:/dy2/components/articleDetail-choujia/articleDetail-choujia.vue'\ntt.createComponent(Component)"],"names":["reactive","ref","computed","watch","onMounted","uni","uniCloud","Component"],"mappings":"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"}