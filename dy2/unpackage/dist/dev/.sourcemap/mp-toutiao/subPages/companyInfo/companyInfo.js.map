{"version":3,"file":"companyInfo.js","sources":["subPages/companyInfo/companyInfo.vue","D:/代码测试/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c3ViUGFnZXNcY29tcGFueUluZm9cY29tcGFueUluZm8udnVl"],"sourcesContent":["<script setup>\n\timport { ref, onMounted } from 'vue'\n\n\t// 公司信息\n\tconst companyInfo = ref({\n\t\tname: '', // 公司名称\n\t\tslogan: '', // 公司口号\n\t\taddress: '', // 公司地址\n\t\tphone: '', // 联系电话\n\t\temail: '', // 电子邮箱\n\t\tworkTime: '' // 工作时间\n\t})\n\n\t// 加载状态\n\tconst loading = ref(true)\n\t// 保存状态\n\tconst saving = ref(false)\n\n\t// 获取公司信息\n\tconst getCompanyInfo = async () => {\n\t\ttry {\n\t\t\tconst companyApi = uniCloud.importObject('company', { customUI: true })\n\t\t\tconst res = await companyApi.getInfo()\n\t\t\tif (res.success) {\n\t\t\t\tcompanyInfo.value = res.data || companyInfo.value\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: err.message || '加载失败',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t} finally {\n\t\t\tloading.value = false\n\t\t}\n\t}\n\n\t// 保存公司信息\n\tconst saveCompanyInfo = async () => {\n\t\t// 表单验证\n\t\tif (!companyInfo.value.name.trim()) {\n\t\t\treturn uni.showToast({\n\t\t\t\ttitle: '请输入公司名称',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t}\n\n\t\t// 验证电话格式\n\t\tif (companyInfo.value.phone && !/^1[3-9]\\d{9}$/.test(companyInfo.value.phone)) {\n\t\t\treturn uni.showToast({\n\t\t\t\ttitle: '请输入正确的手机号码',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t}\n\n\t\t// 验证邮箱格式\n\t\tif (companyInfo.value.email && !/^[\\w-]+(\\.[\\w-]+)*@[\\w-]+(\\.[\\w-]+)+$/.test(companyInfo.value.email)) {\n\t\t\treturn uni.showToast({\n\t\t\t\ttitle: '请输入正确的邮箱地址',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t}\n\n\t\ttry {\n\t\t\tsaving.value = true\n\t\t\tconst companyApi = uniCloud.importObject('company', { customUI: true })\n\t\t\tconst res = await companyApi.updateInfo(companyInfo.value)\n\t\t\t\n\t\t\tif (res.success) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '保存成功',\n\t\t\t\t\ticon: 'success'\n\t\t\t\t})\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: err.message || '保存失败',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t} finally {\n\t\t\tsaving.value = false\n\t\t}\n\t}\n\n\t// 生命周期\n\tonMounted(() => {\n\t\tgetCompanyInfo()\n\t})\n</script>\n\n<template>\n\t<view class=\"company-info\">\n\t\t<up-loading-page :loading=\"loading\"></up-loading-page>\n\n\t\t<view class=\"info-form\" v-if=\"!loading\">\n\t\t\t<!-- 公司名称 -->\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<text class=\"label\">公司名称</text>\n\t\t\t\t<input class=\"input\" v-model=\"companyInfo.name\" placeholder=\"请输入公司名称\" />\n\t\t\t</view>\n\n\t\t\t<!-- 公司口号 -->\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<text class=\"label\">公司口号</text>\n\t\t\t\t<input class=\"input\" v-model=\"companyInfo.slogan\" placeholder=\"请输入公司口号\" />\n\t\t\t</view>\n\n\t\t\t<!-- 公司地址 -->\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<text class=\"label\">公司地址</text>\n\t\t\t\t<input class=\"input\" v-model=\"companyInfo.address\" placeholder=\"请输入公司地址\" />\n\t\t\t</view>\n\n\t\t\t<!-- 联系电话 -->\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<text class=\"label\">联系电话</text>\n\t\t\t\t<input class=\"input\" v-model=\"companyInfo.phone\" placeholder=\"请输入联系电话\" type=\"number\" />\n\t\t\t</view>\n\n\t\t\t<!-- 电子邮箱 -->\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<text class=\"label\">电子邮箱</text>\n\t\t\t\t<input class=\"input\" v-model=\"companyInfo.email\" placeholder=\"请输入电子邮箱\" type=\"email\" />\n\t\t\t</view>\n\n\t\t\t<!-- 工作时间 -->\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<text class=\"label\">工作时间</text>\n\t\t\t\t<input class=\"input\" v-model=\"companyInfo.workTime\" placeholder=\"请输入工作时间\" />\n\t\t\t</view>\n\n\t\t\t<!-- 保存按钮 -->\n\t\t\t<button class=\"save-btn\" \n\t\t\t\t:disabled=\"saving\" \n\t\t\t\t:loading=\"saving\"\n\t\t\t\t@click=\"saveCompanyInfo\">\n\t\t\t\t{{ saving ? '保存中...' : '保存' }}\n\t\t\t</button>\n\t\t</view>\n\t</view>\n</template>\n\n<style lang=\"scss\" scoped>\n\t.company-info {\n\t\tmin-height: 100vh;\n\t\tbackground-color: #f5f7fa;\n\t\tpadding: 24rpx;\n\t}\n\n\t.info-form {\n\t\tbackground-color: #fff;\n\t\tborder-radius: 16rpx;\n\t\tpadding: 32rpx;\n\n\t\t.form-item {\n\t\t\tmargin-bottom: 32rpx;\n\n\t\t\t.label {\n\t\t\t\tdisplay: block;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tcolor: $pyq-text-color-body;\n\t\t\t\tmargin-bottom: 16rpx;\n\t\t\t}\n\n\t\t\t.input {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 80rpx;\n\t\t\t\tbackground-color: #f5f7fa;\n\t\t\t\tborder-radius: 8rpx;\n\t\t\t\tpadding: 0 24rpx;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tcolor: $pyq-text-color-body;\n\t\t\t\tbox-sizing: border-box;\n\n\t\t\t\t&::placeholder {\n\t\t\t\t\tcolor: $pyq-text-color-placeholder;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.save-btn {\n\t\t\tmargin-top: 48rpx;\n\t\t\twidth: 100%;\n\t\t\theight: 88rpx;\n\t\t\tbackground-color: $pyq-vi-color;\n\t\t\tcolor: #fff;\n\t\t\tfont-size: 32rpx;\n\t\t\tborder-radius: 44rpx;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tborder: none;\n\n\t\t\t&[disabled] {\n\t\t\t\topacity: 0.6;\n\t\t\t\tcursor: not-allowed;\n\t\t\t}\n\n\t\t\t&:active {\n\t\t\t\topacity: 0.8;\n\t\t\t}\n\t\t}\n\t}\n</style>","import MiniProgramPage from 'E:/dy2/subPages/companyInfo/companyInfo.vue'\ntt.createPage(MiniProgramPage)"],"names":["ref","uniCloud","uni","onMounted"],"mappings":";;;;;;;;;;;;;AAIC,UAAM,cAAcA,cAAAA,IAAI;AAAA,MACvB,MAAM;AAAA;AAAA,MACN,QAAQ;AAAA;AAAA,MACR,SAAS;AAAA;AAAA,MACT,OAAO;AAAA;AAAA,MACP,OAAO;AAAA;AAAA,MACP,UAAU;AAAA;AAAA,IACZ,CAAE;AAGD,UAAM,UAAUA,cAAG,IAAC,IAAI;AAExB,UAAM,SAASA,cAAG,IAAC,KAAK;AAGxB,UAAM,iBAAiB,YAAY;AAClC,UAAI;AACH,cAAM,aAAaC,cAAAA,GAAS,aAAa,WAAW,EAAE,UAAU,MAAM;AACtE,cAAM,MAAM,MAAM,WAAW,QAAS;AACtC,YAAI,IAAI,SAAS;AAChB,sBAAY,QAAQ,IAAI,QAAQ,YAAY;AAAA,QAC5C;AAAA,MACD,SAAQ,KAAK;AACbC,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO,IAAI,WAAW;AAAA,UACtB,MAAM;AAAA,QACV,CAAI;AAAA,MACJ,UAAY;AACT,gBAAQ,QAAQ;AAAA,MAChB;AAAA,IACD;AAGD,UAAM,kBAAkB,YAAY;AAEnC,UAAI,CAAC,YAAY,MAAM,KAAK,KAAI,GAAI;AACnC,eAAOA,cAAAA,MAAI,UAAU;AAAA,UACpB,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AAAA,MACD;AAGD,UAAI,YAAY,MAAM,SAAS,CAAC,gBAAgB,KAAK,YAAY,MAAM,KAAK,GAAG;AAC9E,eAAOA,cAAAA,MAAI,UAAU;AAAA,UACpB,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AAAA,MACD;AAGD,UAAI,YAAY,MAAM,SAAS,CAAC,wCAAwC,KAAK,YAAY,MAAM,KAAK,GAAG;AACtG,eAAOA,cAAAA,MAAI,UAAU;AAAA,UACpB,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AAAA,MACD;AAED,UAAI;AACH,eAAO,QAAQ;AACf,cAAM,aAAaD,cAAAA,GAAS,aAAa,WAAW,EAAE,UAAU,MAAM;AACtE,cAAM,MAAM,MAAM,WAAW,WAAW,YAAY,KAAK;AAEzD,YAAI,IAAI,SAAS;AAChBC,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UACX,CAAK;AAAA,QACD;AAAA,MACD,SAAQ,KAAK;AACbA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO,IAAI,WAAW;AAAA,UACtB,MAAM;AAAA,QACV,CAAI;AAAA,MACJ,UAAY;AACT,eAAO,QAAQ;AAAA,MACf;AAAA,IACD;AAGDC,kBAAAA,UAAU,MAAM;AACf,qBAAgB;AAAA,IAClB,CAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrFF,GAAG,WAAW,eAAe;"}