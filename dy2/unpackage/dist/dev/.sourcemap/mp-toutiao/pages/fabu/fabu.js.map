{"version":3,"file":"fabu.js","sources":["pages/fabu/fabu.vue","D:/代码测试/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZmFidS9mYWJ1LnZ1ZQ"],"sourcesContent":["<script setup>\n\timport { ref, onMounted, nextTick } from 'vue'\n\timport { useUserInfoStore } from '@/store/user.js'\n\n\t// Store & API\n\tconst userStore = useUserInfoStore( )\n\tconst articleApi = uniCloud.importObject( 'articleDy', { customUI: true })\n\tconst extStorageCo = uniCloud.importObject('fabuWx', { customUI: true })\n\t// 页面初始数据\n\tconst articleData = ref( null )\n\tconst categoryList = ref( [ ] )\n\tconst cateIndex = ref( 0 )\n\tconst imageList = ref([])\n\tconst uploadingCount = ref(0)\n\tconst locationInfo = ref( null )\n\tconst content = ref( '' )\n\tconst selectedCategory = ref( null )\n\tconst videoInfo = ref(null)\n\tconst textareaFocus = ref(false)\n\tconst contentTextarea = ref(null)\n\tconst payAmount = ref(0)\n\tconst videoLink = ref('')\n\tconst inputHeight = ref(170)\n\tconst selectionStart = ref(0)\n\tconst selectionEnd = ref(0)\n\n\t// 图标生成相关\n\tconst iconCustomizing = ref(false)\n\tconst textOffsetX = ref(0)  // 文字X轴偏移量\n\tconst textOffsetY = ref(0)  // 文字Y轴偏移量\n\tconst textSize = ref(100)   // 文字大小百分比\n\tconst previewImageUrl = ref('') // 预览图URL\n\n\t// 当前正在编辑的分类\n\tlet currentEditingCategory = null;\n\n\t// 获取位置和分类\n\tconst getLocaAndCate = async ( ) => {\n\t\ttry {\n\t\t\t// 显示加载提示\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '加载中...',\n\t\t\t\tmask: false\n\t\t\t})\n\t\t\t\n\t\t\t// 获取位置信息\n\t\t\tlet locationRes = await uni.getLocation({\n\t\t\t\ttype: 'gcj02'\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.error('获取位置失败:', err)\n\t\t\t\t// 如果获取位置失败，使用默认坐标\n\t\t\t\treturn { longitude: 116.397428, latitude: 39.90923 }\n\t\t\t})\n\t\t\t\n\t\t\t// 调用API获取分类和地址信息\n\t\t\tconst res = await articleApi.addReady(`${locationRes.longitude},${locationRes.latitude}`)\n\t\t\tconsole.log('获取分类和地址信息成功:', res)\n\t\t\t\n\t\t\t// 设置位置信息\n\t\t\tlocationInfo.value = {\n\t\t\t\taddress: res.address || '未知地址',\n\t\t\t\tdistrict: res.district || '未知区域'\n\t\t\t}\n\t\t\t\n\t\t\t// 如果获取到了区域信息，则尝试根据区域创建或获取分类\n\t\t\tif (res.district && res.district !== '未知区域') {\n\t\t\t\ttry {\n\t\t\t\t\t// 调用云函数创建或获取基于区域的分类\n\t\t\t\t\tconst categoryResult = await extStorageCo.processCategoryFromDistrict(res.district)\n\t\t\t\t\tconsole.log('区域分类处理结果:', categoryResult)\n\t\t\t\t\t\n\t\t\t\t\t// 如果成功创建或获取了基于位置的分类，重新获取分类列表\n\t\t\t\t\tif (categoryResult.code === 0 && categoryResult.data) {\n\t\t\t\t\t\t// 重新获取最新的分类列表\n\t\t\t\t\t\tconst updatedCateRes = await articleApi.addReady(`${locationRes.longitude},${locationRes.latitude}`)\n\t\t\t\t\t\tif (updatedCateRes.cateList && updatedCateRes.cateList.length > 0) {\n\t\t\t\t\t\t\tres.cateList = updatedCateRes.cateList\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (categoryError) {\n\t\t\t\t\tconsole.error('处理区域分类失败:', categoryError)\n\t\t\t\t\t// 继续使用原有分类列表，不中断流程\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 设置分类列表 - 只保留当前位置的分类\n\t\t\tif (res.cateList && res.cateList.length > 0) {\n\t\t\t\t// 筛选出当前区域的位置分类\n\t\t\t\tconst locationBasedCategories = res.cateList.filter(cate => \n\t\t\t\t\tcate.is_location_based && cate.location_district === res.district\n\t\t\t\t)\n\t\t\t\t\n\t\t\t\t// 如果有本地区分类，则只显示它们\n\t\t\t\tif (locationBasedCategories.length > 0) {\n\t\t\t\t\tcategoryList.value = locationBasedCategories.map(cate => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...cate,\n\t\t\t\t\t\t\ticon: cate.cate_img || getDefaultCategoryIcon(cate.cate_name)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\t// 选择第一个位置分类\n\t\t\t\t\tselectedCategory.value = categoryList.value[0]._id\n\t\t\t\t\tcateIndex.value = 0\n\t\t\t\t\t\n\t\t\t\t\t// 自动为位置分类生成图标（如果需要）\n\t\t\t\t\tconst firstCategory = categoryList.value[0]\n\t\t\t\t\tif (!firstCategory.cate_img || firstCategory.cate_img.includes('default')) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconsole.log('为位置分类自动生成图标:', firstCategory.cate_name)\n\t\t\t\t\t\t\tconst iconResult = await generateCategoryIcon(firstCategory.cate_name, firstCategory._id)\n\t\t\t\t\t\t\tif (iconResult && iconResult.iconURL) {\n\t\t\t\t\t\t\t\t// 更新UI中的图标\n\t\t\t\t\t\t\t\tfirstCategory.icon = iconResult.iconURL\n\t\t\t\t\t\t\t\t// 确保分类列表中的图标也被更新\n\t\t\t\t\t\t\t\tcategoryList.value[0].icon = iconResult.iconURL\n\t\t\t\t\t\t\t\tcategoryList.value[0].cate_img = iconResult.iconURL\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (iconError) {\n\t\t\t\t\t\t\tconsole.error('自动生成位置分类图标失败:', iconError)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// 如果没有位置分类，尝试创建一个\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (res.district && res.district !== '未知区域') {\n\t\t\t\t\t\t\t// 创建当前位置的分类\n\t\t\t\t\t\t\tconst createResult = await extStorageCo.createLocationCategory({\n\t\t\t\t\t\t\t\tdistrict: res.district,\n\t\t\t\t\t\t\t\taddress: res.address\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (createResult && createResult.categoryId) {\n\t\t\t\t\t\t\t\t// 创建成功，添加到分类列表\n\t\t\t\t\t\t\t\tconst newCategory = {\n\t\t\t\t\t\t\t\t\t_id: createResult.categoryId,\n\t\t\t\t\t\t\t\t\tcate_name: res.district,\n\t\t\t\t\t\t\t\t\tis_location_based: true,\n\t\t\t\t\t\t\t\t\tlocation_district: res.district,\n\t\t\t\t\t\t\t\t\ticon: getDefaultCategoryIcon(res.district)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tcategoryList.value = [newCategory]\n\t\t\t\t\t\t\t\tselectedCategory.value = newCategory._id\n\t\t\t\t\t\t\t\tcateIndex.value = 0\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 为新分类生成图标\n\t\t\t\t\t\t\t\thandleGenerateIcon(newCategory)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 创建失败，使用默认分类\n\t\t\t\t\t\t\t\tsetDefaultCategory()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// 没有位置信息，使用默认分类\n\t\t\t\t\t\t\tsetDefaultCategory()\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error('创建位置分类失败:', e)\n\t\t\t\t\t\tsetDefaultCategory()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn('未获取到分类列表或分类列表为空')\n\t\t\t\tsetDefaultCategory()\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('获取位置和分类失败:', error)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '获取分类失败，请重试',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t\t\n\t\t\t// 设置默认值\n\t\t\tlocationInfo.value = {\n\t\t\t\taddress: '未知地址',\n\t\t\t\tdistrict: '未知区域'\n\t\t\t}\n\t\t\tsetDefaultCategory()\n\t\t} finally {\n\t\t\tuni.hideLoading()\n\t\t}\n\t}\n\t\n\t// 设置默认分类的辅助函数\n\tconst setDefaultCategory = () => {\n\t\tcategoryList.value = [{ \n\t\t\t_id: 'default', \n\t\t\tcate_name: '默认分类',\n\t\t\ticon: '/static/images/category/default.png'\n\t\t}]\n\t\tselectedCategory.value = 'default'\n\t\tcateIndex.value = 0\n\t}\n\n\t// 根据分类名称获取默认图标\n\tconst getDefaultCategoryIcon = (cateName) => {\n\t\t// 定义常见分类的默认图标映射\n\t\tconst iconMap = {\n\t\t\t'宠物用品': '/static/images/category/pet.png',\n\t\t\t'水杯餐具': '/static/images/category/tableware.png',\n\t\t\t'日用百货': '/static/images/category/daily.png',\n\t\t\t'清洁工具': '/static/images/category/cleaning.png',\n\t\t\t'收纳整理': '/static/images/category/storage.png',\n\t\t\t'文具教具': '/static/images/category/stationery.png',\n\t\t\t'畜牧农资': '/static/images/category/agriculture.png',\n\t\t\t'纸品湿巾': '/static/images/category/tissue.png',\n\t\t\t'个人护理': '/static/images/category/personal.png',\n\t\t\t'厨房烹饪': '/static/images/category/kitchen.png',\n\t\t\t'节庆礼品': '/static/images/category/gift.png',\n\t\t\t'图书乐器': '/static/images/category/book.png',\n\t\t\t'家庭清洁': '/static/images/category/home.png',\n\t\t\t'花卉园艺': '/static/images/category/garden.png',\n\t\t\t'锅具水壶': '/static/images/category/pot.png'\n\t\t}\n\t\t\n\t\t// 返回对应的图标，如果没有匹配项则返回默认图标\n\t\treturn iconMap[cateName] || '/static/images/default.png' // 使用schema中定义的默认图片路径\n\t}\n\n\t// 修改图片选择和上传方法\n\tconst chooseAndUploadImage = async () => {\n\t\ttry {\n\t\t\t// 移除图片数量限制检查\n\t\t\t// 选择图片，设置 sizeType 只包含 original 来选择原图\n\t\t\tconst chooseRes = await uni.chooseImage({\n\t\t\t\tcount: 9, // 保留此参数但不再做前置检查\n\t\t\t\tsizeType: ['original'], // 只使用原图\n\t\t\t\tsourceType: ['album', 'camera'],\n\t\t\t\tmediaType: ['image'] // 只选择图片，隐藏视频\n\t\t\t})\n\n\t\t\t// 上传所有选中的图片\n\t\t\tconst uploadPromises = chooseRes.tempFilePaths.map(async (filePath, index) => {\n\t\t\t\t// 创建临时图片对象并添加到预览列表\n\t\t\t\tconst newIndex = imageList.value.length\n\t\t\t\timageList.value.push({\n\t\t\t\t\tfileURL: '',\n\t\t\t\t\tthumbnailURL: filePath,\n\t\t\t\t\tprogress: 0\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\t// 获取上传配置\n\t\t\t\t\tconst uploadOptions = await extStorageCo.getUploadFileOptions({\n\t\t\t\t\t\tcloudPath: `images/${userStore.userInfo.uid}/${Date.now()}-${newIndex}.jpg`,\n\t\t\t\t\t\tfileType: 'image',\n\t\t\t\t\t\tisOriginal: true\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\t// 创建备用进度定时器（如果onProgressUpdate不工作）\n\t\t\t\t\tlet fallbackTimer = null;\n\t\t\t\t\tlet fallbackActive = true;\n\t\t\t\t\t\n\t\t\t\t\t// 启动备用进度动画 - 仅当实际进度回调未工作时使用\n\t\t\t\t\tfallbackTimer = setTimeout(function setupFallback() {\n\t\t\t\t\t\tif (!fallbackActive) return;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 获取当前进度\n\t\t\t\t\t\tconst currentProgress = imageList.value[newIndex]?.progress || 0;\n\t\t\t\t\t\tif (currentProgress >= 98) {\n\t\t\t\t\t\t\tfallbackActive = false;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 计算下一个进度值 - 缓慢上升，避免超过实际进度过多\n\t\t\t\t\t\tlet nextProgress;\n\t\t\t\t\t\tif (currentProgress < 30) {\n\t\t\t\t\t\t\tnextProgress = currentProgress + 5;\n\t\t\t\t\t\t} else if (currentProgress < 70) {\n\t\t\t\t\t\t\tnextProgress = currentProgress + 3;\n\t\t\t\t\t\t} else if (currentProgress < 90) {\n\t\t\t\t\t\t\tnextProgress = currentProgress + 1;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnextProgress = currentProgress + 0.5;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 更新进度，最大98%\n\t\t\t\t\t\timageList.value[newIndex].progress = Math.min(98, nextProgress);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 继续下一个更新\n\t\t\t\t\t\tfallbackTimer = setTimeout(setupFallback, 800);\n\t\t\t\t\t}, 500);\n\t\t\t\t\t\n\t\t\t\t\t// 执行上传\n\t\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\t\tconst uploadTask = uni.uploadFile({\n\t\t\t\t\t\t\t...uploadOptions.uploadFileOptions,\n\t\t\t\t\t\t\tfilePath: filePath,\n\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\t// 取消备用定时器\n\t\t\t\t\t\t\t\tfallbackActive = false;\n\t\t\t\t\t\t\t\tclearTimeout(fallbackTimer);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 更新上传成功后的文件信息\n\t\t\t\t\t\t\t\timageList.value[newIndex].progress = 100;\n\t\t\t\t\t\t\t\timageList.value[newIndex].fileURL = uploadOptions.fileURL;\n\t\t\t\t\t\t\t\timageList.value[newIndex].compressedURL = uploadOptions.compressedURL;\n\t\t\t\t\t\t\t\timageList.value[newIndex].thumbnailURL = uploadOptions.thumbnailURL;\n\t\t\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\t\t// 取消备用定时器\n\t\t\t\t\t\t\t\tfallbackActive = false;\n\t\t\t\t\t\t\t\tclearTimeout(fallbackTimer);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tconsole.error(\"上传失败\", err);\n\t\t\t\t\t\t\t\timageList.value.splice(newIndex, 1);\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 尝试使用实际上传进度更新（如果平台支持）\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tuploadTask.onProgressUpdate((res) => {\n\t\t\t\t\t\t\t\tif (res && typeof res.progress === 'number') {\n\t\t\t\t\t\t\t\t\t// 收到实际进度，停用备用进度\n\t\t\t\t\t\t\t\t\tfallbackActive = false;\n\t\t\t\t\t\t\t\t\tclearTimeout(fallbackTimer);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 更新实际进度，最大99%（保留1%给服务器处理阶段）\n\t\t\t\t\t\t\t\t\tconst actualProgress = Math.min(99, res.progress);\n\t\t\t\t\t\t\t\t\timageList.value[newIndex].progress = actualProgress;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} catch (progressErr) {\n\t\t\t\t\t\t\tconsole.log('进度更新回调不可用，使用备用进度显示', progressErr);\n\t\t\t\t\t\t\t// 继续使用备用进度定时器\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// 处理单个图片上传错误\n\t\t\t\t\timageList.value.splice(newIndex, 1);\n\t\t\t\t\tconsole.error('上传图片错误:', err);\n\t\t\t\t\treturn Promise.reject(err);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t// 等待所有上传完成\n\t\t\tawait Promise.all(uploadPromises);\n\t\t} catch (err) {\n\t\t\t// 仅在出错时显示提示\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '上传失败',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t\tconsole.error('图片上传过程错误:', err);\n\t\t}\n\t}\n\n\t// 删除图片方法\n\tconst deleteImage = (index) => {\n\t\timageList.value.splice(index, 1)\n\t}\n\n\t// 修改视频选择方法，改为填写链接\n\tconst validateVideoLink = () => {\n\t\tif (!videoLink.value.trim()) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请输入视频链接',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t\treturn false\n\t\t}\n\t\t\n\t\t// 验证链接长度不超过500个字符\n\t\tif (videoLink.value.trim().length > 5000) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '视频链接过长，请不要超过500个字符',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t\treturn false\n\t\t}\n\t\t\n\t\t// 简单验证链接格式\n\t\tconst urlPattern = /^(https?:\\/\\/)?([\\w-]+\\.)+[\\w-]+(\\/[\\w- ./?%&=]*)?$/;\n\t\tif (!urlPattern.test(videoLink.value.trim())) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请输入有效的视频链接',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t\treturn false\n\t\t}\n\t\t\n\t\treturn true\n\t}\n\n\t// 添加视频链接\n\tconst addVideoLink = () => {\n\t\tif (!validateVideoLink()) return\n\t\t\n\t\t// 如果已有视频，不允许再次添加\n\t\tif (videoInfo.value) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '只能添加一个视频',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\t\n\t\t// 设置视频链接\n\t\tvideoInfo.value = videoLink.value.trim()\n\t\t\n\t\t// 清空输入框\n\t\tvideoLink.value = ''\n\t\t\n\t\tuni.showToast({\n\t\t\ttitle: '视频链接已添加',\n\t\t\ticon: 'success',\n\t\t\tduration: 1500\n\t\t})\n\t}\n\n\t// 添加删除视频的方法\n\tconst deleteVideo = () => {\n\t\tvideoInfo.value = null\n\t}\n\n\t// 修改提交表单方法\n\tconst submitForm = async () => {\n\t\tif (!content.value.trim()) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请输入内容',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\tif (!selectedCategory.value) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请选择分类',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\t// 如果没有分类，尝试重新获取\n\t\t\tif (!categoryList.value.length || categoryList.value[0]._id === 'default') {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '未能获取到分类信息，是否重新获取？',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tretryGetCategories()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tif (!locationInfo.value || !locationInfo.value.address) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '未能获取位置信息',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\tuni.showLoading({\n\t\t\ttitle: '发布中...',\n\t\t\tmask: false\n\t\t})\n\n\t\ttry {\n\t\t\t// 获取所有已上传完成的图片URL\n\t\t\tconst uploadedImages = imageList.value\n\t\t\t\t.filter(img => img.fileURL && img.progress === 100)\n\t\t\t\t.map(img => ({\n\t\t\t\t\turl: img.fileURL,\n\t\t\t\t\tcompressedURL: img.compressedURL,\n\t\t\t\t\tthumbnailURL: img.thumbnailURL\n\t\t\t\t}))\n\n\t\t\t// 直接使用videoURL字段\n\t\t\tconst videoURL = videoInfo.value || null\n\t\t\t\n\t\t\t// 获取选中的分类信息\n\t\t\tconst selectedCategoryInfo = categoryList.value.find(cate => cate._id === selectedCategory.value) || null\n\t\t\t// 检查是否是基于位置的分类\n\t\t\tconst isLocationBasedCategory = selectedCategoryInfo && selectedCategoryInfo.is_location_based === true\n\n\t\t\tconst params = {\n\t\t\t\tuser_id: userStore.userInfo.uid,\n\t\t\t\tcontent: content.value.trim(),\n\t\t\t\timages: uploadedImages,\n\t\t\t\tvideoURL: videoURL,\n\t\t\t\tcate_id: selectedCategory.value,\n\t\t\t\taddress: locationInfo.value.address || '未知地址',\n\t\t\t\tdistrict: locationInfo.value.district || '未知区域',\n\t\t\t\tuser_nickName: userStore.userInfo.nickName,\n\t\t\t\tuser_avatarUrl: userStore.userInfo.avatarUrl,\n\t\t\t\tuser_mobile: userStore.userInfo.mobile,\n\t\t\t\tpay_amount: payAmount.value || 0, // 确保即使没有选择支付金额也能发布，默认为0\n\t\t\t\tis_location_based_category: isLocationBasedCategory, // 添加标识，指示是否使用位置分类\n\t\t\t\tcategory_info: selectedCategoryInfo ? {\n\t\t\t\t\tname: selectedCategoryInfo.cate_name,\n\t\t\t\t\tis_location_based: selectedCategoryInfo.is_location_based || false,\n\t\t\t\t\tlocation_district: selectedCategoryInfo.location_district || null,\n\t\t\t\t\ticon: selectedCategoryInfo.icon || null,\n\t\t\t\t\tcate_img: selectedCategoryInfo.cate_img || selectedCategoryInfo.icon || null\n\t\t\t\t} : null // 添加更多分类相关信息，包括图标URL\n\t\t\t}\n\n\t\t\t// 修改发布数据的打印部分\n\t\t\tconsole.log('发布数据:', {\n\t\t\t\t基础信息: {\n\t\t\t\t\t用户ID: params.user_id,\n\t\t\t\t\t文章内容: params.content,\n\t\t\t\t\t分类ID: params.cate_id,\n\t\t\t\t\t分类信息: params.category_info,\n\t\t\t\t\t是否位置分类: params.is_location_based_category\n\t\t\t\t},\n\t\t\t\t用户信息: {\n\t\t\t\t\t昵称: params.user_nickName,\n\t\t\t\t\t头像: params.user_avatarUrl,\n\t\t\t\t\t手机: params.user_mobile\n\t\t\t\t},\n\t\t\t\t位置信息: {\n\t\t\t\t\t完整地址: params.address,\n\t\t\t\t\t所在区域: params.district\n\t\t\t\t},\n\t\t\t\t图片信息: params.images.map((img, index) => ({\n\t\t\t\t\t序号: index + 1,\n\t\t\t\t\t原图URL: img.url,\n\t\t\t\t\t压缩图URL: img.compressedURL,\n\t\t\t\t\t缩略图URL: img.thumbnailURL\n\t\t\t\t})),\n\t\t\t\t视频信息: params.videoURL ? params.videoURL : '无视频'\n\t\t\t})\n\n\t\t\tconst res = await articleApi.addArticle(params)\n\t\t\tif (res.id) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '发布成功',\n\t\t\t\t\ticon: 'success'\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t// 添加延迟，确保事件被处理\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '发布成功',\n\t\t\t\t\ticon: 'success',\n\t\t\t\t\tduration: 1500,\n\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\t\t\tdelta: 1,\n\t\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\t\tuni.$emit('globalRefresh', { \n\t\t\t\t\t\t\t\t\t\ttimestamp: Date.now(),\n\t\t\t\t\t\t\t\t\t\tpages: ['index', 'userArticleList']\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tconsole.log('触发全局刷新事件');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tthrow new Error(res.message || '发布失败')\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error('发布失败:', err)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: err.message || '发布失败，请重试',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t} finally {\n\t\t\tuni.hideLoading()\n\t\t}\n\t}\n\n\t// 选择分类\n\tconst bindPickerChange = ( e ) => {\n\t\tconsole.log( e, '分类' )\n\t\tcateIndex.value = e.detail.value\n\t\tselectedCategory.value = categoryList.value[ e.detail.value ]._id\n\t}\n\n\t// 直接选择分类\n\tconst selectCategory = (index) => {\n\t\tcateIndex.value = index\n\t\tselectedCategory.value = categoryList.value[index]._id\n\t\tconsole.log('选择分类:', categoryList.value[index].cate_name)\n\t}\n\n\t// 使用 uni-app API 控制键盘\n\tconst focusTextarea = () => {\n\t\t// 使用 uni.hideKeyboard 和 uni.showKeyboard 来控制键盘\n\t\tuni.hideKeyboard()\n\t\t\n\t\tsetTimeout(() => {\n\t\t\t// 延迟显示键盘，避免闪烁\n\t\t\ttextareaFocus.value = true\n\t\t\t\n\t\t\t// 如果平台支持，可以直接调用 showKeyboard\n\t\t\t// uni.showKeyboard()\n\t\t}, 50)\n\t}\n\n\t// 选择支付金额\n\tconst onSelectPayAmount = (e) => {\n\t\tpayAmount.value = e.target.dataset.amount\n\t}\n\n\t// 生成分类图标\n\tconst handleGenerateIcon = async (category) => {\n\t\ttry {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '生成图标中...',\n\t\t\t\tmask: false\n\t\t\t})\n\t\t\t\n\t\t\t// 生成临时图标\n\t\t\tconst tempResult = await generateTempCategoryIcon(category.cate_name)\n\t\t\tif (tempResult && tempResult.tempFilePath) {\n\t\t\t\t// 直接上传和保存图标，跳过自定义调整面板\n\t\t\t\tcurrentEditingCategory = category\n\t\t\t\tpreviewImageUrl.value = tempResult.tempFilePath\n\t\t\t\t\n\t\t\t\t// 直接保存图标\n\t\t\t\tawait saveCustomIcon()\n\t\t\t} else {\n\t\t\t\tthrow new Error('生成临时图标失败')\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('生成图标失败:', error)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '生成图标失败',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t} finally {\n\t\t\tuni.hideLoading()\n\t\t}\n\t}\n\t\n\t// 生成临时预览图标\n\tconst generateTempCategoryIcon = async (categoryName) => {\n\t\ttry {\n\t\t\t// 显示加载中提示\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '生成预览中...',\n\t\t\t\tmask: false\n\t\t\t})\n\t\t\t\n\t\t\t// 1. 根据分类名称生成背景色和前景色（保持原有代码）\n\t\t\tconst getColorFromName = (name) => {\n\t\t\t\t// 简单哈希算法生成颜色\n\t\t\t\tlet hash = 0;\n\t\t\t\tfor (let i = 0; i < name.length; i++) {\n\t\t\t\t\thash = name.charCodeAt(i) + ((hash << 5) - hash);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 生成柔和的背景色 - 使用HSL颜色模型，保持较高亮度和低饱和度\n\t\t\t\tconst h = Math.abs(hash) % 360; // 色相\n\t\t\t\tconst s = 40 + (Math.abs(hash) % 30); // 饱和度 40-70%\n\t\t\t\tconst l = 75 + (Math.abs(hash) % 15); // 亮度 75-90%\n\t\t\t\t\n\t\t\t\t// 前景色 - 根据背景色明暗程度选择黑或白文本\n\t\t\t\tconst foregroundColor = l > 65 ? '#333333' : '#FFFFFF';\n\t\t\t\t\n\t\t\t\treturn {\n\t\t\t\t\tbackground: `hsl(${h}, ${s}%, ${l}%)`,\n\t\t\t\t\tforeground: foregroundColor\n\t\t\t\t};\n\t\t\t}\n\t\t\t\n\t\t\t// 2. 创建Canvas绘制图标\n\t\t\tconst colors = getColorFromName(categoryName);\n\t\t\tconst canvasSize = 200; // 画布大小\n\t\t\tconst iconSize = canvasSize;\n\t\t\t\n\t\t\t// 创建离屏Canvas (App和小程序)\n\t\t\tconst canvas = uni.createOffscreenCanvas({\n\t\t\t\ttype: '2d',\n\t\t\t\twidth: iconSize, \n\t\t\t\theight: iconSize\n\t\t\t})\n\t\t\tconst ctx = canvas.getContext('2d');\n\t\t\t\n\t\t\t// 绘制背景\n\t\t\tctx.fillStyle = colors.background;\n\t\t\tctx.fillRect(0, 0, iconSize, iconSize);\n\t\t\t\n\t\t\t// 绘制边框\n\t\t\tctx.strokeStyle = 'rgba(0,0,0,0.1)';\n\t\t\tctx.lineWidth = 2;\n\t\t\tctx.strokeRect(2, 2, iconSize-4, iconSize-4);\n\t\t\t\n\t\t\t// 绘制文字 - 应用当前偏移和大小设置\n\t\t\tconst firstChar = categoryName.charAt(0);\n\t\t\tctx.fillStyle = colors.foreground;\n\t\t\tconst fontSize = iconSize/2 * (textSize.value / 100);\n\t\t\tctx.font = `bold ${fontSize}px sans-serif`;\n\t\t\tctx.textAlign = 'center';\n\t\t\tctx.textBaseline = 'middle';\n\t\t\t\n\t\t\t// 应用偏移量，默认位置是中心点(iconSize/2, iconSize/2)\n\t\t\tconst textX = iconSize/2 + (textOffsetX.value * iconSize / 100);\n\t\t\tconst textY = iconSize/2 + (textOffsetY.value * iconSize / 100);\n\t\t\tctx.fillText(firstChar, textX, textY);\n\t\t\t\n\t\t\t// 3. 将Canvas转为临时图片\n\t\t\tconst tempFilePath = await new Promise((resolve, reject) => {\n\t\t\t\t// 导出图片\n\t\t\t\tconst buffer = canvas.toDataURL('image/png')\n\t\t\t\t\n\t\t\t\t// 将Base64转为本地临时文件\n\t\t\t\tconst fs = uni.getFileSystemManager();\n\t\t\t\tconst tempFilePath = `${uni.env.USER_DATA_PATH}/temp_category_icon_${Date.now()}.png`;\n\t\t\t\t\n\t\t\t\t// 保存Base64为临时文件\n\t\t\t\tconst base64Data = buffer.replace(/^data:image\\/\\w+;base64,/, '');\n\t\t\t\tfs.writeFile({\n\t\t\t\t\tfilePath: tempFilePath,\n\t\t\t\t\tdata: base64Data,\n\t\t\t\t\tencoding: 'base64',\n\t\t\t\t\tsuccess: () => resolve(tempFilePath),\n\t\t\t\t\tfail: (err) => reject(new Error(`保存临时文件失败: ${JSON.stringify(err)}`))\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t\tuni.hideLoading();\n\t\t\t\n\t\t\t// 返回临时文件路径和颜色信息\n\t\t\treturn { \n\t\t\t\ttempFilePath,\n\t\t\t\tcolors\n\t\t\t};\n\t\t\t\n\t\t} catch (error) {\n\t\t\tuni.hideLoading();\n\t\t\tconsole.error('生成临时图标失败:', error);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t// 添加重试获取分类的方法\n\tconst retryGetCategories = () => {\n\t\tuni.showToast({\n\t\t\ttitle: '正在重新获取分类...',\n\t\t\ticon: 'loading',\n\t\t\tduration: 2000\n\t\t})\n\t\tsetTimeout(() => {\n\t\t\tgetLocaAndCate()\n\t\t}, 1000)\n\t}\n\n\t// 组件加载时获取位置\n\tonMounted(() => {\n\t\tgetLocaAndCate().catch(err => {\n\t\t\tconsole.error('onMounted获取分类失败:', err)\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '获取分类失败，是否重试？',\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tretryGetCategories()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t})\n\n\t// 添加创建新分类图标的方法\n\tconst createNewCategoryIcon = () => {\n\t\tif (categoryList.value.length === 0) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '没有可用分类',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\t\n\t\t// 如果已选择分类，为该分类生成图标\n\t\tif (categoryList.value[cateIndex.value]) {\n\t\t\thandleGenerateIcon(categoryList.value[cateIndex.value])\n\t\t} else {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请先选择一个分类',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t}\n\t}\n\n\t// 检查URL是否有效图片URL\n\tconst isValidImageUrl = (url) => {\n\t\t// 如果URL为空或为空字符串，不是有效URL\n\t\tif (!url || url.trim() === '') return false;\n\t\t\n\t\t// 检查是否是默认图片\n\t\tif (url.includes('defalut.png')) return false;\n\t\t\n\t\t// 检查是否是本地静态资源路径（非有效的远程URL）\n\t\tif (url.startsWith('/static/')) return false;\n\t\t\n\t\ttry {\n\t\t\t// 尝试解析URL，检查是否有效\n\t\t\tconst parsedUrl = new URL(url);\n\t\t\t// 检查是否是HTTP/HTTPS协议\n\t\t\treturn parsedUrl.protocol === 'http:' || parsedUrl.protocol === 'https:';\n\t\t} catch (e) {\n\t\t\t// 解析失败，不是有效URL\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t// 处理文本框行数变化\n\tconst handleLineChange = (e) => {\n\t\t// 获取当前行数\n\t\tconst lineCount = e.detail.lineCount || 0;\n\t\t\n\t\t// 根据行数动态调整高度，最小高度170rpx\n\t\tinputHeight.value = Math.max(170, lineCount * 40);\n\t\t\n\t\t// 确保视图滚动到合适位置，防止键盘遮挡输入内容\n\t\tadjustScrollPosition();\n\t}\n\t\n\t// 启用光标拖动模式\n\tconst enableCursorDrag = (e) => {\n\t\t// 长按后启用光标拖动模式，通过selectionStart和selectionEnd来控制光标位置\n\t\t// 这个功能在各平台实现可能有所不同\n\t\tconsole.log('启用光标拖动模式');\n\t\t\n\t\ttry {\n\t\t\t// 尝试调用系统的文本选择功能\n\t\t\tif (contentTextarea.value) {\n\t\t\t\t// 保持焦点\n\t\t\t\ttextareaFocus.value = true;\n\t\t\t\t\n\t\t\t\t// 一些平台可能需要特定的API来触发光标拖动\n\t\t\t\t// 以下是一种通用方法\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t// 触发系统光标选择UI\n\t\t\t\t\tuni.showActionSheet({\n\t\t\t\t\t\titemList: ['选择', '全选', '复制', '粘贴'],\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tswitch(res.tapIndex) {\n\t\t\t\t\t\t\t\tcase 0: // 选择\n\t\t\t\t\t\t\t\t\t// 已经在长按时触发了选择模式\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 1: // 全选\n\t\t\t\t\t\t\t\t\tselectionStart.value = 0;\n\t\t\t\t\t\t\t\t\tselectionEnd.value = content.value.length;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 2: // 复制\n\t\t\t\t\t\t\t\t\tuni.setClipboardData({\n\t\t\t\t\t\t\t\t\t\tdata: content.value.substring(selectionStart.value, selectionEnd.value),\n\t\t\t\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: '已复制',\n\t\t\t\t\t\t\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\t\t\t\t\t\t\tduration: 1500\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 3: // 粘贴\n\t\t\t\t\t\t\t\t\tuni.getClipboardData({\n\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\tif (res.data) {\n\t\t\t\t\t\t\t\t\t\t\t\tinsertTextAtCursor(res.data);\n\t\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '已粘贴',\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\t\t\t\t\t\t\t\tduration: 1500\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}, 200);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('启用光标拖动失败:', error);\n\t\t}\n\t}\n\n\t// 更新图标预览\n\tconst updateIconPreview = async () => {\n\t\tif (!currentEditingCategory) return;\n\t\t\n\t\ttry {\n\t\t\tconst tempResult = await generateTempCategoryIcon(currentEditingCategory.cate_name);\n\t\t\tif (tempResult && tempResult.tempFilePath) {\n\t\t\t\tpreviewImageUrl.value = tempResult.tempFilePath;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('更新预览失败:', error);\n\t\t}\n\t}\n\t\n\t// 保存自定义图标\n\tconst saveCustomIcon = async () => {\n\t\tif (!currentEditingCategory || !previewImageUrl.value) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '没有可保存的图标',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\t\n\t\ttry {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '保存中...',\n\t\t\t\tmask: false\n\t\t\t});\n\t\t\t\n\t\t\t// 上传到云存储\n\t\t\tconst uploadResult = await extStorageCo.getUploadFileOptions({\n\t\t\t\tcloudPath: `categories/${currentEditingCategory._id || Date.now()}.png`,\n\t\t\t\tfileType: 'image',\n\t\t\t\tisOriginal: true\n\t\t\t});\n\t\t\t\n\t\t\t// 执行上传\n\t\t\tconst uploadRes = await uni.uploadFile({\n\t\t\t\t...uploadResult.uploadFileOptions,\n\t\t\t\tfilePath: previewImageUrl.value,\n\t\t\t\tname: 'file'\n\t\t\t});\n\t\t\t\n\t\t\tif (uploadRes.statusCode !== 200) {\n\t\t\t\tthrow new Error(`上传失败: ${uploadRes.statusCode}`);\n\t\t\t}\n\t\t\t\n\t\t\t// 获取图片URL\n\t\t\tconst iconURL = uploadResult.fileURL;\n\t\t\tconst thumbnailURL = uploadResult.thumbnailURL;\n\t\t\t\n\t\t\t// 更新数据库中的分类图标URL\n\t\t\tif (currentEditingCategory._id) {\n\t\t\t\ttry {\n\t\t\t\t\t// 尝试调用云函数更新图标\n\t\t\t\t\tconst updateResult = await extStorageCo.updateCategoryIcon({\n\t\t\t\t\t\tcategoryId: currentEditingCategory._id, \n\t\t\t\t\t\ticonURL,\n\t\t\t\t\t\tthumbnailURL\n\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\tconsole.warn('云函数updateCategoryIcon可能未部署或不可用:', err);\n\t\t\t\t\t\treturn { updated: false, error: err.message };\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t// 如果云函数调用成功\n\t\t\t\t\tif (updateResult && updateResult.updated) {\n\t\t\t\t\t\tconsole.log('更新分类图标结果:', updateResult);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 更新本地分类图标\n\t\t\t\t\t\tcurrentEditingCategory.icon = iconURL;\n\t\t\t\t\t\tcurrentEditingCategory.cate_img = iconURL;\n\t\t\t\t\t\tcurrentEditingCategory.cate_img_thumbnail = thumbnailURL;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 关闭自定义面板\n\t\t\t\t\t\ticonCustomizing.value = false;\n\t\t\t\t\t\t\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '图标保存成功',\n\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 云函数未能正确执行，但我们仍然更新本地图标\n\t\t\t\t\t\tconsole.warn('更新分类图标未成功，但图标已生成:', {iconURL, thumbnailURL});\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 更新本地分类图标\n\t\t\t\t\t\tcurrentEditingCategory.icon = iconURL;\n\t\t\t\t\t\tcurrentEditingCategory.cate_img = iconURL;\n\t\t\t\t\t\tcurrentEditingCategory.cate_img_thumbnail = thumbnailURL;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 关闭自定义面板\n\t\t\t\t\t\ticonCustomizing.value = false;\n\t\t\t\t\t\t\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '图标已生成',\n\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} catch (updateError) {\n\t\t\t\t\t// 更新数据库失败，但图标已上传成功\n\t\t\t\t\tconsole.error('更新分类图标数据库记录失败:', updateError);\n\t\t\t\t\t\n\t\t\t\t\t// 更新本地分类图标\n\t\t\t\t\tcurrentEditingCategory.icon = iconURL;\n\t\t\t\t\tcurrentEditingCategory.cate_img = iconURL;\n\t\t\t\t\tcurrentEditingCategory.cate_img_thumbnail = thumbnailURL;\n\t\t\t\t\t\n\t\t\t\t\t// 关闭自定义面板\n\t\t\t\t\ticonCustomizing.value = false;\n\t\t\t\t\t\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '图标已生成，但未更新数据库',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('保存图标失败:', error);\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '保存图标失败',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t} finally {\n\t\t\tuni.hideLoading();\n\t\t}\n\t}\n\t\n\t// 取消自定义\n\tconst cancelCustomize = () => {\n\t\ticonCustomizing.value = false;\n\t\tcurrentEditingCategory = null;\n\t\tpreviewImageUrl.value = '';\n\t}\n\n\t// 调整滚动位置\n\tconst adjustScrollPosition = () => {\n\t\tnextTick(() => {\n\t\t\t// 计算合适的滚动位置\n\t\t\tconst screenHeight = uni.getWindowInfo().windowHeight;\n\t\t\tconst targetPosition = inputHeight.value + 200; // 额外偏移量确保视图在键盘上方\n\t\t\t\n\t\t\tuni.pageScrollTo({\n\t\t\t\tscrollTop: targetPosition,\n\t\t\t\tduration: 100\n\t\t\t});\n\t\t});\n\t}\n\n\t// 插入文本到光标位置\n\tconst insertTextAtCursor = (textToInsert) => {\n\t\tif (!content.value) content.value = '';\n\t\t\n\t\tconst before = content.value.substring(0, selectionStart.value);\n\t\tconst after = content.value.substring(selectionEnd.value);\n\t\t\n\t\t// 更新内容\n\t\tcontent.value = before + textToInsert + after;\n\t\t\n\t\t// 更新光标位置\n\t\tnextTick(() => {\n\t\t\tconst newPosition = selectionStart.value + textToInsert.length;\n\t\t\tselectionStart.value = newPosition;\n\t\t\tselectionEnd.value = newPosition;\n\t\t\t\n\t\t\t// 重新获取焦点\n\t\t\tif (contentTextarea.value) {\n\t\t\t\ttextareaFocus.value = true;\n\t\t\t}\n\t\t});\n\t}\n\t\n\t// 添加一个保存光标位置的处理函数\n\tconst handleSelectionChange = (e) => {\n\t\t// 获取当前选择范围\n\t\tselectionStart.value = e.detail.selectionStart || 0;\n\t\tselectionEnd.value = e.detail.selectionEnd || 0;\n\t}\n</script>\n\n<template>\n\t<view class=\"add\">\n\t\t<!-- 分类选择 -->\n\t\t<view class=\"category\">\n\t\t\t<text class=\"label\">所属分类</text>\n\t\t\t\n\t\t\t<picker @change=\"bindPickerChange\" :range=\"categoryList\" :value=\"cateIndex\"\n\t\t\t\trange-key=\"cate_name\" v-if=\"false\">\n\t\t\t\t<view class=\"picker\">\n\t\t\t\t\t<text>\n\t\t\t\t\t\t{{categoryList[cateIndex]?.cate_name}}\n\t\t\t\t\t</text>\n\t\t\t\t\t<uni-icons type=\"bottom\" size=\"14\" color=\"#999999\"></uni-icons>\n\t\t\t\t</view>\n\t\t\t</picker>\n\t\t\t\n\t\t\t<!-- 添加网格布局的分类选择 -->\n\t\t\t<view class=\"category-grid\">\n\t\t\t\t<!-- 生成图标按钮，仅在当前选择的分类没有缩略图时显示 -->\n\t\t\t\t<view \n\t\t\t\t\tv-if=\"categoryList.length > 0 && categoryList[cateIndex] && !categoryList[cateIndex].cate_img_thumbnail\" \n\t\t\t\t\tclass=\"category-item generate-icon-item\" \n\t\t\t\t\t@click=\"createNewCategoryIcon\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"category-icon\">\n\t\t\t\t\t\t<uni-icons type=\"plus\" size=\"30\" color=\"#2196F3\"></uni-icons>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"category-name-container\">\n\t\t\t\t\t\t<text class=\"category-name\">生成图标</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view \n\t\t\t\t\tv-for=\"(item, index) in categoryList\" \n\t\t\t\t\t:key=\"index\" \n\t\t\t\t\tclass=\"category-item\" \n\t\t\t\t\t:class=\"{ 'active': index === cateIndex, 'location-based': item.is_location_based }\"\n\t\t\t\t\t@click=\"selectCategory(index)\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"category-icon\">\n\t\t\t\t\t\t<!-- 使用分类图标 -->\n\t\t\t\t\t\t<image :src=\"item.icon\" mode=\"aspectFit\" class=\"category-image\"></image>\n\t\t\t\t\t\t<!-- 选中状态指示器 -->\n\t\t\t\t\t\t<view class=\"selected-indicator\" v-if=\"index === cateIndex\">\n\t\t\t\t\t\t\t<uni-icons type=\"checkmarkempty\" size=\"16\" color=\"#fff\"></uni-icons>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"category-name-container\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- 添加位置标记 -->\n\t\t\t\t\t\t<view class=\"location-badge\" v-if=\"item.is_location_based\">\n\t\t\t\t\t\t\t<uni-icons type=\"location\" size=\"12\" color=\"#2196F3\"></uni-icons>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<text class=\"category-name\">{{ item.cate_name }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 添加重试按钮 -->\n\t\t\t<view v-if=\"categoryList.length === 0 || categoryList[0]._id === 'default'\" \n\t\t\t\t  class=\"retry-btn\" @click=\"retryGetCategories\">\n\t\t\t\t<uni-icons type=\"refresh\" size=\"16\" color=\"#ff6600\"></uni-icons>\n\t\t\t\t<text class=\"retry-text\">重试</text>\n\t\t\t</view>\n\t\t\t\n\t\t</view>\n\n\t\t<!-- 简化为纯文本输入区域，移除工具栏和表情面板 -->\n\t\t<view class=\"content-area\" :style=\"{ minHeight: inputHeight + 'rpx' }\" @click=\"focusTextarea\">\n\t\t\t<textarea \n\t\t\t\tv-model=\"content\" \n\t\t\t\tplaceholder=\"分享新鲜事...\" \n\t\t\t\tclass=\"content-input\" \n\t\t\t\tmaxlength=\"2000\"\n\t\t\t\tauto-height\n\t\t\t\tshow-confirm-bar=\"false\"\n\t\t\t\tconfirm-type=\"done\"\n\t\t\t\tcursor-spacing=\"30\"\n\t\t\t\t:focus=\"textareaFocus\"\n\t\t\t\tref=\"contentTextarea\"\n\t\t\t\t@blur=\"textareaFocus = false\"\n\t\t\t\t:fixed=\"false\"\n\t\t\t\t:adjust-position=\"true\"\n\t\t\t\t:show-count=\"true\"\n\t\t\t\t:disable-default-padding=\"false\"\n\t\t\t\t:hold-keyboard=\"true\"\n\t\t\t\t:selection-start=\"selectionStart\"\n\t\t\t\t:selection-end=\"selectionEnd\"\n\t\t\t\t@confirm=\"() => {}\"\n\t\t\t\t@linechange=\"handleLineChange\"\n\t\t\t\t@input=\"handleLineChange\"\n\t\t\t\t@selectionchange=\"handleSelectionChange\"\n\t\t\t\t@longpress=\"enableCursorDrag\"\n\t\t\t/>\n\t\t</view>\n\n\t\t<!-- 修改媒体上传区域 -->\n\t\t<view class=\"media-section\">\n\t\t\t<!-- 图片上传区域 -->\n\t\t\t<view class=\"images\">\n\t\t\t\t\n\t\t\t\t<view class=\"image-list\">\n\t\t\t\t\t<view v-for=\"(image, index) in imageList\" :key=\"index\" class=\"image-item\">\n\t\t\t\t\t\t<image :src=\"image.thumbnailURL\" mode=\"aspectFill\" />\n\t\t\t\t\t\t<view class=\"delete-btn\" @click=\"deleteImage(index)\">\n\t\t\t\t\t\t\t<uni-icons type=\"close\" size=\"20\" color=\"#fff\"></uni-icons>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"progress-overlay\" v-if=\"image.progress < 100\">\n\t\t\t\t\t\t\t<view class=\"progress-text\">{{image.progress.toFixed(0)}}%</view>\n\t\t\t\t\t\t\t<view class=\"progress-bar\">\n\t\t\t\t\t\t\t\t<view class=\"progress\" :style=\"{width: image.progress + '%'}\"></view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"upload-btn\" @click=\"chooseAndUploadImage\">\n\t\t\t\t\t\t<uni-icons type=\"plusempty\" size=\"30\" color=\"#999\"></uni-icons>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<text class=\"tip\">可无限上传图片</text>\n\t\t\t</view>\n\n\t\t\t<!-- 视频链接区域 -->\n\t\t\t<view class=\"video\">\n\t\t\t\t<view v-if=\"videoInfo\" class=\"video-link-preview\">\n\t\t\t\t\t<view class=\"link-container\">\n\t\t\t\t\t\t<text class=\"link-text\">{{videoInfo}}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"delete-btn\" @click=\"deleteVideo\">\n\t\t\t\t\t\t<uni-icons type=\"close\" size=\"20\" color=\"#fff\"></uni-icons>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view v-else class=\"video-link-input\">\n\t\t\t\t\t<view class=\"input-container\">\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\tv-model=\"videoLink\" \n\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\tplaceholder=\"视频链接无需添加https://\" \n\t\t\t\t\t\t\tclass=\"link-input\"\n\t\t\t\t\t\t\tconfirm-type=\"done\"\n\t\t\t\t\t\t\tmaxlength=\"5000\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button class=\"add-link-btn\" @click=\"addVideoLink\">添加</button>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<text class=\"tip\">输入.mp4格式的链接，在详情页显示视频</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 发布按钮 -->\n\t\t<view class=\"publish\">\n\t\t\t<button class=\"publish-btn\" @click=\"submitForm\">发布</button>\n\t\t</view>\n\n\t\t<!-- 图标自定义面板 -->\n\t\t<view class=\"icon-customize-overlay\" v-if=\"iconCustomizing\">\n\t\t\t<view class=\"icon-customize-panel\">\n\t\t\t\t<view class=\"icon-customize-header\">\n\t\t\t\t\t<text class=\"panel-title\">调整图标</text>\n\t\t\t\t\t<view class=\"close-btn\" @click=\"cancelCustomize\">\n\t\t\t\t\t\t<uni-icons type=\"close\" size=\"20\" color=\"#666\"></uni-icons>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"icon-preview\">\n\t\t\t\t\t<image :src=\"previewImageUrl\" mode=\"aspectFit\" class=\"preview-image\"></image>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"customize-controls\">\n\t\t\t\t\t<!-- 文字X轴位置调整 -->\n\t\t\t\t\t<view class=\"control-item\">\n\t\t\t\t\t\t<text class=\"control-label\">水平位置</text>\n\t\t\t\t\t\t<slider \n\t\t\t\t\t\t\t:value=\"textOffsetX + 50\" \n\t\t\t\t\t\t\tmin=\"0\" \n\t\t\t\t\t\t\tmax=\"100\" \n\t\t\t\t\t\t\tshow-value \n\t\t\t\t\t\t\t@change=\"(e) => { textOffsetX = e.detail.value - 50; updateIconPreview(); }\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 文字Y轴位置调整 -->\n\t\t\t\t\t<view class=\"control-item\">\n\t\t\t\t\t\t<text class=\"control-label\">垂直位置</text>\n\t\t\t\t\t\t<slider \n\t\t\t\t\t\t\t:value=\"textOffsetY + 50\" \n\t\t\t\t\t\t\tmin=\"0\" \n\t\t\t\t\t\t\tmax=\"100\" \n\t\t\t\t\t\t\tshow-value \n\t\t\t\t\t\t\t@change=\"(e) => { textOffsetY = e.detail.value - 50; updateIconPreview(); }\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 文字大小调整 -->\n\t\t\t\t\t<view class=\"control-item\">\n\t\t\t\t\t\t<text class=\"control-label\">文字大小</text>\n\t\t\t\t\t\t<slider \n\t\t\t\t\t\t\t:value=\"textSize\" \n\t\t\t\t\t\t\tmin=\"50\" \n\t\t\t\t\t\t\tmax=\"150\" \n\t\t\t\t\t\t\tshow-value \n\t\t\t\t\t\t\t@change=\"(e) => { textSize = e.detail.value; updateIconPreview(); }\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"customize-buttons\">\n\t\t\t\t\t<button class=\"cancel-btn\" @click=\"cancelCustomize\">取消</button>\n\t\t\t\t\t<button class=\"save-btn\" @click=\"saveCustomIcon\">保存</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<style lang=\"scss\" scoped>\n\t.add {\n\t\tmin-height: 100vh;\n\t\tpadding: 20rpx 30rpx;\n\t\tbackground-color: #fff;\n\n\t\t.category {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\n\t\t\t.label {\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tcolor: $pyq-text-color-body;\n\t\t\t\tmargin-bottom: 16rpx;\n\t\t\t}\n\n\t\t\t.picker {\n\t\t\t\tflex: 1;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\tpadding: 16rpx 24rpx;\n\t\t\t\tbackground-color: #f7f7f7;\n\t\t\t\tborder-radius: 3rpx;\n\t\t\t}\n\t\t\t\n\t\t\t/* 分类网格布局样式 */\n\t\t\t.category-grid {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-wrap: wrap;\n\t\t\t\tmargin: 0 -10rpx;\n\t\t\t\tpadding: 10rpx 0;\n\t\t\t}\n\t\t\t\n\t\t\t.category-item {\n\t\t\t\twidth: 20%; /* 每行5个 */\n\t\t\t\tpadding: 10rpx;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\talign-items: center;\n\t\t\t\tmargin-bottom: 20rpx;\n\t\t\t\t\n\t\t\t\t.category-icon {\n\t\t\t\t\twidth: 100rpx;\n\t\t\t\t\theight: 100rpx;\n\t\t\t\t\tbackground-color: #f8f8f8;\n\t\t\t\t\tborder-radius: 20rpx;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tmargin-bottom: 10rpx;\n\t\t\t\t\tborder: 2rpx solid transparent;\n\t\t\t\t\ttransition: all 0.3s;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\n\t\t\t\t\t\n\t\t\t\t\t.category-image {\n\t\t\t\t\t\twidth: 70%;\n\t\t\t\t\t\theight: 70%;\n\t\t\t\t\t\tobject-fit: contain;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.selected-indicator {\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tright: 0;\n\t\t\t\t\t\tbottom: 0;\n\t\t\t\t\t\tbackground-color: $pyq-vi-color;\n\t\t\t\t\t\twidth: 36rpx;\n\t\t\t\t\t\theight: 36rpx;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\tborder-top-left-radius: 12rpx;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.category-name-container {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tflex-wrap: wrap;\n\t\t\t\t\tgap: 4rpx;\n\t\t\t\t\t\n\t\t\t\t\t.category-name {\n\t\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\t\tcolor: #666;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\tline-height: 1.2;\n\t\t\t\t\t\theight: 2.4em;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.location-badge {\n\t\t\t\t\t\tmargin-left: 4rpx;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\t\n\t\t\t\t\t\t.uni-icons {\n\t\t\t\t\t\t\twidth: 16rpx;\n\t\t\t\t\t\t\theight: 16rpx;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t&.active {\n\t\t\t\t\t.category-icon {\n\t\t\t\t\t\tbackground-color: rgba(255, 102, 0, 0.08);\n\t\t\t\t\t\tborder-color: $pyq-vi-color;\n\t\t\t\t\t\tbox-shadow: 0 6rpx 16rpx rgba(255, 102, 0, 0.25);\n\t\t\t\t\t\ttransform: translateY(-4rpx);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.category-name {\n\t\t\t\t\t\tcolor: $pyq-vi-color;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t&.location-based {\n\t\t\t\t\t.category-icon {\n\t\t\t\t\t\tbackground-color: rgba(33, 150, 243, 0.05);\n\t\t\t\t\t\tborder: 2rpx dashed #2196F3;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.category-name {\n\t\t\t\t\t\tcolor: #2196F3;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t&.active {\n\t\t\t\t\t\t.category-icon {\n\t\t\t\t\t\t\tbackground-color: rgba(33, 150, 243, 0.1);\n\t\t\t\t\t\t\tborder: 2rpx solid #2196F3;\n\t\t\t\t\t\t\tbox-shadow: 0 6rpx 16rpx rgba(33, 150, 243, 0.25);\n\t\t\t\t\t\t\ttransform: translateY(-4rpx);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t.category-name {\n\t\t\t\t\t\t\tcolor: #2196F3;\n\t\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t&.generate-icon-item {\n\t\t\t\t\t.category-icon {\n\t\t\t\t\t\tbackground-color: rgba(33, 150, 243, 0.05);\n\t\t\t\t\t\tborder: 2rpx dashed #2196F3;\n\t\t\t\t\t\t\n\t\t\t\t\t\t&:active {\n\t\t\t\t\t\t\tbackground-color: rgba(33, 150, 243, 0.2);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.category-name {\n\t\t\t\t\t\tcolor: #2196F3;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t&:active {\n\t\t\t\t\t\topacity: 0.7;\n\t\t\t\t\t\ttransform: scale(0.95);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\t.content-area {\n\t\t\tmargin-bottom: 20rpx;\n\t\t\tborder: 1px solid #e0e0e0;\n\t\t\tborder-radius: 5rpx;\n\t\t\tbackground-color: #f5f5f5;\n\t\t\tmin-height: 170rpx;\n\t\t\tpadding: 0;\n\t\t\tbox-sizing: border-box;\n\t\t\t\n\t\t\t.content-input {\n\t\t\t\twidth: 100%;\n\t\t\t\tmin-height: 170rpx;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tline-height: 1.5;\n\t\t\t\tcolor: #333;\n\t\t\t\tpadding: 16rpx;\n\t\t\t\tbackground-color: transparent;\n\t\t\t\tborder: none;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\tword-break: break-word;\n\t\t\t\twhite-space: pre-wrap;\n\t\t\t\toverflow-wrap: break-word;\n\t\t\t\ttext-align: left;\n\t\t\t}\n\t\t}\n\n\t\t.media-section {\n\t\t\tmargin-bottom: 32rpx;\n\t\t}\n\n\t\t.images {\n\t\t\tmargin-bottom: 32rpx;\n\n\t\t\t.upload-notice {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tbackground-color: rgba(33, 150, 243, 0.08);\n\t\t\t\tpadding: 12rpx 16rpx;\n\t\t\t\tborder-radius: 8rpx;\n\t\t\t\tmargin-bottom: 16rpx;\n\t\t\t\t\n\t\t\t\ttext {\n\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\tcolor: #2196F3;\n\t\t\t\t\tmargin-left: 8rpx;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.tip {\n\t\t\t\tdisplay: block;\n\t\t\t\tmargin-top: 16rpx;\n\t\t\t\tfont-size: 24rpx;\n\t\t\t\tcolor: $pyq-text-color-helper;\n\t\t\t}\n\t\t}\n\n\t\t.video {\n\t\t\t.video-link-preview {\n\t\t\t\tposition: relative;\n\t\t\t\twidth: 100%;\n\t\t\t\tpadding: 20rpx;\n\t\t\t\tmargin-bottom: 16rpx;\n\t\t\t\tbackground-color: #f7f7f7;\n\t\t\t\tborder-radius: 8rpx;\n\t\t\t\toverflow: hidden;\n\n\t\t\t\t.link-container {\n\t\t\t\t\tpadding-right: 60rpx; // 为删除按钮留出空间\n\t\t\t\t\tword-break: break-all;\n\t\t\t\t}\n\n\t\t\t\t.link-text {\n\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\tcolor: #333;\n\t\t\t\t\tline-height: 1.5;\n\t\t\t\t}\n\n\t\t\t\t.delete-btn {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 15rpx;\n\t\t\t\t\tright: 15rpx;\n\t\t\t\t\tbackground: rgba(255, 0, 0, 0.7);\n\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\tpadding: 8rpx;\n\t\t\t\t\tz-index: 10;\n\t\t\t\t\twidth: 40rpx;\n\t\t\t\t\theight: 40rpx;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.video-link-input {\n\t\t\t\twidth: 100%;\n\t\t\t\tmargin-bottom: 16rpx;\n\t\t\t\t\n\t\t\t\t.input-container {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tbackground-color: #f7f7f7;\n\t\t\t\t\tborder-radius: 8rpx;\n\t\t\t\t\tpadding: 10rpx;\n\t\t\t\t\t\n\t\t\t\t\t.link-input {\n\t\t\t\t\t\tflex: 1;\n\t\t\t\t\t\theight: 70rpx;\n\t\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\t\tpadding: 0 20rpx;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.add-link-btn {\n\t\t\t\t\t\twidth: 120rpx;\n\t\t\t\t\t\theight: 70rpx;\n\t\t\t\t\t\tline-height: 70rpx;\n\t\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\t\tcolor: #fff;\n\t\t\t\t\t\tbackground-color: $pyq-vi-color;\n\t\t\t\t\t\tborder-radius: 8rpx;\n\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t\tpadding: 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.tip {\n\t\t\t\tdisplay: block;\n\t\t\t\tfont-size: 24rpx;\n\t\t\t\tcolor: $pyq-text-color-helper;\n\t\t\t}\n\t\t}\n\n\t\t.publish {\n\t\t\t.publish-btn {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 88rpx;\n\t\t\t\tline-height: 88rpx;\n\t\t\t\tbackground: linear-gradient(to right, $pyq-vi-color, rgba($pyq-vi-color, 0.6));\n\t\t\t\tcolor: #fff;\n\t\t\t\tfont-size: 32rpx;\n\t\t\t\tborder-radius: 44rpx;\n\n\t\t\t\t&:active {\n\t\t\t\t\topacity: 0.8;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\t// 图标自定义面板样式\n\t\t.icon-customize-overlay {\n\t\t\tposition: fixed;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tright: 0;\n\t\t\tbottom: 0;\n\t\t\tbackground-color: rgba(0, 0, 0, 0.6);\n\t\t\tz-index: 9999;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\t\n\t\t\t.icon-customize-panel {\n\t\t\t\twidth: 80%;\n\t\t\t\tmax-width: 600rpx;\n\t\t\t\tbackground-color: #fff;\n\t\t\t\tborder-radius: 20rpx;\n\t\t\t\tpadding: 30rpx;\n\t\t\t\tbox-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.15);\n\t\t\t\t\n\t\t\t\t.icon-customize-header {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\tmargin-bottom: 30rpx;\n\t\t\t\t\t\n\t\t\t\t\t.panel-title {\n\t\t\t\t\t\tfont-size: 32rpx;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\tcolor: #333;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.close-btn {\n\t\t\t\t\t\tpadding: 10rpx;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.icon-preview {\n\t\t\t\t\twidth: 200rpx;\n\t\t\t\t\theight: 200rpx;\n\t\t\t\t\tmargin: 0 auto 30rpx;\n\t\t\t\t\tborder: 1px solid #eee;\n\t\t\t\t\tborder-radius: 20rpx;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\n\t\t\t\t\t.preview-image {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tobject-fit: contain;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.customize-controls {\n\t\t\t\t\tmargin-bottom: 30rpx;\n\t\t\t\t\t\n\t\t\t\t\t.control-item {\n\t\t\t\t\t\tmargin-bottom: 20rpx;\n\t\t\t\t\t\t\n\t\t\t\t\t\t.control-label {\n\t\t\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\t\t\tcolor: #666;\n\t\t\t\t\t\t\tmargin-bottom: 10rpx;\n\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.customize-buttons {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\tgap: 20rpx;\n\t\t\t\t\t\n\t\t\t\t\tbutton {\n\t\t\t\t\t\tflex: 1;\n\t\t\t\t\t\theight: 80rpx;\n\t\t\t\t\t\tline-height: 80rpx;\n\t\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\t\tborder-radius: 40rpx;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.cancel-btn {\n\t\t\t\t\t\tbackground-color: #f5f5f5;\n\t\t\t\t\t\tcolor: #666;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.save-btn {\n\t\t\t\t\t\tbackground-color: $pyq-vi-color;\n\t\t\t\t\t\tcolor: #fff;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/* 修改 picker 确认按钮的颜色 */\n\t:deep(.uni-picker-container) {\n\t\t.uni-picker-action {\n\t\t\tcolor: $pyq-vi-color !important;\n\t\t}\n\t}\n\n\t.image-list {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tgap: 20rpx;\n\t\t\n\t\t.image-item {\n\t\t\tposition: relative;\n\t\t\twidth: 200rpx;\n\t\t\theight: 200rpx;\n\t\t\t\n\t\t\timage {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tborder-radius: 8rpx;\n\t\t\t}\n\t\t\t\n\t\t\t.delete-btn {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 15rpx;\n\t\t\t\tright: 15rpx;\n\t\t\t\tbackground: rgba(255, 0, 0, 0.7);\n\t\t\t\tborder-radius: 50%;\n\t\t\t\tpadding: 8rpx;\n\t\t\t\tz-index: 10;\n\t\t\t\twidth: 40rpx;\n\t\t\t\theight: 40rpx;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t}\n\n\t\t\t.progress-overlay {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\tright: 0;\n\t\t\t\tbottom: 0;\n\t\t\t\tbackground: rgba(0, 0, 0, 0.5);\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\tborder-radius: 8rpx;\n\n\t\t\t\t.progress-text {\n\t\t\t\t\tcolor: #fff;\n\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\tmargin-bottom: 10rpx;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\ttext-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n\t\t\t\t}\n\n\t\t\t\t.progress-bar {\n\t\t\t\t\twidth: 80%;\n\t\t\t\t\theight: 4rpx;\n\t\t\t\t\tbackground: rgba(255, 255, 255, 0.3);\n\t\t\t\t\tborder-radius: 2rpx;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\n\t\t\t\t\t.progress {\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tbackground: linear-gradient(to right, #fff, #2196F3);\n\t\t\t\t\t\tborder-radius: 2rpx;\n\t\t\t\t\t\ttransition: width 0.3s ease;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t.upload-btn {\n\t\t\twidth: 200rpx;\n\t\t\theight: 200rpx;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tbackground-color: #f7f7f7;\n\t\t\tborder-radius: 8rpx;\n\t\t}\n\t}\n\n\t// 添加视频转换中的动画样式\n\t.converting-overlay {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground: rgba(0, 0, 0, 0.7);\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tborder-radius: 8rpx;\n\t\tz-index: 5;\n\t\t\n\t\t.converting-spinner {\n\t\t\twidth: 60rpx;\n\t\t\theight: 60rpx;\n\t\t\tborder: 4rpx solid rgba(255, 255, 255, 0.3);\n\t\t\tborder-top: 4rpx solid #fff;\n\t\t\tborder-radius: 50%;\n\t\t\tanimation: spin 1s linear infinite;\n\t\t\tmargin-bottom: 20rpx;\n\t\t}\n\t\t\n\t\t.converting-text {\n\t\t\tcolor: #fff;\n\t\t\tfont-size: 28rpx;\n\t\t}\n\t}\n\n\t// 添加旋转动画\n\t@keyframes spin {\n\t\t0% { transform: rotate(0deg); }\n\t\t100% { transform: rotate(360deg); }\n\t}\n\n\t// 优化整体布局\n\t.article-add {\n\t\tpadding: 20rpx 30rpx; // 减小整体内边距\n\t\t\n\t\t.form-item {\n\t\t\tmargin-bottom: 20rpx; // 减小表单项之间的间距\n\t\t}\n\t\t\n\t\t.section-title {\n\t\t\tfont-size: 28rpx; // 减小标题字体大小\n\t\t\tmargin-bottom: 10rpx; // 减小标题底部边距\n\t\t}\n\t}\n\n\t/* 添加当前仅显示本地分类的提示样式 */\n\t.location-only-tip {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tbackground-color: rgba(33, 150, 243, 0.08);\n\t\tpadding: 8rpx 16rpx;\n\t\tborder-radius: 8rpx;\n\t\tmargin-bottom: 16rpx;\n\t\t\n\t\ttext {\n\t\t\tfont-size: 24rpx;\n\t\t\tcolor: #2196F3;\n\t\t\tmargin-left: 8rpx;\n\t\t}\n\t}\n\n\t/* 文本输入区域样式 */\n\t.content-area {\n\t\tposition: relative;\n\t\tmargin-bottom: 20rpx;\n\t\tborder: 1px solid #e0e0e0;\n\t\tborder-radius: 5rpx;\n\t\tbackground-color: #f5f5f5;\n\t\tpadding: 0;\n\t\tbox-sizing: border-box;\n\t\t\n\t\t.content-input {\n\t\t\twidth: 100%;\n\t\t\tmin-height: 170rpx;\n\t\t\tfont-size: 28rpx;\n\t\t\tline-height: 1.5;\n\t\t\tcolor: #333;\n\t\t\tpadding: 16rpx;\n\t\t\tbackground-color: transparent;\n\t\t\tborder: none;\n\t\t\tbox-sizing: border-box;\n\t\t\tword-break: break-word;\n\t\t\twhite-space: pre-wrap;\n\t\t\toverflow-wrap: break-word;\n\t\t\ttext-align: left;\n\t\t}\n\t}\n</style>","import MiniProgramPage from 'E:/dy2/pages/fabu/fabu.vue'\ntt.createPage(MiniProgramPage)"],"names":["useUserInfoStore","uniCloud","ref","uni","tempFilePath","onMounted","res","nextTick"],"mappings":"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"}