{"version":3,"file":"userArticleList.js","sources":["pages/userArticleList/userArticleList.vue","D:/代码测试/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlckFydGljbGVMaXN0L3VzZXJBcnRpY2xlTGlzdC52dWU"],"sourcesContent":["<script>\n// 使用选项式API定义分享方法，这是微信小程序最稳定的方式\nimport { useUserInfoStore } from '@/store/user.js'\nimport { testLogin } from '@/utils/isLogin'\nimport { useAuthSwitchStore } from '@/store/authSwitch'\n\n\nexport default {\n\tcomponents: {\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t// 视频播放相关\n\t\t\tvideoUrl: '', // 默认视频地址\n\t\t\tvideoVisible: false, // 控制视频组件显示状态\n\t\t\tisVideoPlaying: false, // 视频是否正在播放\n\t\t\tvideoContext: null, // 视频上下文对象\n\t\t\tuserClosedVideo: false, // 用户是否主动关闭了视频\n\t\t\tisVideoSpeedUp: false, // 视频是否正在倍速播放\n\t\t\tvideoDefinition: null, // 视频清晰度配置\n\t\t\t\n\t\t\t// 用户信息和文章列表\n\t\t\tuserArticleData: [],\n\t\t\tuserArticleInfo: {\n\t\t\t\tavatarUrl: '/static/images/default-avatar.png',\n\t\t\t\tnickName: '加载中...',\n\t\t\t\tmobile: '未填写'\n\t\t\t},\n\t\t\t\n\t\t\t// 最新文章图片\n\t\t\tlatestArticleImages: [],\n\t\t\t\n\t\t\t// 分页相关\n\t\t\tpageNo: 1,\n\t\t\tpageSize: 8, // 每页加载的数据条数，与后端默认值保持一致\n\t\t\t\n\t\t\t// 加载状态\n\t\t\tstatus: 'more', // 初始状态为 'more'\n\t\t\tisLoading: false, // 是否正在加载\n\t\t\thasMore: true, // 是否还有更多数据\n\t\t\tloadMoreText: {\n\t\t\t\tcontentdown: '上拉加载更多',\n\t\t\t\tcontentrefresh: '加载中...',\n\t\t\t\tcontentnomore: '~ 已经到底啦 ~'\n\t\t\t},\n\t\t\t\n\t\t\t// 用户信息store\n\t\t\tuserStore: null,\n\t\t\t\n\t\t\t// 头像点击控制状态\n\t\t\tavatarClickEnabled: true,\n\t\t\t\n\t\t\t// 下拉刷新相关\n\t\t\tisRefreshing: false,\n\t\t\trefreshStartTime: 0, // 记录开始刷新的时间\n\t\t\t\n\t\t\t// 添加触底加载防抖变量\n\t\t\tscrollToLowerTimer: null,\n\t\t\tisScrollLoading: false,\n\t\t\ttotalArticleCount: 0, // 文章总数\n\t\t\t\n\t\t\t// 黑名单相关\n\t\t\tblacklistedUrls: [],\n\t\t\t\n\t\t\t// 视频重试计数\n\t\t\tvideoRetryCount: 0,\n\t\t\t\n\t\t\t// 视频字段优先级顺序\n\t\t\tvideoFieldPriority: [\n\t\t\t\t'videoURL', // 首先检查大写URL\n\t\t\t\t'videoUrl', // 然后检查首字母大写URL\n\t\t\t\t'video_url',\n\t\t\t\t'videoSrc',\n\t\t\t\t'video',\n\t\t\t\t'video_src',\n\t\t\t\t'url'\n\t\t\t],\n\t\t}\n\t},\n\t\n\tprops: {\n\t\tuserId: String\n\t},\n\n\tcomputed: {\n\t\t// 计算文章总数，便于在模板和分享中使用\n\t\tarticleTotal() {\n\t\t\treturn this.totalArticleCount || 0;\n\t\t}\n\t},\n\n\t\n\t// 页面加载时设置分享数据\n\tonLoad(options) {\n\t\t// 保存userId\n\t\tif (options.userId) {\n\t\t\tthis.shareUserId = options.userId;\n\t\t}\n\t\t\n\t\t// 初始化store\n\t\tthis.userStore = useUserInfoStore();\n\t\t\n\t\t// 获取权限状态\n\t\tthis.getSendOnState();\n\t\t\n\t\t// 获取文章总数\n\t\tthis.getUserArticleCount();\n\t\t\n\t\t// 获取文章列表\n\t\tthis.getArticelList(true);\n\t\t\n\t\t// 尝试直接初始化视频\n\t\tthis.initVideoFromUrl();\n\t\t\n\t\t// 监听浏览量更新事件\n\t\tuni.$on('viewCountUpdated', (articleId) => {\n\t\t\tthis.updateLocalViewCount(articleId);\n\t\t});\n\t\t\n\t\t// 监听头像点击状态变化事件\n\t\tuni.$on('avatarClickChanged', (newState) => {\n\t\t\tconsole.log('用户文章列表页面收到头像点击状态变化事件:', newState);\n\t\t\tthis.avatarClickEnabled = newState;\n\t\t});\n\t\t\n\t\t// 监听全局刷新事件，用于发布后返回刷新列表\n\t\tuni.$on('globalRefresh', (data) => {\n\t\t\tconsole.log('用户文章列表收到全局刷新事件:', data);\n\t\t\t// 检查是否需要刷新当前页面\n\t\t\tif (data && data.pages && data.pages.includes('userArticleList')) {\n\t\t\t\tconsole.log('正在刷新用户文章列表...');\n\t\t\t\t// 刷新时重新获取文章总数\n\t\t\t\tthis.getUserArticleCount();\n\t\t\t\tthis.getArticelList(true);\n\t\t\t}\n\t\t});\n\t\t\n\t\t// 不在页面加载时生成分享图，改为按需生成\n\t\t// setTimeout(() => {\n\t\t// this.generateShareImage();\n\t\t// }, 1500);\n\t},\n\t\n\t\n\t\n\t// 页面卸载时移除事件监听\n\tonUnload() {\n\t\tuni.$off('viewCountUpdated');\n\t\tuni.$off('avatarClickChanged');\n\t\tuni.$off('globalRefresh');\n\t\t\n\t\t// 清理防抖定时器\n\t\tif (this.scrollToLowerTimer) {\n\t\t\tclearTimeout(this.scrollToLowerTimer);\n\t\t\tthis.scrollToLowerTimer = null;\n\t\t}\n\t},\n\t\n\t// 组件销毁前清理资源\n\tbeforeDestroy() {\n\t\t// 清理所有定时器\n\t\tif (this.scrollToLowerTimer) {\n\t\t\tclearTimeout(this.scrollToLowerTimer);\n\t\t\tthis.scrollToLowerTimer = null;\n\t\t}\n\t},\n\t\n\t// 监听页面触底事件\n\tonReachBottom() {\n\t\tconsole.log('原生触底事件被触发');\n\t\t// 如果已经在处理中，则跳过\n\t\tif (this.isScrollLoading || this.scrollToLowerTimer) {\n\t\t\treturn;\n\t\t}\n\t\t// 调用通用的触底加载方法\n\t\tthis.scrolltolower();\n\t},\n\t\n\tmethods: {\n\t\t// 检查第一篇文章是否包含视频URL字段\n\t\tcheckFirstArticleVideo() {\n\t\t\t// 如果用户主动关闭了视频，不检查视频\n\t\t\tif (this.userClosedVideo) {\n\t\t\t\tconsole.log('用户已主动关闭视频，跳过视频检查');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\t// 如果已经有视频在播放，不检查视频\n\t\t\tif (this.videoVisible && this.videoUrl) {\n\t\t\t\tconsole.log('已有视频在播放，跳过视频检查');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\t// 如果没有文章数据，直接返回\n\t\t\tif (!this.userArticleData || this.userArticleData.length === 0) {\n\t\t\t\tconsole.log('没有文章数据，无法检查视频');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\t// 获取第一篇文章\n\t\t\tconst firstArticle = this.userArticleData[0];\n\t\t\t\n\t\t\t// 使用通用方法获取视频URL\n\t\t\tconst videoUrl = this.getVideoUrlFromArticle(firstArticle);\n\t\t\t\n\t\t\t// 如果找到视频URL\n\t\t\tif (videoUrl) {\n\t\t\t\t// 检查URL是否在黑名单中\n\t\t\t\tif (this.isUrlBlacklisted(videoUrl)) {\n\t\t\t\t\tconsole.log('视频URL在黑名单中，跳过:', videoUrl);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.videoUrl = videoUrl;\n\t\t\t\tthis.videoVisible = true;\n\t\t\t\t\n\t\t\t\t// 在下一个渲染周期初始化视频上下文\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.initVideoContext();\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t\n\t\t\treturn false;\n\t\t},\n\t\t\n\t\t// 尝试从URL直接初始化视频（处理数据库中的直接videoURL字段）\n\t\tinitVideoFromUrl() {\n\t\t\t// 检查是否有当前路由参数中的videoURL\n\t\t\tconst pages = getCurrentPages();\n\t\t\tconst currentPage = pages[pages.length - 1];\n\t\t\t\n\t\t\tif (currentPage && currentPage.options) {\n\t\t\t\tconsole.log('检查页面参数是否包含视频URL');\n\t\t\t\t\n\t\t\t\t// 检查所有可能的视频URL参数名\n\t\t\t\tconst possibleParams = ['videoURL', 'videoUrl', 'video_url', 'video'];\n\t\t\t\tlet videoUrl = null;\n\t\t\t\t\n\t\t\t\tfor (const param of possibleParams) {\n\t\t\t\t\tif (currentPage.options[param]) {\n\t\t\t\t\t\tvideoUrl = decodeURIComponent(currentPage.options[param]);\n\t\t\t\t\t\tconsole.log(`在页面参数中找到视频URL(${param}):`, videoUrl);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 如果在参数中找到视频URL\n\t\t\t\tif (videoUrl && this.isValidVideoUrl(videoUrl)) {\n\t\t\t\t\tconsole.log('设置从页面参数中提取的视频URL:', videoUrl);\n\t\t\t\t\tthis.videoUrl = videoUrl;\n\t\t\t\t\tthis.videoVisible = true;\n\t\t\t\t\t\n\t\t\t\t\t// 在下一个渲染周期初始化视频上下文\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\tthis.initVideoContext();\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn false;\n\t\t},\n\t\t\n\t\t// 获取权限开关状态\n\t\tasync getSendOnState() {\n\t\t\ttry {\n\t\t\t\tconsole.log('正在获取按钮状态...');\n\t\t\t\t\n\t\t\t\tconst sendOnApi = uniCloud.importObject('sendOn', { customUI: true });\n\t\t\t\tconst res = await sendOnApi.get();\n\t\t\t\t\n\t\t\t\tif (res && res.data && res.data.length > 0) {\n\t\t\t\t\t// 获取头像点击状态\n\t\t\t\t\tconst serverAvatarClickState = res.data[0].avatarClick !== undefined ? res.data[0].avatarClick : true;\n\t\t\t\t\t\n\t\t\t\t\t// 更新头像点击状态\n\t\t\t\t\tthis.avatarClickEnabled = serverAvatarClickState;\n\t\t\t\t\t\n\t\t\t\t\tconsole.log('头像点击状态:', this.avatarClickEnabled);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error('获取按钮状态失败: 数据格式不正确');\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('获取按钮状态失败:', err);\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 请求云对象获取文章总数\n\t\tasync getUserArticleCount() {\n\t\t\tif (!this.userId) {\n\t\t\t\tconsole.log('用户ID不存在，无法获取文章总数');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tconsole.log('通过云对象请求文章总数，用户ID:', this.userId);\n\t\t\t\n\t\t\ttry {\n\t\t\t\t// 使用getArticleList方法获取文章总数\n\t\t\t\t// 由于getUserArticleCount方法在部署的云对象中不存在（Method[getUserArticleCount] was not found in index.obj.js）\n\t\t\t\tconst articleApi = uniCloud.importObject('articleDy', { customUI: true });\n\t\t\t\t// 设置pageSize为1，只获取总数\n\t\t\t\tconst result = await articleApi.getArticleList(this.userId, 1, 1);\n\t\t\t\t\n\t\t\t\tif (result && result.total !== undefined) {\n\t\t\t\t\t// 更新文章总数\n\t\t\t\t\tthis.totalArticleCount = result.total;\n\t\t\t\t\tconsole.log('云对象通过getArticleList获取到文章总数:', this.totalArticleCount);\n\t\t\t\t\t\n\t\t\t\t\treturn this.totalArticleCount;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error('云对象获取文章总数失败: 未返回total字段');\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('云对象获取文章总数出错:', err);\n\t\t\t\t\n\t\t\t\t// 出错时，将文章总数设为0\n\t\t\t\tthis.totalArticleCount = 0;\n\t\t\t\tconsole.log('云对象请求失败，设置文章总数为0');\n\t\t\t\t\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 获取用户文章列表（首次加载或重置）\n\t\tasync getArticelList(isReset = false) {\n\t\t\tthis.isLoading = true;\n\t\t\tthis.status = 'loading';\n\t\t\t\n\t\t\tif (isReset) {\n\t\t\t\tthis.pageNo = 1;\n\t\t\t\tthis.userArticleData = [];\n\t\t\t}\n\t\t\t\n\t\t\treturn new Promise(async (resolve, reject) => {\n\t\t\t\ttry {\n\t\t\t\t\tconst articleApi = uniCloud.importObject('articleDy', { customUI: true });\n\t\t\t\t\tconst res = await articleApi.getArticleList(this.userId, this.pageNo, this.pageSize);\n\t\t\t\t\t\n\t\t\t\t\t// 保存API返回的文章总数\n\t\t\t\t\tif (res && res.total !== undefined) {\n\t\t\t\t\t\tthis.totalArticleCount = res.total;\n\t\t\t\t\t\tconsole.log('获取到文章总数:', this.totalArticleCount);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 添加空值检查\n\t\t\t\t\tif (res && res.userInfo) {\n\t\t\t\t\t\tthis.userArticleInfo = res.userInfo;\n\t\t\t\t\t\t// 如果当前用户是登录用户，可以更新全局用户信息\n\t\t\t\t\t\tif (this.userId === this.userStore.userInfo.uid) {\n\t\t\t\t\t\t\tthis.userStore.setUserInfo({\n\t\t\t\t\t\t\t\t...this.userStore.userInfo,\n\t\t\t\t\t\t\t\tnickName: res.userInfo.nickName || this.userStore.userInfo.nickName,\n\t\t\t\t\t\t\t\tavatarUrl: res.userInfo.avatarUrl || this.userStore.userInfo.avatarUrl\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 数据加载完成后\n\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\t// 获取最新文章的图片\n\t\t\t\t\t\t\tthis.extractLatestArticleImages();\n\t\t\t\t\t\t\t// 尝试直接从第一篇文章检查视频字段\n\t\t\t\t\t\t\tthis.checkFirstArticleVideo();\n\t\t\t\t\t\t\t// 尝试从文章中提取视频\n\t\t\t\t\t\t\tthis.extractVideoFromArticles();\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (isReset) {\n\t\t\t\t\t\t\tthis.userArticleData = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.hasMore = false;\n\t\t\t\t\t\tthis.status = 'noMore';\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 处理文章数据\n\t\t\t\t\tif (res && res.data) {\n\t\t\t\t\t\tif (isReset) {\n\t\t\t\t\t\t\tthis.userArticleData = res.data;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.userArticleData = [...this.userArticleData, ...res.data];\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 确保每篇文章都有用户信息\n\t\t\t\t\t\tthis.userArticleData.forEach(article => {\n\t\t\t\t\t\t\t// 如果文章没有用户信息，使用从API获取的用户信息\n\t\t\t\t\t\t\tif (!article.user_avatarUrl && this.userArticleInfo.avatarUrl) {\n\t\t\t\t\t\t\t\tarticle.user_avatarUrl = this.userArticleInfo.avatarUrl;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!article.user_nickName && this.userArticleInfo.nickName) {\n\t\t\t\t\t\t\t\tarticle.user_nickName = this.userArticleInfo.nickName;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 判断是否还有更多数据\n\t\t\t\t\t\tthis.hasMore = res.data.length >= this.pageSize;\n\t\t\t\t\t\tthis.status = this.hasMore ? 'more' : 'noMore';\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 文章数据更新后\n\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\t// 获取最新文章的图片\n\t\t\t\t\t\t\tthis.extractLatestArticleImages();\n\t\t\t\t\t\t\t// 尝试直接从第一篇文章检查视频字段\n\t\t\t\t\t\t\tthis.checkFirstArticleVideo();\n\t\t\t\t\t\t\t// 尝试从文章中提取视频\n\t\t\t\t\t\t\tthis.extractVideoFromArticles();\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (isReset) {\n\t\t\t\t\t\t\tthis.userArticleData = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.hasMore = false;\n\t\t\t\t\t\tthis.status = 'noMore';\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tresolve();\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconsole.error('获取用户文章列表失败:', err);\n\t\t\t\t\tif (isReset) {\n\t\t\t\t\t\tthis.userArticleData = [];\n\t\t\t\t\t}\n\t\t\t\t\tthis.userArticleInfo = {};\n\t\t\t\t\tthis.status = 'noMore';\n\t\t\t\t\tthis.hasMore = false;\n\t\t\t\t\t\n\t\t\t\t\t// 显示错误提示\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '获取数据失败，请重试',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\treject(err);\n\t\t\t\t} finally {\n\t\t\t\t\tthis.isLoading = false;\n\t\t\t\t\t// 重置下拉刷新状态\n\t\t\t\t\tthis.isRefreshing = false;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\n\t\t// 触底加载时，不影响视频状态\n\t\tscrolltolower() {\n\t\t\tconsole.log('触底加载被触发，状态:', { isLoading: this.isLoading, hasMore: this.hasMore, isScrollLoading: this.isScrollLoading });\n\t\t\t\n\t\t\t// 如果正在加载或已经没有更多数据，直接返回\n\t\t\tif (this.isLoading || !this.hasMore || this.isScrollLoading) {\n\t\t\t\tconsole.log('跳过加载: ' + (this.isLoading ? '正在加载中' : (this.isScrollLoading ? '防抖期间' : '没有更多数据')));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 设置防抖标志\n\t\t\tthis.isScrollLoading = true;\n\t\t\t\n\t\t\t// 先展示加载提示\n\t\t\tthis.status = 'loading';\n\t\t\t\n\t\t\t// 清除之前的定时器\n\t\t\tif (this.scrollToLowerTimer) {\n\t\t\t\tclearTimeout(this.scrollToLowerTimer);\n\t\t\t}\n\t\t\t\n\t\t\t// 记录当前视频状态，以便加载后恢复\n\t\t\tlet savedVideoState = null;\n\t\t\tif (this.videoVisible && this.videoContext) {\n\t\t\t\tsavedVideoState = {\n\t\t\t\t\tisPlaying: this.isVideoPlaying,\n\t\t\t\t\tposition: 0,\n\t\t\t\t\tvisible: this.videoVisible\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// 获取当前播放位置\n\t\t\t\ttry {\n\t\t\t\t\tthis.videoContext.pause(); // 临时暂停以便获取准确的当前位置\n\t\t\t\t\tsavedVideoState.position = this.videoContext.currentTime || 0;\n\t\t\t\t\t// 如果之前是播放状态，则恢复播放\n\t\t\t\t\tif (savedVideoState.isPlaying) {\n\t\t\t\t\t\tthis.videoContext.play();\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error('保存视频状态时出错:', e);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 设置防抖定时器，300毫秒内只执行一次\n\t\t\tthis.scrollToLowerTimer = setTimeout(() => {\n\t\t\t\tconsole.log('开始加载更多数据 (防抖后)，保存的视频状态:', savedVideoState);\n\t\t\t\t\n\t\t\t\t// 传递保存的视频状态\n\t\t\t\tthis.loadMoreData(savedVideoState);\n\t\t\t}, 500);\n\t\t},\n\t\t\n\t\t// 加载更多数据\n\t\tasync loadMoreData(savedVideoState = null) {\n\t\t\tif (this.isLoading || !this.hasMore) {\n\t\t\t\tconsole.log('跳过加载更多:', { isLoading: this.isLoading, hasMore: this.hasMore });\n\t\t\t\tthis.isScrollLoading = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tconsole.log(`开始加载第${this.pageNo + 1}页数据，视频状态:`, savedVideoState);\n\t\t\tthis.status = 'loading';\n\t\t\tthis.isLoading = true;\n\t\t\t\n\t\t\t// 视觉上显示加载延迟，避免加载过快用户无感知\n\t\t\tconst loadStartTime = Date.now();\n\t\t\tconst minLoadingTime = 500; // 最小加载时间，提供更好的视觉反馈\n\t\t\t\n\t\t\tthis.pageNo++;\n\t\t\ttry {\n\t\t\t\tawait this.getArticelList();\n\t\t\t\t\n\t\t\t\t// 计算已经过去的时间\n\t\t\t\tconst loadDuration = Date.now() - loadStartTime;\n\t\t\t\t\n\t\t\t\t// 如果加载太快，添加小延迟使加载状态对用户可见\n\t\t\t\tif (loadDuration < minLoadingTime) {\n\t\t\t\t\tawait new Promise(resolve => setTimeout(resolve, minLoadingTime - loadDuration));\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconsole.log(`第${this.pageNo}页数据加载完成, 当前状态:`, { \n\t\t\t\t\tarticleCount: this.userArticleData.length,\n\t\t\t\t\thasMore: this.hasMore,\n\t\t\t\t\tstatus: this.status\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// 恢复视频状态\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.restoreVideoState(savedVideoState);\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\t// 静默处理\"请求进行中\"错误，避免在控制台显示错误信息\n\t\t\t\tif (err && err.message === '请求进行中') {\n\t\t\t\t\tconsole.log('忽略并发请求:', err.message);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error('加载更多数据失败:', err);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 发生错误时恢复页码，以便下次重试\n\t\t\t\tthis.pageNo--;\n\t\t\t\tthis.status = 'more';\n\t\t\t\t\n\t\t\t\t// 即使出错也恢复视频状态\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.restoreVideoState(savedVideoState);\n\t\t\t\t});\n\t\t\t} finally {\n\t\t\t\tthis.isLoading = false;\n\t\t\t\tthis.isScrollLoading = false;\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 恢复视频状态的方法\n\t\trestoreVideoState(savedVideoState) {\n\t\t\tif (!savedVideoState) return;\n\t\t\t\n\t\t\tconsole.log('尝试恢复视频状态:', savedVideoState, '用户关闭标记:', this.userClosedVideo);\n\t\t\t\n\t\t\t// 如果用户主动关闭了视频，不恢复视频状态\n\t\t\tif (this.userClosedVideo) {\n\t\t\t\tconsole.log('用户已主动关闭视频，不恢复视频状态');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 确保视频组件可见性与之前一致\n\t\t\tif (savedVideoState.visible !== this.videoVisible) {\n\t\t\t\tthis.videoVisible = savedVideoState.visible;\n\t\t\t}\n\t\t\t\n\t\t\t// 仅当视频组件可见且有视频URL时恢复状态\n\t\t\tif (this.videoVisible && this.videoUrl) {\n\t\t\t\t// 需要重新获取视频上下文\n\t\t\t\tthis.videoContext = uni.createVideoContext('myVideo', this);\n\t\t\t\t\n\t\t\t\tif (this.videoContext) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// 设置播放位置\n\t\t\t\t\t\tif (savedVideoState.position > 0) {\n\t\t\t\t\t\t\tthis.videoContext.seek(savedVideoState.position);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 恢复播放状态\n\t\t\t\t\t\tif (savedVideoState.isPlaying) {\n\t\t\t\t\t\t\tthis.videoContext.play();\n\t\t\t\t\t\t\tthis.isVideoPlaying = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.videoContext.pause();\n\t\t\t\t\t\t\tthis.isVideoPlaying = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tconsole.log('视频状态恢复成功');\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error('恢复视频状态时出错:', e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 处理删除\n\t\tasync handleDelete(article_id) {\n\t\t\ttry {\n\t\t\t\t// 添加确认提示\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '确认删除',\n\t\t\t\t\tcontent: '确定要删除这篇文章吗？',\n\t\t\t\t\tsuccess: async (result) => {\n\t\t\t\t\t\tif (result.confirm) {\n\t\t\t\t\t\t\t// 显示加载中提示\n\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\ttitle: '删除中...',\n\t\t\t\t\t\t\t\tmask: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 调用删除API\n\t\t\t\t\t\t\tconst articleApi = uniCloud.importObject('articleDy', { customUI: true });\n\t\t\t\t\t\t\tconst res = await articleApi.del(article_id, this.userStore.userInfo.uid);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tconsole.log('删除返回结果:', res);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 检查删除是否成功\n\t\t\t\t\t\t\tif (res && res.deleted) {\n\t\t\t\t\t\t\t\t// 从本地数据列表中移除已删除的文章\n\t\t\t\t\t\t\t\tconst index = this.userArticleData.findIndex(item => item._id === article_id);\n\t\t\t\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\t\t\t\tthis.userArticleData.splice(index, 1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 显示成功提示\n\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '删除成功',\n\t\t\t\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\t\t\t\tduration: 1500\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthrow new Error('删除失败，请重试');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('删除出错:', err);\n\t\t\t\tuni.hideLoading();\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: err.message || '删除失败，请重试',\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\tduration: 2000\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 图片预览\n\t\tpreviewImage(urls, current) {\n\t\t\tuni.previewImage({\n\t\t\t\turls,\n\t\t\t\tcurrent\n\t\t\t});\n\t\t},\n\t\t\n\t\t// 处理联系方式\n\t\thandleContact() {\n\t\t\tif (!this.userArticleInfo || this.userArticleInfo.mobile === '未填写') {\n\t\t\t\treturn uni.showToast({\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\ttitle: '他并不想让人联系'\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tuni.makePhoneCall({\n\t\t\t\tphoneNumber: this.userArticleInfo.mobile\n\t\t\t});\n\t\t},\n\t\t\n\t\t// 文章列表触底时触发\n\t\tscrolltolower() {\n\t\t\tconsole.log('触底加载被触发，状态:', { isLoading: this.isLoading, hasMore: this.hasMore, isScrollLoading: this.isScrollLoading });\n\t\t\t\n\t\t\t// 如果正在加载或已经没有更多数据，直接返回\n\t\t\tif (this.isLoading || !this.hasMore || this.isScrollLoading) {\n\t\t\t\tconsole.log('跳过加载: ' + (this.isLoading ? '正在加载中' : (this.isScrollLoading ? '防抖期间' : '没有更多数据')));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 设置防抖标志\n\t\t\tthis.isScrollLoading = true;\n\t\t\t\n\t\t\t// 先展示加载提示\n\t\t\tthis.status = 'loading';\n\t\t\t\n\t\t\t// 清除之前的定时器\n\t\t\tif (this.scrollToLowerTimer) {\n\t\t\t\tclearTimeout(this.scrollToLowerTimer);\n\t\t\t}\n\t\t\t\n\t\t\t// 记录当前视频状态，以便加载后恢复\n\t\t\tlet savedVideoState = null;\n\t\t\tif (this.videoVisible && this.videoContext) {\n\t\t\t\tsavedVideoState = {\n\t\t\t\t\tisPlaying: this.isVideoPlaying,\n\t\t\t\t\tposition: 0,\n\t\t\t\t\tvisible: this.videoVisible\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// 获取当前播放位置\n\t\t\t\ttry {\n\t\t\t\t\tthis.videoContext.pause(); // 临时暂停以便获取准确的当前位置\n\t\t\t\t\tsavedVideoState.position = this.videoContext.currentTime || 0;\n\t\t\t\t\t// 如果之前是播放状态，则恢复播放\n\t\t\t\t\tif (savedVideoState.isPlaying) {\n\t\t\t\t\t\tthis.videoContext.play();\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error('保存视频状态时出错:', e);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 设置防抖定时器，300毫秒内只执行一次\n\t\t\tthis.scrollToLowerTimer = setTimeout(() => {\n\t\t\t\tconsole.log('开始加载更多数据 (防抖后)，保存的视频状态:', savedVideoState);\n\t\t\t\t\n\t\t\t\t// 传递保存的视频状态\n\t\t\t\tthis.loadMoreData(savedVideoState);\n\t\t\t}, 500);\n\t\t},\n\t\t\n\t\t// 更新本地文章浏览量数据\n\t\tupdateLocalViewCount(articleId) {\n\t\t\t// 更新本地数据，立即显示增加后的浏览量\n\t\t\tconst article = this.userArticleData.find(item => item._id === articleId);\n\t\t\tif (article) {\n\t\t\t\tif (article.look_count !== undefined) {\n\t\t\t\t\tarticle.look_count++;\n\t\t\t\t} else {\n\t\t\t\t\tarticle.look_count = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 预览最新文章图片\n\t\tpreviewLatestImages(index) {\n\t\t\tif (this.latestArticleImages && this.latestArticleImages.length > 0) {\n\t\t\t\tuni.previewImage({\n\t\t\t\t\tcurrent: this.latestArticleImages[index],\n\t\t\t\t\turls: this.latestArticleImages\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 获取文章的图片\n\t\tgetArticleImages(article) {\n\t\t\tconst images = [];\n\t\t\t\n\t\t\tif (!article) return images;\n\t\t\t\n\t\t\t// 处理新版图片结构 (images 数组)\n\t\t\tif (article.images && article.images.length > 0) {\n\t\t\t\tarticle.images.forEach(img => {\n\t\t\t\t\t// 优先使用缩略图\n\t\t\t\t\tif (img.thumbnailURL) {\n\t\t\t\t\t\timages.push(this.processImageUrl(img.thumbnailURL));\n\t\t\t\t\t}\n\t\t\t\t\t// 其次使用压缩图\n\t\t\t\t\telse if (img.compressedURL) {\n\t\t\t\t\t\timages.push(this.processImageUrl(img.compressedURL));\n\t\t\t\t\t}\n\t\t\t\t\t// 再次使用原图\n\t\t\t\t\telse if (img.url) {\n\t\t\t\t\t\timages.push(this.processImageUrl(img.url));\n\t\t\t\t\t}\n\t\t\t\t\t// 如果是字符串直接使用\n\t\t\t\t\telse if (typeof img === 'string') {\n\t\t\t\t\t\timages.push(this.processImageUrl(img));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t// 处理旧版图片结构 (imgArr 数组)\n\t\t\tif (article.imgArr && article.imgArr.length > 0) {\n\t\t\t\tarticle.imgArr.forEach(img => {\n\t\t\t\t\timages.push(this.processImageUrl(img));\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t// 尝试使用封面图\n\t\t\tif (article.coverImage && images.length === 0) {\n\t\t\t\timages.push(this.processImageUrl(article.coverImage));\n\t\t\t}\n\t\t\t\n\t\t\treturn images;\n\t\t},\n\t\t\n\t\t// 预览文章图片\n\t\tpreviewArticleImage(article, index) {\n\t\t\tconst images = this.getArticleImages(article);\n\t\t\tif (images && images.length > 0) {\n\t\t\t\tuni.previewImage({\n\t\t\t\t\tcurrent: images[index],\n\t\t\t\t\turls: images\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 下拉刷新\n\t\tonRefresh() {\n\t\t\tthis.isRefreshing = true;\n\t\t\tthis.refreshStartTime = Date.now(); // 记录开始刷新的时间\n\t\t\t\n\t\t\tthis.getArticelList(true).then(() => {\n\t\t\t\t// 确保刷新动画至少显示800毫秒，提供良好的用户体验\n\t\t\t\tconst refreshDuration = Date.now() - this.refreshStartTime;\n\t\t\t\tconst minimumDuration = 800;\n\t\t\t\t\n\t\t\t\tif (refreshDuration < minimumDuration) {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.isRefreshing = false;\n\t\t\t\t\t\t// 刷新成功提示\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '刷新成功',\n\t\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\t\tduration: 1500\n\t\t\t\t\t\t});\n\t\t\t\t\t}, minimumDuration - refreshDuration);\n\t\t\t\t} else {\n\t\t\t\t\tthis.isRefreshing = false;\n\t\t\t\t\t// 刷新成功提示\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '刷新成功',\n\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\tduration: 1500\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}).catch(() => {\n\t\t\t\t// 确保刷新动画至少显示800毫秒\n\t\t\t\tconst refreshDuration = Date.now() - this.refreshStartTime;\n\t\t\t\tconst minimumDuration = 800;\n\t\t\t\t\n\t\t\t\tif (refreshDuration < minimumDuration) {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.isRefreshing = false;\n\t\t\t\t\t\t// 刷新失败提示\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '刷新失败',\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\tduration: 1500\n\t\t\t\t\t\t});\n\t\t\t\t\t}, minimumDuration - refreshDuration);\n\t\t\t\t} else {\n\t\t\t\t\tthis.isRefreshing = false;\n\t\t\t\t\t// 刷新失败提示\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '刷新失败',\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\tduration: 1500\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\n\t\t// 隐藏分享引导蒙层\n\t\thideShareGuide() {\n\t\t\tthis.showShareArrow = false;\n\t\t},\n\t\t\n\t\t// 视频相关方法\n\t\t// 初始化视频上下文\n\t\tinitVideoContext() {\n\t\t\t// 只有当视频组件可见且有视频URL时才初始化\n\t\t\tif (this.videoVisible && this.videoUrl) {\n\t\t\t\tconsole.log('初始化视频上下文');\n\t\t\t\t// 处理视频URL，确保适合抖音/头条小程序播放\n\t\t\t\tconst processedUrl = this.adjustVideoUrlForToutiao(this.videoUrl);\n\t\t\t\t\n\t\t\t\t// 检查URL是否有变化\n\t\t\t\tif (processedUrl !== this.videoUrl) {\n\t\t\t\t\tconsole.log('视频URL已处理:', processedUrl);\n\t\t\t\t\tthis.videoUrl = processedUrl;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 尝试设置多清晰度选项\n\t\t\t\tthis.setVideoDefinitions(this.videoUrl);\n\t\t\t\t\n\t\t\t\t// 创建视频上下文\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.videoContext = uni.createVideoContext('myVideo', this);\n\t\t\t\t\t\n\t\t\t\t\t// 初始化重试计数\n\t\t\t\t\tthis.videoRetryCount = 0;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.log('视频组件不可见或没有视频URL，跳过初始化');\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 处理视频URL使其适合头条/抖音小程序\n\t\tadjustVideoUrlForToutiao(url) {\n\t\t\tif (!url) return url;\n\t\t\t\n\t\t\t// 确保URL使用https\n\t\t\tif (url.startsWith('http://')) {\n\t\t\t\turl = url.replace('http://', 'https://');\n\t\t\t\tconsole.log('视频URL已更改为https:', url);\n\t\t\t}\n\t\t\t\n\t\t\t// 特殊处理百度静态资源URL，确保格式正确\n\t\t\tif (url.includes('bdstatic.com')) {\n\t\t\t\t// 检查链接是否完整\n\t\t\t\tconst parts = url.split('/');\n\t\t\t\tconst lastPart = parts[parts.length - 1];\n\t\t\t\t\n\t\t\t\t// 如果URL不是以.mp4结尾，尝试添加扩展名\n\t\t\t\tif (!lastPart.endsWith('.mp4')) {\n\t\t\t\t\turl = `${url}.mp4`;\n\t\t\t\t\tconsole.log('百度CDN视频URL已修正:', url);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 确保使用正确的协议和域名\n\t\t\t\tif (!url.startsWith('https://vd3.bdstatic.com')) {\n\t\t\t\t\tconst urlParts = url.split('/');\n\t\t\t\t\tconst domainParts = urlParts[2].split('.');\n\t\t\t\t\t// 尝试修正域名前缀\n\t\t\t\t\tif (domainParts[0] !== 'vd3') {\n\t\t\t\t\t\tdomainParts[0] = 'vd3';\n\t\t\t\t\t\turlParts[2] = domainParts.join('.');\n\t\t\t\t\t\turl = urlParts.join('/');\n\t\t\t\t\t\tconsole.log('百度CDN域名已修正:', url);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 专门处理抖音视频适配问题\n\t\t\t// 确保视频文件格式是mp4或mov，抖音小程序仅支持这两种格式\n\t\t\tconst isMP4 = url.toLowerCase().endsWith('.mp4');\n\t\t\tconst isMOV = url.toLowerCase().endsWith('.mov');\n\t\t\t\n\t\t\tif (!isMP4 && !isMOV) {\n\t\t\t\t// 尝试检测文件类型，默认添加.mp4扩展名\n\t\t\t\tif (url.includes('.')) {\n\t\t\t\t\tconst extension = url.split('.').pop().toLowerCase();\n\t\t\t\t\t// 如果不是mp4或mov格式，尝试将其转换为mp4\n\t\t\t\t\tif (!['mp4', 'mov'].includes(extension)) {\n\t\t\t\t\t\tconsole.log(`检测到不支持的视频格式: ${extension}，转换为mp4`);\n\t\t\t\t\t\turl = url.substring(0, url.lastIndexOf('.')) + '.mp4';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// 如果URL没有扩展名，直接添加.mp4\n\t\t\t\t\turl = url + '.mp4';\n\t\t\t\t\tconsole.log('视频URL没有扩展名，添加.mp4:', url);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 过滤查询参数，保留基本URL\n\t\t\tif (url.includes('?')) {\n\t\t\t\tconst baseUrl = url.split('?')[0];\n\t\t\t\tconsole.log('视频URL查询参数已移除:', baseUrl);\n\t\t\t\treturn baseUrl;\n\t\t\t}\n\t\t\t\n\t\t\treturn url;\n\t\t},\n\t\t\n\t\t// 视频播放事件处理\n\t\tonVideoPlay() {\n\t\t\tconsole.log('视频开始播放');\n\t\t\tthis.isVideoPlaying = true;\n\t\t},\n\t\t\n\t\t// 视频暂停事件处理\n\t\tonVideoPause() {\n\t\t\tconsole.log('视频暂停播放');\n\t\t\tthis.isVideoPlaying = false;\n\t\t},\n\t\t\n\t\t// 视频播放结束事件处理\n\t\tonVideoEnded() {\n\t\t\tconsole.log('视频播放结束');\n\t\t\tthis.isVideoPlaying = false;\n\t\t},\n\t\t\n\t\t// 视频播放错误事件处理\n\t\tonVideoError(e) {\n\t\t\tconsole.error('视频播放错误:', e);\n\t\t\t\n\t\t\t// 记录当前错误的URL\n\t\t\tconst currentErrorUrl = this.videoUrl;\n\t\t\t\n\t\t\t// 尝试自动修复视频URL格式\n\t\t\tconst fixedUrl = this.tryFixVideoUrl(currentErrorUrl);\n\t\t\tif (fixedUrl && fixedUrl !== currentErrorUrl) {\n\t\t\t\tconsole.log('尝试使用修复后的URL播放:', fixedUrl);\n\t\t\t\tthis.videoUrl = fixedUrl;\n\t\t\t\t\n\t\t\t\t// 在下一个渲染周期重新初始化视频上下文\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.initVideoContext();\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 显示错误提示，并提供重试选项\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '视频加载失败',\n\t\t\t\tcontent: '当前视频格式可能不被支持，是否尝试其他视频？',\n\t\t\t\tconfirmText: '尝试其他',\n\t\t\t\tcancelText: '关闭视频',\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t// 重置视频URL，再次尝试查找\n\t\t\t\t\t\tthis.videoUrl = '';\n\t\t\t\t\t\tthis.videoVisible = false;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 延迟执行以确保UI更新\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t// 从黑名单中排除当前URL，避免再次尝试播放\n\t\t\t\t\t\t\tthis.addUrlToBlacklist(currentErrorUrl);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 再次尝试查找其他视频\n\t\t\t\t\t\t\tthis.findNextVideo();\n\t\t\t\t\t\t}, 300);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 用户选择关闭视频\n\t\t\t\t\t\tthis.hideVideo();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\n\t\t// 尝试修复视频URL格式\n\t\ttryFixVideoUrl(url) {\n\t\t\tif (!url) return null;\n\t\t\t\n\t\t\tlet fixedUrl = url;\n\t\t\t\n\t\t\t// 确保URL使用https\n\t\t\tif (fixedUrl.startsWith('http://')) {\n\t\t\t\tfixedUrl = fixedUrl.replace('http://', 'https://');\n\t\t\t\tconsole.log('视频URL转换为https:', fixedUrl);\n\t\t\t}\n\t\t\t\n\t\t\t// 特殊处理百度静态资源URL\n\t\t\tif (fixedUrl.includes('bdstatic.com')) {\n\t\t\t\t// 进一步处理百度视频URL\n\t\t\t\t\n\t\t\t\t// 1. 确保正确的域名前缀 (vd3)\n\t\t\t\tif (!fixedUrl.includes('vd3.bdstatic.com')) {\n\t\t\t\t\tconst urlParts = fixedUrl.split('/');\n\t\t\t\t\tif (urlParts[2] && urlParts[2].includes('bdstatic.com')) {\n\t\t\t\t\t\tconst domainParts = urlParts[2].split('.');\n\t\t\t\t\t\tdomainParts[0] = 'vd3';\n\t\t\t\t\t\turlParts[2] = domainParts.join('.');\n\t\t\t\t\t\tfixedUrl = urlParts.join('/');\n\t\t\t\t\t\tconsole.log('修正百度CDN域名前缀:', fixedUrl);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 2. 检查是否有mda-前缀部分\n\t\t\t\tif (!fixedUrl.includes('/mda-')) {\n\t\t\t\t\t// 这种情况太复杂，无法自动修复\n\t\t\t\t\tconsole.log('百度视频URL格式不正确，缺少mda-前缀');\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 3. 确保路径包含必要的部分（360p/h264等）\n\t\t\t\tif (!fixedUrl.includes('/360p/') && !fixedUrl.includes('/h264/')) {\n\t\t\t\t\t// 从URL中提取mda-ID\n\t\t\t\t\tconst mdaMatch = fixedUrl.match(/\\/mda-([a-zA-Z0-9]+)/);\n\t\t\t\t\tif (mdaMatch && mdaMatch[1]) {\n\t\t\t\t\t\tconst mdaId = mdaMatch[1];\n\t\t\t\t\t\t// 构建完整的URL格式\n\t\t\t\t\t\tconst timestamp = Date.now(); // 使用当前时间戳模拟\n\t\t\t\t\t\tfixedUrl = `https://vd3.bdstatic.com/mda-${mdaId}/360p/h264/${timestamp}/mda-${mdaId}.mp4`;\n\t\t\t\t\t\tconsole.log('重构的百度视频完整URL:', fixedUrl);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 4. 确保URL以.mp4结尾\n\t\t\t\tif (!fixedUrl.endsWith('.mp4')) {\n\t\t\t\t\tfixedUrl = `${fixedUrl}.mp4`;\n\t\t\t\t\tconsole.log('添加.mp4扩展名:', fixedUrl);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 确保抖音小程序支持的视频格式\n\t\t\t// 根据抖音小程序文档，只支持mp4和mov格式，并且建议使用4K以下分辨率\n\t\t\tif (!fixedUrl.endsWith('.mp4') && !fixedUrl.endsWith('.mov')) {\n\t\t\t\t// 尝试检测文件类型并修正\n\t\t\t\tif (fixedUrl.includes('.')) {\n\t\t\t\t\tconst extension = fixedUrl.split('.').pop().toLowerCase();\n\t\t\t\t\t// 如果不是mp4或mov格式，尝试将其转换为mp4\n\t\t\t\t\tif (!['mp4', 'mov'].includes(extension)) {\n\t\t\t\t\t\tconsole.log(`检测到不支持的视频格式: ${extension}，尝试转换为mp4`);\n\t\t\t\t\t\t// 移除原有扩展名并添加.mp4\n\t\t\t\t\t\tfixedUrl = fixedUrl.substring(0, fixedUrl.lastIndexOf('.')) + '.mp4';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// 如果URL没有扩展名，直接添加.mp4\n\t\t\t\t\tfixedUrl = fixedUrl + '.mp4';\n\t\t\t\t\tconsole.log('视频URL没有扩展名，添加.mp4:', fixedUrl);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 如果URL包含高分辨率参数，尝试降低分辨率\n\t\t\tif (fixedUrl.includes('4k') || fixedUrl.includes('2160p') || fixedUrl.includes('3840')) {\n\t\t\t\tconsole.log('检测到高分辨率视频，尝试降低为1080p');\n\t\t\t\tfixedUrl = fixedUrl.replace(/4k/gi, '1080p')\n\t\t\t\t\t.replace(/2160p/gi, '1080p')\n\t\t\t\t\t.replace(/3840/g, '1920');\n\t\t\t}\n\t\t\t\n\t\t\t// 过滤查询参数，保留基本URL\n\t\t\tif (fixedUrl.includes('?')) {\n\t\t\t\tfixedUrl = fixedUrl.split('?')[0];\n\t\t\t\tconsole.log('移除URL查询参数:', fixedUrl);\n\t\t\t}\n\t\t\t\n\t\t\t// 返回修复后的URL，如果没有变化，则表示无法修复\n\t\t\treturn fixedUrl !== url ? fixedUrl : null;\n\t\t},\n\t\t\n\t\t// 添加URL到黑名单\n\t\taddUrlToBlacklist(url) {\n\t\t\tif (!this.blacklistedUrls) {\n\t\t\t\tthis.blacklistedUrls = [];\n\t\t\t}\n\t\t\tif (url && !this.blacklistedUrls.includes(url)) {\n\t\t\t\tthis.blacklistedUrls.push(url);\n\t\t\t\tconsole.log('已将视频URL添加到黑名单:', url);\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 检查URL是否在黑名单中\n\t\tisUrlBlacklisted(url) {\n\t\t\treturn this.blacklistedUrls && this.blacklistedUrls.includes(url);\n\t\t},\n\t\t\n\t\t// 查找下一个可用视频\n\t\tfindNextVideo() {\n\t\t\tconsole.log('查找下一个可用视频');\n\t\t\t\n\t\t\t// 如果没有文章数据，直接返回\n\t\t\tif (!this.userArticleData || this.userArticleData.length === 0) {\n\t\t\t\tconsole.log('没有文章数据，无法查找视频');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\t// 存储找到的所有视频URL\n\t\t\tconst allVideoUrls = [];\n\t\t\t\n\t\t\t// 查找所有视频URLs\n\t\t\tfor (let article of this.userArticleData) {\n\t\t\t\t// 检查所有可能的视频字段\n\t\t\t\tconst possibleVideoFields = ['videoUrl', 'video_url', 'video', 'videoSrc', 'video_src', 'url'];\n\t\t\t\tfor (let field of possibleVideoFields) {\n\t\t\t\t\tif (article[field] && typeof article[field] === 'string' && this.isValidVideoUrl(article[field])) {\n\t\t\t\t\t\t// 排除当前已尝试过的URL和黑名单中的URL\n\t\t\t\t\t\tif (article[field] !== this.videoUrl && !this.isUrlBlacklisted(article[field])) {\n\t\t\t\t\t\t\tallVideoUrls.push(article[field]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 检查视频数组\n\t\t\t\tconst possibleVideoArrayFields = ['videos', 'videoArr', 'video_arr', 'videoList', 'video_list'];\n\t\t\t\tfor (let field of possibleVideoArrayFields) {\n\t\t\t\t\tif (article[field] && Array.isArray(article[field])) {\n\t\t\t\t\t\tfor (let videoItem of article[field]) {\n\t\t\t\t\t\t\tif (typeof videoItem === 'string' && this.isValidVideoUrl(videoItem)) {\n\t\t\t\t\t\t\t\t// 检查URL是否在黑名单中\n\t\t\t\t\t\t\t\tif (this.isUrlBlacklisted(videoItem)) {\n\t\t\t\t\t\t\t\t\tconsole.log(`跳过黑名单中的视频URL(${field}数组):`, videoItem);\n\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tthis.videoUrl = videoItem;\n\t\t\t\t\t\t\t\tthis.videoVisible = true;\n\t\t\t\t\t\t\t} \n\t\t\t\t\t\t\t// 如果是对象，尝试获取url字段\n\t\t\t\t\t\t\telse if (typeof videoItem === 'object') {\n\t\t\t\t\t\t\t\tconst possibleUrlProps = ['url', 'src', 'source', 'path', 'videoUrl'];\n\t\t\t\t\t\t\t\tfor (let prop of possibleUrlProps) {\n\t\t\t\t\t\t\t\t\tif (videoItem[prop] && typeof videoItem[prop] === 'string' && this.isValidVideoUrl(videoItem[prop])) {\n\t\t\t\t\t\t\t\t\t\t// 检查URL是否在黑名单中\n\t\t\t\t\t\t\t\t\t\tif (this.isUrlBlacklisted(videoItem[prop])) {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(`跳过黑名单中的视频URL(${field}.${prop}):`, videoItem[prop]);\n\t\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tthis.videoUrl = videoItem[prop];\n\t\t\t\t\t\t\t\t\t\tthis.videoVisible = true;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 从内容中提取\n\t\t\t\tif (article.content) {\n\t\t\t\t\tconst videoUrlMatch = this.extractVideoUrlFromContent(article.content);\n\t\t\t\t\tif (videoUrlMatch && videoUrlMatch !== this.videoUrl && !this.isUrlBlacklisted(videoUrlMatch)) {\n\t\t\t\t\t\tallVideoUrls.push(videoUrlMatch);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 如果找到了其他视频\n\t\t\tif (allVideoUrls.length > 0) {\n\t\t\t\tconsole.log('找到其他视频:', allVideoUrls[0]);\n\t\t\t\tthis.videoUrl = allVideoUrls[0];\n\t\t\t\tthis.videoVisible = true;\n\t\t\t\t\n\t\t\t\t// 在下一个渲染周期初始化视频上下文\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.initVideoContext();\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tconsole.log('没有找到其他可用视频');\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '未找到其他视频',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 全屏状态变化事件处理\n\t\thandleFullscreenChange(e) {\n\t\t\tconsole.log('全屏状态变化:', e.detail.fullScreen);\n\t\t},\n\t\t\n\t\t// 隐藏视频\n\t\thideVideo() {\n\t\t\tconsole.log('隐藏视频组件被调用');\n\t\t\t// 标记用户主动关闭了视频\n\t\t\tthis.userClosedVideo = true;\n\t\t\t// 暂停视频\n\t\t\tif (this.videoContext) {\n\t\t\t\tthis.videoContext.pause();\n\t\t\t}\n\t\t\t// 隐藏视频组件\n\t\t\tthis.videoVisible = false;\n\t\t\tthis.videoUrl = ''; // 清空视频URL，确保组件完全隐藏\n\t\t},\n\t\t\n\t\t// 显示视频\n\t\tshowVideo() {\n\t\t\t// 重置用户关闭标记\n\t\t\tthis.userClosedVideo = false;\n\t\t\tthis.videoVisible = true;\n\t\t\t// 在下一个渲染周期重新初始化视频上下文\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.initVideoContext();\n\t\t\t});\n\t\t},\n\t\t\n\t\t// 从文章列表中提取视频URL\n\t\textractVideoFromArticles() {\n\t\t\tconsole.log('尝试从文章中提取视频链接');\n\t\t\t\n\t\t\t// 如果用户主动关闭了视频，不提取新视频\n\t\t\tif (this.userClosedVideo) {\n\t\t\t\tconsole.log('用户已主动关闭视频，跳过视频提取');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\t// 如果已经有视频在播放，不提取新视频\n\t\t\tif (this.videoVisible && this.videoUrl) {\n\t\t\t\tconsole.log('已有视频在播放，跳过视频提取');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\t// 如果没有文章数据，直接返回\n\t\t\tif (!this.userArticleData || this.userArticleData.length === 0) {\n\t\t\t\tconsole.log('没有文章数据，无法提取视频');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\t// 创建一个包含文章索引的数组，按照文章的创建时间降序排序（最新的优先）\n\t\t\tconst sortedArticleIndices = this.userArticleData\n\t\t\t\t.map((article, index) => ({ index, time: article.create_time || article.createTime || article.time || 0 }))\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\t// 尝试按照时间排序，如果时间相同或不存在，保持原有顺序\n\t\t\t\t\tif (typeof a.time === 'string' && typeof b.time === 'string') {\n\t\t\t\t\t\treturn new Date(b.time) - new Date(a.time);\n\t\t\t\t\t} else if (typeof a.time === 'number' && typeof b.time === 'number') {\n\t\t\t\t\t\treturn b.time - a.time;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn a.index - b.index; // 保持原有顺序\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.map(item => item.index);\n\t\t\t\n\t\t\tconsole.log('按时间排序后的文章索引:', sortedArticleIndices);\n\t\t\t\n\t\t\t// 根据排序后的索引遍历文章\n\t\t\tfor (let i = 0; i < sortedArticleIndices.length; i++) {\n\t\t\t\tconst articleIndex = sortedArticleIndices[i];\n\t\t\t\tconst article = this.userArticleData[articleIndex];\n\t\t\t\t\n\t\t\t\tconsole.log(`检查第 ${i+1} 新的文章(索引:${articleIndex})是否包含视频`);\n\t\t\t\t\n\t\t\t\t// 使用通用方法获取视频URL\n\t\t\t\tconst videoUrl = this.getVideoUrlFromArticle(article);\n\t\t\t\t\n\t\t\t\t// 如果找到视频URL\n\t\t\t\tif (videoUrl) {\n\t\t\t\t\t// 检查URL是否在黑名单中\n\t\t\t\t\tif (this.isUrlBlacklisted(videoUrl)) {\n\t\t\t\t\t\tconsole.log('视频URL在黑名单中，跳过:', videoUrl);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.videoUrl = videoUrl;\n\t\t\t\t\tthis.videoVisible = true;\n\t\t\t\t\t\n\t\t\t\t\t// 在下一个渲染周期初始化视频上下文\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\tthis.initVideoContext();\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tconsole.log('未在文章中找到有效的视频链接');\n\t\t\treturn false;\n\t\t},\n\t\t\n\t\t// 检查URL是否是有效的视频URL\n\t\tisValidVideoUrl(url) {\n\t\t\tif (!url || typeof url !== 'string') return false;\n\t\t\t\n\t\t\t// 检查常见视频扩展名\n\t\t\tconst videoExtensions = ['.mp4', '.mov']; // 抖音小程序仅支持mp4和mov格式\n\t\t\tconst hasVideoExtension = videoExtensions.some(ext => url.toLowerCase().endsWith(ext));\n\t\t\t\n\t\t\t// 如果URL显式包含支持的视频扩展名，直接返回true\n\t\t\tif (hasVideoExtension) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t\n\t\t\t// 检查常见视频域名 - 针对抖音/头条小程序调整\n\t\t\tconst videoDomains = [\n\t\t\t\t'youku', \n\t\t\t\t'vimeo', \n\t\t\t\t'bilibili', \n\t\t\t\t'qq.com/video', \n\t\t\t\t'douyin', \n\t\t\t\t'bspapp.com', \n\t\t\t\t'ixigua.com', \n\t\t\t\t'kuaishou.com', \n\t\t\t\t'bdstatic.com', // 百度静态资源\n\t\t\t\t'cdn'\n\t\t\t];\n\t\t\tconst hasVideoDomain = videoDomains.some(domain => url.toLowerCase().includes(domain));\n\t\t\t\n\t\t\t// 特殊处理百度静态资源链接\n\t\t\tif (url.toLowerCase().includes('bdstatic.com/mda-')) {\n\t\t\t\t// bdstatic的mda开头视频链接是合法的，即使没有明确的扩展名\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t\n\t\t\t// 尝试检查是否为有效HTTP(S)URL\n\t\t\tconst isHttpUrl = /^https?:\\/\\//.test(url);\n\t\t\t\n\t\t\t// 如果URL中有这些参数，很可能是视频URL\n\t\t\tconst videoParams = ['mp4', 'mov', 'video', 'media', 'play'];\n\t\t\tconst hasVideoParams = videoParams.some(param => url.toLowerCase().includes(param));\n\t\t\t\n\t\t\treturn (hasVideoDomain || hasVideoParams) && isHttpUrl;\n\t\t},\n\t\t\n\t\t// 从内容中提取视频URL\n\t\textractVideoUrlFromContent(content) {\n\t\t\tif (!content || typeof content !== 'string') return null;\n\t\t\t\n\t\t\t// 尝试匹配常见视频URL模式\n\t\t\tconst videoUrlRegexes = [\n\t\t\t\t// 常见视频文件扩展名\n\t\t\t\t/https?:\\/\\/[^\\s<>\"']+\\.(mp4|avi|mov|wmv|flv|mkv|webm|m3u8|3gp|rm|rmvb)/gi,\n\t\t\t\t// 特定视频平台\n\t\t\t\t/https?:\\/\\/v\\.qq\\.com\\/[^\\s<>\"']+/gi,\n\t\t\t\t/https?:\\/\\/www\\.youtube\\.com\\/watch\\?v=[^\\s<>\"']+/gi,\n\t\t\t\t/https?:\\/\\/youtu\\.be\\/[^\\s<>\"']+/gi,\n\t\t\t\t/https?:\\/\\/vimeo\\.com\\/[^\\s<>\"']+/gi,\n\t\t\t\t/https?:\\/\\/www\\.bilibili\\.com\\/video\\/[^\\s<>\"']+/gi,\n\t\t\t\t/https?:\\/\\/www\\.ixigua\\.com\\/[^\\s<>\"']+/gi,\n\t\t\t\t/https?:\\/\\/www\\.kuaishou\\.com\\/[^\\s<>\"']+/gi,\n\t\t\t\t// 通用CDN和文件存储链接\n\t\t\t\t/https?:\\/\\/[^\\s<>\"']+\\.bspapp\\.com\\/[^\\s<>\"']+/gi,\n\t\t\t\t/https?:\\/\\/[^\\s<>\"']+\\.cdn[^\\s<>\"']*\\/[^\\s<>\"']+/gi,\n\t\t\t\t// 微信视频\n\t\t\t\t/https?:\\/\\/mp\\.weixin\\.qq\\.com\\/[^\\s<>\"']*video[^\\s<>\"']+/gi,\n\t\t\t\t/https?:\\/\\/wxsnsdy\\.wxs\\.qq\\.com\\/[^\\s<>\"']+/gi\n\t\t\t];\n\t\t\t\n\t\t\tfor (let regex of videoUrlRegexes) {\n\t\t\t\tconst matches = content.match(regex);\n\t\t\t\tif (matches && matches.length > 0) {\n\t\t\t\t\treturn matches[0];\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn null;\n\t\t},\n\t\t\n\t\t// 跳转到发布页面\n\t\tgoToPublish() {\n\t\t\t// 发布功能已禁用\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '发布功能已禁用',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t});\n\t\t},\n\t\t\n\t\t// 处理图片URL，确保可以正确加载\n\t\tprocessImageUrl(url) {\n\t\t\tif (!url) return '';\n\t\t\t\n\t\t\t// 如果是本地路径或临时路径，直接返回\n\t\t\tif (url.startsWith('/static/') || \n\t\t\t\turl.startsWith('wxfile://') || \n\t\t\t\turl.startsWith('http://tmp/')) {\n\t\t\t\treturn url;\n\t\t\t}\n\t\t\t\n\t\t\ttry {\n\t\t\t\t// 处理URL中的特殊字符\n\t\t\t\t// 对于包含水印参数的URL，可能需要特殊处理\n\t\t\t\tif (url.includes('watermark') || url.includes('imageMogr2')) {\n\t\t\t\t\t// 尝试获取基本URL部分（去除参数）\n\t\t\t\t\tconst baseUrl = url.split('?')[0];\n\t\t\t\t\tif (baseUrl) {\n\t\t\t\t\t\treturn baseUrl;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn url;\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('处理图片URL出错:', e);\n\t\t\t\treturn '';\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 从文章列表中提取最新的图片\n\t\textractLatestArticleImages() {\n\t\t\tconsole.log('提取最新文章图片');\n\t\t\t\n\t\t\t// 如果没有文章数据，直接返回\n\t\t\tif (!this.userArticleData || this.userArticleData.length === 0) {\n\t\t\t\tconsole.log('没有文章数据，无法提取图片');\n\t\t\t\tthis.latestArticleImages = [];\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\t\n\t\t\t// 创建一个包含文章索引的数组，按照文章的创建时间降序排序（最新的优先）\n\t\t\tconst sortedArticleIndices = this.userArticleData\n\t\t\t\t.map((article, index) => ({ index, time: article.create_time || article.createTime || article.time || 0 }))\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\t// 尝试按照时间排序，如果时间相同或不存在，保持原有顺序\n\t\t\t\t\tif (typeof a.time === 'string' && typeof b.time === 'string') {\n\t\t\t\t\t\treturn new Date(b.time) - new Date(a.time);\n\t\t\t\t\t} else if (typeof a.time === 'number' && typeof b.time === 'number') {\n\t\t\t\t\t\treturn b.time - a.time;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn a.index - b.index; // 保持原有顺序\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.map(item => item.index);\n\t\t\t\n\t\t\t// 收集所有图片\n\t\t\tconst allImages = [];\n\t\t\t\n\t\t\t// 根据排序后的索引遍历文章，最多提取5张图片\n\t\t\tfor (let i = 0; i < sortedArticleIndices.length && allImages.length < 5; i++) {\n\t\t\t\tconst articleIndex = sortedArticleIndices[i];\n\t\t\t\tconst article = this.userArticleData[articleIndex];\n\t\t\t\t\n\t\t\t\t// 获取当前文章的所有图片\n\t\t\t\tconst articleImages = this.getArticleImages(article);\n\t\t\t\t\n\t\t\t\tif (articleImages && articleImages.length > 0) {\n\t\t\t\t\t// 添加到总图片集合，避免重复\n\t\t\t\t\tfor (let img of articleImages) {\n\t\t\t\t\t\tif (!allImages.includes(img) && allImages.length < 5) {\n\t\t\t\t\t\t\tallImages.push(img);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 更新最新文章图片数组\n\t\t\tthis.latestArticleImages = allImages;\n\t\t\tconsole.log('提取到的最新文章图片:', this.latestArticleImages);\n\t\t\t\n\t\t\treturn this.latestArticleImages;\n\t\t},\n\t\t\n\t\t// 直接从文章中获取视频URL\n\t\tgetVideoUrlFromArticle(article) {\n\t\t\tif (!article) return null;\n\t\t\t\n\t\t\tconsole.log('尝试从文章中获取视频URL:', article._id);\n\t\t\t\n\t\t\t// 根据优先级顺序检查视频字段\n\t\t\tfor (const field of this.videoFieldPriority) {\n\t\t\t\tif (article[field] && typeof article[field] === 'string' && this.isValidVideoUrl(article[field])) {\n\t\t\t\t\tconsole.log(`在文章中找到视频字段(${field}):`, article[field]);\n\t\t\t\t\treturn article[field];\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 检查videoURL字段是否直接位于文章对象中\n\t\t\tif (article.videoURL && typeof article.videoURL === 'string' && this.isValidVideoUrl(article.videoURL)) {\n\t\t\t\tconsole.log('在文章中找到videoURL字段:', article.videoURL);\n\t\t\t\treturn article.videoURL;\n\t\t\t}\n\t\t\t\n\t\t\t// 检查视频数组\n\t\t\tconst possibleVideoArrayFields = ['videos', 'videoArr', 'video_arr', 'videoList', 'video_list'];\n\t\t\tfor (const field of possibleVideoArrayFields) {\n\t\t\t\tif (article[field] && Array.isArray(article[field]) && article[field].length > 0) {\n\t\t\t\t\tconst videoItem = article[field][0];\n\t\t\t\t\t\n\t\t\t\t\t// 如果数组项是字符串，直接使用\n\t\t\t\t\tif (typeof videoItem === 'string' && this.isValidVideoUrl(videoItem)) {\n\t\t\t\t\t\tconsole.log(`在文章视频数组(${field})中找到视频:`, videoItem);\n\t\t\t\t\t\treturn videoItem;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 如果是对象，尝试获取url字段\n\t\t\t\t\tif (typeof videoItem === 'object') {\n\t\t\t\t\t\tconst possibleUrlProps = ['url', 'src', 'source', 'path', 'videoUrl', 'videoURL'];\n\t\t\t\t\t\tfor (const prop of possibleUrlProps) {\n\t\t\t\t\t\t\tif (videoItem[prop] && typeof videoItem[prop] === 'string' && this.isValidVideoUrl(videoItem[prop])) {\n\t\t\t\t\t\t\t\tconsole.log(`在文章视频数组对象(${field}.${prop})中找到视频:`, videoItem[prop]);\n\t\t\t\t\t\t\t\treturn videoItem[prop];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 从内容中提取视频URL\n\t\t\tif (article.content) {\n\t\t\t\tconst videoUrlMatch = this.extractVideoUrlFromContent(article.content);\n\t\t\t\tif (videoUrlMatch) {\n\t\t\t\t\tconsole.log('从文章内容中提取到视频URL:', videoUrlMatch);\n\t\t\t\t\treturn videoUrlMatch;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tconsole.log('未在文章中找到视频URL');\n\t\t\treturn null;\n\t\t},\n\t\t\n\t\t// 视频长按事件处理（倍速播放）\n\t\thandleVideoLongTap() {\n\t\t\tconsole.log('视频长按，开始倍速播放');\n\t\t\tif (this.videoContext) {\n\t\t\t\t// 设置为2倍速播放\n\t\t\t\tthis.videoContext.playbackRate(2.0);\n\t\t\t\t// 显示倍速提示\n\t\t\t\tthis.isVideoSpeedUp = true;\n\t\t\t\t\n\t\t\t\t// 添加短震动反馈\n\t\t\t\ttry {\n\t\t\t\t\t// 抖音小程序特有API\n\t\t\t\t\tif (typeof tt !== 'undefined' && tt.vibrateShort) {\n\t\t\t\t\t\ttt.vibrateShort({ type: 'light' });\n\t\t\t\t\t} else if (typeof uni !== 'undefined') {\n\t\t\t\t\t\tuni.vibrateShort({ success: () => {} });\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error('震动反馈失败:', e);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 视频触摸结束事件处理（恢复正常速度）\n\t\thandleVideoTouchEnd() {\n\t\t\tconsole.log('视频触摸结束，恢复正常播放速度');\n\t\t\tif (this.videoContext && this.isVideoSpeedUp) {\n\t\t\t\t// 恢复正常播放速度\n\t\t\t\tthis.videoContext.playbackRate(1.0);\n\t\t\t\t// 隐藏倍速提示\n\t\t\t\tthis.isVideoSpeedUp = false;\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 设置视频清晰度选项\n\t\tsetVideoDefinitions(url) {\n\t\t\t// 如果不是mp4格式，不尝试设置清晰度\n\t\t\tif (!url || (!url.toLowerCase().includes('.mp4') && !url.toLowerCase().includes('/mp4'))) {\n\t\t\t\tthis.videoDefinition = null;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 尝试根据当前视频URL构建多清晰度选项\n\t\t\ttry {\n\t\t\t\t// 从URL中提取基础部分，删除末尾的清晰度标识（如果有）\n\t\t\t\tlet baseUrl = url;\n\t\t\t\t\n\t\t\t\t// 清晰度后缀模式1: 如 xxx_720p.mp4\n\t\t\t\tconst resPattern1 = /_(1080p|720p|480p|360p|240p|4k|2k)\\./i;\n\t\t\t\t// 清晰度后缀模式2: 如 xxx_hd.mp4\n\t\t\t\tconst resPattern2 = /_(hd|sd|ld)\\./i;\n\t\t\t\t// 清晰度路径模式: 如 /720/xxx.mp4\n\t\t\t\tconst resPattern3 = /\\/(1080|720|480|360|240|4k|2k|hd|sd|ld)\\//i;\n\t\t\t\t\n\t\t\t\t// 移除清晰度标识，获取基础URL\n\t\t\t\tif (resPattern1.test(baseUrl)) {\n\t\t\t\t\tbaseUrl = baseUrl.replace(resPattern1, '.');\n\t\t\t\t} else if (resPattern2.test(baseUrl)) {\n\t\t\t\t\tbaseUrl = baseUrl.replace(resPattern2, '.');\n\t\t\t\t} else if (resPattern3.test(baseUrl)) {\n\t\t\t\t\t// 此种情况较复杂，暂不处理\n\t\t\t\t\tthis.videoDefinition = null;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 构建清晰度列表\n\t\t\t\tconst definitionList = [];\n\t\t\t\t\n\t\t\t\t// 基础URL（无后缀）和文件扩展名\n\t\t\t\tconst urlWithoutExt = baseUrl.substring(0, baseUrl.lastIndexOf('.'));\n\t\t\t\tconst extension = baseUrl.substring(baseUrl.lastIndexOf('.'));\n\t\t\t\t\n\t\t\t\t// 检查URL是否包含可能的清晰度信息，以确定最高支持的清晰度\n\t\t\t\tconst has4K = url.toLowerCase().includes('4k') || url.toLowerCase().includes('2160p');\n\t\t\t\tconst has2K = url.toLowerCase().includes('2k') || url.toLowerCase().includes('1440p');\n\t\t\t\tconst has1080 = url.toLowerCase().includes('1080') || url.toLowerCase().includes('hd');\n\t\t\t\tconst has720 = url.toLowerCase().includes('720');\n\t\t\t\tconst has480 = url.toLowerCase().includes('480') || url.toLowerCase().includes('sd');\n\t\t\t\t\n\t\t\t\t// 添加清晰度选项，从低到高\n\t\t\t\tdefinitionList.push({\n\t\t\t\t\tname: \"流畅\",\n\t\t\t\t\turl: `${urlWithoutExt}_360p${extension}`\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tdefinitionList.push({\n\t\t\t\t\tname: \"标清\",\n\t\t\t\t\turl: `${urlWithoutExt}_480p${extension}`\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tdefinitionList.push({\n\t\t\t\t\tname: \"高清\",\n\t\t\t\t\turl: `${urlWithoutExt}_720p${extension}`\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (has1080 || has4K || has2K) {\n\t\t\t\t\tdefinitionList.push({\n\t\t\t\t\t\tname: \"超清\",\n\t\t\t\t\t\turl: `${urlWithoutExt}_1080p${extension}`\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (has2K || has4K) {\n\t\t\t\t\tdefinitionList.push({\n\t\t\t\t\t\tname: \"2K\",\n\t\t\t\t\t\turl: `${urlWithoutExt}_2k${extension}`\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (has4K) {\n\t\t\t\t\tdefinitionList.push({\n\t\t\t\t\t\tname: \"4K\",\n\t\t\t\t\t\turl: `${urlWithoutExt}_4k${extension}`\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 设置视频清晰度\n\t\t\t\tthis.videoDefinition = {\n\t\t\t\t\tlist: definitionList,\n\t\t\t\t\t// 默认选择当前清晰度或720P\n\t\t\t\t\tdefaultDefinition: has720 ? \"高清\" : (has480 ? \"标清\" : \"流畅\")\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tconsole.log('设置视频清晰度选项:', this.videoDefinition);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('设置视频清晰度选项失败:', e);\n\t\t\t\tthis.videoDefinition = null;\n\t\t\t}\n\t\t},\n\t\t\n\t\tonGroupChange(e) {\n\t\t\tthis.selectedGroupIndex = e.detail.value;\n\t\t},\n\t\tgoToDetail(item) {\n\t\t\t// 跳转到详情页，传递文章id\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `/pages/article/articleDetail?article_id=${item._id}`\n\t\t\t});\n\t\t},\n\t},\n\n}\n</script>\n\n<template>\n\t<view class=\"userArticleList\">\n\t\t\n\t\t<scroll-view \n\t\t\t@scrolltolower=\"scrolltolower\" \n\t\t\t:scroll-y=\"true\" \n\t\t\tclass=\"scroll-view-article\"\n\t\t\trefresher-enabled\n\t\t\t:refresher-triggered=\"isRefreshing\"\n\t\t\t@refresherrefresh=\"onRefresh\"\n\t\t\tshow-scrollbar=\"true\"\n\t\t\tenable-passive=\"true\" \n\t\t\tenable-back-to-top=\"true\"\n\t\t\tenhanced=\"true\"\n\t\t\tbounces=\"true\"\n\t\t\trefresher-threshold=\"80\"\n\t\t\trefresher-background=\"#f2f2f2\">\n\t\t\t<view class=\"content\">\n\t\t\t\t<!-- 用户信息头部 -->\n\t\t\t\t<view class=\"head\">\n\t\t\t\t\t<user-header @contact=\"handleContact\" :articleTotal=\"articleTotal\"\n\t\t\t\t\t\t:userInfo=\"userArticleInfo\"></user-header>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 视频播放组件 -->\n\t\t\t\t<view class=\"video-container\" v-if=\"videoUrl && videoUrl.length > 0\">\n\t\t\t\t\t<video \n\t\t\t\t\t\tid=\"myVideo\"\n\t\t\t\t\t\t:src=\"videoUrl\"\n\t\t\t\t\t\tclass=\"video-player\"\n\t\t\t\t\t\tobject-fit=\"contain\" \n\t\t\t\t\t\tcontrols \n\t\t\t\t\t\t@play=\"onVideoPlay\"\n\t\t\t\t\t\t@pause=\"onVideoPause\"\n\t\t\t\t\t\t:loop=\"false\"\n\t\t\t\t\t\tenable-progress-gesture\n\t\t\t\t\t\tenable-play-gesture\n\t\t\t\t\t\tshow-fullscreen-btn\n\t\t\t\t\t\tshow-play-btn\n\t\t\t\t\t\tshow-center-play-btn\n\t\t\t\t\t\tinitial-time=\"0\"\n\t\t\t\t\t\tcodec=\"hardware\"\n\t\t\t\t\t\thttp-cache\n\t\t\t\t\t\tdirection=\"0\"\n\t\t\t\t\t\tshow-mute-btn\n\t\t\t\t\t\tenable-danmu=\"false\"\n\t\t\t\t\t>\n\t\t\t\t\t</video>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 文章列表 -->\n\t\t\t\t<articleItem v-if=\"userArticleData && userArticleData.length > 0\"\n\t\t\t\t\t@preview=\"goToDetail\"\n\t\t\t\t\t@contact=\"handleContact\"\n\t\t\t\t\t@delete=\"handleDelete\" v-for=\"item in userArticleData\" :item=\"item\" :key=\"item._id\"\n\t\t\t\t\t:avatarClickEnabled=\"avatarClickEnabled\">\n\t\t\t\t</articleItem>\n\t\t\t\t<view v-else class=\"empty-state\">\n\t\t\t\t\t<text>暂无文章</text>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 加载状态 - 优化显示 -->\n\t\t\t\t<view style=\"margin-bottom: 120rpx; padding-bottom: 90rpx;\">\n\t\t\t\t\t<uni-load-more color=\"#d6d6d6\" :status=\"status\" :content-text=\"loadMoreText\" />\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 底部安全区域间距 -->\n\t\t\t\t<view class=\"safe-area-inset-bottom\"></view>\n\t\t\t</view>\n\t\t</scroll-view>\n\t</view>\n</template>\n\n<style lang=\"scss\" scoped>\n\t.userArticleList {\n\t\theight: 100vh;\n\t\tbackground-color: $pyq-pages-bg-color;\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\ttouch-action: pan-y; /* 优化触摸响应 */\n\n\t\t.content {\n\t\t\tpadding-bottom: env(safe-area-inset-bottom);\n\t\t\tpadding: 20rpx;\n\t\t\t-webkit-overflow-scrolling: touch; /* iOS流畅滚动 */\n\n\t\t\t.head {\n\t\t\t\tmargin-bottom: 2rpx;\n\t\t\t}\n\t\t\t\n\t\t\t.empty-state {\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\t\t\t\tpadding: 40rpx 0;\n\t\t\t\tcolor: #999;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t}\n\t\t}\n\t\t\n\t\t.scroll-view-article {\n\t\t\tflex: 1;\n\t\t\theight: 0; /* 使用flex布局时，设置height为0使其自动扩展 */\n\t\t\tpadding-bottom: 120rpx; /* 为底部按钮留出空间 */\n\t\t\t-webkit-overflow-scrolling: touch; /* iOS流畅滚动 */\n\t\t}\n\t\t\n\t\t/* 文本省略样式 */\n\t\t.ellipsis {\n\t\t\twhite-space: nowrap;\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t}\n\t\t\n\t\t.ellipsis-2 {\n\t\t\tdisplay: -webkit-box;\n\t\t\t-webkit-box-orient: vertical;\n\t\t\t-webkit-line-clamp: 2;\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t\tword-break: break-all;\n\t\t}\n\t\t\n\t\t/* 正方形图片样式 */\n\t\t.square-image {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tborder-radius: 8rpx;\n\t\t\tobject-fit: cover; /* 确保图片填充容器并裁剪到最短边 */\n\t\t}\n\t\t\n\t\t.safe-area-inset-bottom {\n\t\t\theight: 0rpx;\n\t\t\tpadding-bottom: env(safe-area-inset-bottom);\n\t\t}\n\t\t\n\t\t/* 防止滚动时出现白色间隙 */\n\t\toverflow: hidden;\n\t}\n\t\n\t/* 视频播放器相关样式 */\n\t.video-container {\n\t\tposition: relative;\n\t\tmargin: 20rpx auto 20rpx;\n\t\tborder-radius: 12rpx;\n\t\toverflow: hidden;\n\t}\n\t\n\t.video-player {\n\t\twidth: 100%;\n\t\theight: 420rpx; /* 16:9 宽高比 */\n\t\tbackground-color: #000;\n\t\tborder-radius: 5rpx;\n\t}\n\t\n\t.join-group-btn {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 90%;\n\t\tmargin: 32rpx auto 0 auto;\n\t\tpadding: 24rpx 0;\n\t\tfont-size: 36rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #fff;\n\t\tbackground: linear-gradient(90deg, #ff5b78 0%, #ff8a00 100%);\n\t\tborder: none;\n\t\tborder-radius: 48rpx;\n\t\tbox-shadow: 0 8rpx 32rpx rgba(255,91,120,0.18);\n\t\ttext-align: center;\n\t\tletter-spacing: 2rpx;\n\t\ttransition: background 0.2s;\n\t\t.group-icon {\n\t\t\twidth: 48rpx;\n\t\t\theight: 48rpx;\n\t\t\tmargin-right: 16rpx;\n\t\t}\n\t}\n\t.join-group-btn:active {\n\t\tbackground: linear-gradient(90deg, #ff8a00 0%, #ff5b78 100%);\n\t\topacity: 0.92;\n\t}\n</style>\n\n<!-- 移除全局样式中的标签选择器，避免微信小程序的限制 -->\n<!-- 注意：这些样式应该在组件内部使用类选择器实现，而不是在这里全局覆盖 -->","import MiniProgramPage from 'E:/dy2/pages/userArticleList/userArticleList.vue'\ntt.createPage(MiniProgramPage)"],"names":["useUserInfoStore","uni","uniCloud"],"mappings":"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"}