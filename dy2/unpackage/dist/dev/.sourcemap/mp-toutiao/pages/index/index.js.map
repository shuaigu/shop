{"version":3,"file":"index.js","sources":["pages/index/index.vue","D:/代码测试/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<script setup>\n\timport { nextTick, onMounted, ref, onUnmounted, computed, watch, onActivated } from 'vue';\n\timport { testLogin } from '@/utils/isLogin'\n\timport { useUserInfoStore } from '@/store/user.js'\n\timport { onPullDownRefresh, onReachBottom, onPageScroll, onShow, onBackPress } from '@dcloudio/uni-app'\n\t\n\t// 加载状态管理器\n\tconst loadingManager = {\n\t\tisLoading: false,\n\t\tshowLoading(title = '加载中...', mask = true) {\n\t\t\t// 只设置状态，不显示加载动画\n\t\t\tthis.isLoading = true;\n\t\t\t// 注释掉显示加载动画的代码\n\t\t\t// uni.showLoading({\n\t\t\t// \ttitle: title,\n\t\t\t// \tmask: mask\n\t\t\t// });\n\t\t},\n\t\thideLoading() {\n\t\t\tthis.isLoading = false;\n\t\t\t// 注释掉隐藏加载动画的代码\n\t\t\t// uni.hideLoading();\n\t\t}\n\t};\n\t\n\t// 头像点击状态控制\n\tconst avatarClickState = ref(true)\n\t\n\t// 获取权限状态\n\tconst getSendOnState = async () => {\n\t\ttry {\n\t\t\tconsole.log('首页正在获取按钮状态...');\n\t\t\t\n\t\t\t// 添加请求控制器和超时控制\n\t\t\tconst controller = new AbortController();\n\t\t\tconst timeoutId = setTimeout(() => controller.abort(), 5000); // 5秒超时\n\t\t\t\n\t\t\t// 标记请求状态\n\t\t\tconst requestInProgress = ref(true);\n\t\t\t\n\t\t\t// 使用Promise.race同时进行请求和超时控制\n\t\t\tconst sendOnApi = uniCloud.importObject('sendOn', { customUI: true });\n\t\t\tconst res = await Promise.race([\n\t\t\t\tsendOnApi.get(),\n\t\t\t\tnew Promise((_, reject) => {\n\t\t\t\t\t// 监听页面销毁事件，如果页面被销毁，则中断请求\n\t\t\t\t\tuni.$once('index-page-destroyed', () => {\n\t\t\t\t\t\tconsole.log('页面销毁，中断请求');\n\t\t\t\t\t\treject(new Error('页面已销毁，请求被中断'));\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t]).finally(() => {\n\t\t\t\tclearTimeout(timeoutId);\n\t\t\t\trequestInProgress.value = false;\n\t\t\t});\n\t\t\t\n\t\t\tif (res && res.data && res.data.length > 0) {\n\t\t\t\t// 获取头像点击状态\n\t\t\t\tconst serverAvatarClickState = res.data[0].avatarClick !== undefined ? res.data[0].avatarClick : true;\n\t\t\t\t\n\t\t\t\t// 更新头像点击状态\n\t\t\t\tavatarClickState.value = serverAvatarClickState;\n\t\t\t\t\n\t\t\t\tconsole.log('首页头像点击状态:', avatarClickState.value);\n\t\t\t} else {\n\t\t\t\tconsole.log('获取按钮状态返回空数据，使用默认值');\n\t\t\t\t// 使用默认值\n\t\t\t\tavatarClickState.value = true;\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t// 判断是否为请求中断错误\n\t\t\tif (err.message && (err.message.includes('abort') || err.message.includes('中断'))) {\n\t\t\t\tconsole.log('获取按钮状态请求被中断，使用默认值');\n\t\t\t} else {\n\t\t\t\tconsole.error('获取按钮状态失败:', err);\n\t\t\t}\n\t\t\t\n\t\t\t// 无论什么错误，确保使用默认值\n\t\t\tavatarClickState.value = true;\n\t\t}\n\t}\n\t\n\t// 用户状态管理\n\tconst userStore = useUserInfoStore()\n\tconst paging = ref(null)\n\t// 分类\n\tconst cateList = ref([])\n\tconst activeIndex = ref(0)\n\t// 移除排序相关变量\n\tconst currentCateId = ref('');  // 当前选中的分类ID\n\t\n\t// 分类api\n\tconst cateApi = uniCloud.importObject('cateDy', { customUI: true })\n\t// 文章api\n\tconst articleApi = uniCloud.importObject('articleDy', { customUI: true })\n\t// 扩展存储api\n\tconst extStorageCo = uniCloud.importObject('fabuWx', { customUI: true })\n\t\n\t// 每页加载数据条数\n\tconst pageSize = 8\n\n\t// 获取分类\n\tconst cateListGet = async () => {\n\t\ttry {\n\t\t\t\n\t\t\tconsole.log('开始获取分类数据...');\n\t\t\t\n\t\t\t// 直接使用云数据库获取分类\n\t\t\tconst db = uniCloud.database();\n\t\t\t// 使用正确的集合名称：cateList\n\t\t\tconst collection = db.collection('cateList');\n\t\t\t\n\t\t\t// 查询所有可见的分类，按排序权重降序排列\n\t\t\tconst res = await collection.where({\n\t\t\t\tis_visible: true\n\t\t\t}).orderBy(\"sort\", \"desc\").get();\n\t\t\t\n\t\t\tconsole.log('分类数据获取结果:', res);\n\t\t\t\n\t\t\t// 检查返回结果\n\t\t\tif (res && res.data && res.data.length > 0) {\n\t\t\t\t// 处理分类数据，确保每个分类都有图标\n\t\t\t\tlet processedCateList = res.data.map(cate => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...cate,\n\t\t\t\t\t\tcate_img: cate.cate_img || getCategoryIcon(cate)\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// 添加\"全部\"分类到第一个位置\n\t\t\t\tconst allCategory = {\n\t\t\t\t\t_id: 'all',\n\t\t\t\t\tcate_name: '全部',\n\t\t\t\t\tcate_img: '/static/images/defalut.png',\n\t\t\t\t\tsort: 9999 // 确保排序权重最高\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// 检查是否已经有\"全部\"分类\n\t\t\t\tconst hasAllCategory = processedCateList.some(cate => \n\t\t\t\t\tcate.cate_name === '全部' || cate._id === 'all'\n\t\t\t\t);\n\t\t\t\t\n\t\t\t\t// 如果没有\"全部\"分类，添加到列表开头\n\t\t\t\tif (!hasAllCategory) {\n\t\t\t\t\tprocessedCateList.unshift(allCategory);\n\t\t\t\t} else {\n\t\t\t\t\t// 如果有\"全部\"分类，确保它在第一位\n\t\t\t\t\tconst allIndex = processedCateList.findIndex(cate => \n\t\t\t\t\t\tcate.cate_name === '全部' || cate._id === 'all'\n\t\t\t\t\t);\n\t\t\t\t\tif (allIndex > 0) {\n\t\t\t\t\t\tconst allCate = processedCateList.splice(allIndex, 1)[0];\n\t\t\t\t\t\tprocessedCateList.unshift(allCate);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 设置分类列表\n\t\t\t\tcateList.value = processedCateList;\n\t\t\t\t\n\t\t\t\t// 缓存分类数据，以便下次加载失败时使用\n\t\t\t\ttry {\n\t\t\t\t\tuni.setStorageSync('cachedCategories', processedCateList);\n\t\t\t\t} catch (cacheErr) {\n\t\t\t\t\tconsole.warn('缓存分类数据失败:', cacheErr);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 默认选中第一个分类（全部）\n\t\t\t\tcurrentCateId.value = processedCateList[0]._id;\n\t\t\t\tactiveIndex.value = 0;\n\t\t\t\t\n\t\t\t\t// 重置页码并获取文章\n\t\t\t\tpageNo.value = 1;\n\t\t\t\tgetArticleList(currentCateId.value);\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tconsole.warn('数据库中没有找到分类数据，尝试使用API方式获取');\n\t\t\t\t\n\t\t\t\t// 尝试使用API方式获取\n\t\t\t\tconst apiRes = await cateApi.get();\n\t\t\t\t\n\t\t\t\tif (apiRes && apiRes.data && apiRes.data.length > 0) {\n\t\t\t\t\tconsole.log('API获取分类成功:', apiRes.data.length, '个分类');\n\t\t\t\t\t\n\t\t\t\t\t// 处理分类数据\n\t\t\t\t\tlet processedCateList = apiRes.data.map(cate => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...cate,\n\t\t\t\t\t\t\tcate_img: getCategoryIcon(cate)\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t// 添加\"全部\"分类到第一个位置\n\t\t\t\t\tconst allCategory = {\n\t\t\t\t\t\t_id: 'all',\n\t\t\t\t\t\tcate_name: '全部',\n\t\t\t\t\t\tcate_img: '/static/images/defalut.png',\n\t\t\t\t\t\tsort: 9999 // 确保排序权重最高\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\t// 检查是否已经有\"全部\"分类\n\t\t\t\t\tconst hasAllCategory = processedCateList.some(cate => \n\t\t\t\t\t\tcate.cate_name === '全部' || cate._id === 'all'\n\t\t\t\t\t);\n\t\t\t\t\t\n\t\t\t\t\t// 如果没有\"全部\"分类，添加到列表开头\n\t\t\t\t\tif (!hasAllCategory) {\n\t\t\t\t\t\tprocessedCateList.unshift(allCategory);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 如果有\"全部\"分类，确保它在第一位\n\t\t\t\t\t\tconst allIndex = processedCateList.findIndex(cate => \n\t\t\t\t\t\t\tcate.cate_name === '全部' || cate._id === 'all'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (allIndex > 0) {\n\t\t\t\t\t\t\tconst allCate = processedCateList.splice(allIndex, 1)[0];\n\t\t\t\t\t\t\tprocessedCateList.unshift(allCate);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 设置分类列表\n\t\t\t\t\tcateList.value = processedCateList;\n\t\t\t\t\t\n\t\t\t\t\t// 缓存分类数据\n\t\t\t\t\ttry {\n\t\t\t\t\t\tuni.setStorageSync('cachedCategories', processedCateList);\n\t\t\t\t\t} catch (cacheErr) {\n\t\t\t\t\t\tconsole.warn('缓存分类数据失败:', cacheErr);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 默认选中第一个分类\n\t\t\t\t\tcurrentCateId.value = processedCateList[0]._id;\n\t\t\t\t\tactiveIndex.value = 0;\n\t\t\t\t\t\n\t\t\t\t\t// 重置页码并获取文章\n\t\t\t\t\tpageNo.value = 1;\n\t\t\t\t\tgetArticleList(currentCateId.value);\n\t\t\t\t} else {\n\t\t\t\t\t// 如果API也没有返回数据，尝试从缓存加载\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst cachedCates = uni.getStorageSync('cachedCategories');\n\t\t\t\t\t\tif (cachedCates && cachedCates.length > 0) {\n\t\t\t\t\t\t\tcateList.value = cachedCates;\n\t\t\t\t\t\t\tconsole.log('使用缓存的分类数据');\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 默认选中第一个分类\n\t\t\t\t\t\t\tif (cachedCates.length > 0) {\n\t\t\t\t\t\t\t\tcurrentCateId.value = cachedCates[0]._id;\n\t\t\t\t\t\t\t\tactiveIndex.value = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 获取文章数据\n\t\t\t\t\t\t\tgetArticleList(currentCateId.value);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// 如果缓存中也没有数据，使用默认分类\n\t\t\t\t\t\t\tconsole.log('使用默认分类数据');\n\t\t\t\t\t\t\tconst defaultCategories = [\n\t\t\t\t\t\t\t\t{ _id: 'all', cate_name: '全部', cate_img: '/static/images/defalut.png' },\n\t\t\t\t\t\t\t\t{ _id: 'default2', cate_name: '餐饮', cate_img: '/static/images/defalut.png' },\n\t\t\t\t\t\t\t\t{ _id: 'default3', cate_name: '购物', cate_img: '/static/images/defalut.png' },\n\t\t\t\t\t\t\t\t{ _id: 'default4', cate_name: '服务', cate_img: '/static/images/defalut.png' }\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcateList.value = defaultCategories;\n\t\t\t\t\t\t\tcurrentCateId.value = defaultCategories[0]._id;\n\t\t\t\t\t\t\tactiveIndex.value = 0;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 获取所有文章\n\t\t\t\t\t\t\tgetArticleList();\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (cacheErr) {\n\t\t\t\t\t\tconsole.error('读取缓存分类失败:', cacheErr);\n\t\t\t\t\t\t// 获取所有文章\n\t\t\t\t\t\tgetArticleList();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error('获取分类失败:', err);\n\t\t\t\n\t\t\t// 尝试从缓存加载\n\t\t\ttry {\n\t\t\t\tconst cachedCates = uni.getStorageSync('cachedCategories');\n\t\t\t\tif (cachedCates && cachedCates.length > 0) {\n\t\t\t\t\tcateList.value = cachedCates;\n\t\t\t\t\tconsole.log('使用缓存的分类数据');\n\t\t\t\t\t\n\t\t\t\t\t// 默认选中第一个分类\n\t\t\t\t\tif (cachedCates.length > 0) {\n\t\t\t\t\t\tcurrentCateId.value = cachedCates[0]._id;\n\t\t\t\t\t\tactiveIndex.value = 0;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 获取文章数据\n\t\t\t\t\tgetArticleList(currentCateId.value);\n\t\t\t\t} else {\n\t\t\t\t\t// 使用默认分类\n\t\t\t\t\tconst defaultCategories = [\n\t\t\t\t\t\t{ _id: 'all', cate_name: '全部', cate_img: '/static/images/defalut.png' },\n\t\t\t\t\t\t{ _id: 'default2', cate_name: '餐饮', cate_img: '/static/images/defalut.png' },\n\t\t\t\t\t\t{ _id: 'default3', cate_name: '购物', cate_img: '/static/images/defalut.png' },\n\t\t\t\t\t\t{ _id: 'default4', cate_name: '服务', cate_img: '/static/images/defalut.png' }\n\t\t\t\t\t];\n\t\t\t\t\t\n\t\t\t\t\tcateList.value = defaultCategories;\n\t\t\t\t\tcurrentCateId.value = defaultCategories[0]._id;\n\t\t\t\t\tactiveIndex.value = 0;\n\t\t\t\t\t\n\t\t\t\t\t// 获取所有文章\n\t\t\t\t\tgetArticleList();\n\t\t\t\t}\n\t\t\t} catch (cacheErr) {\n\t\t\t\tconsole.error('读取缓存分类失败:', cacheErr);\n\t\t\t\t// 获取所有文章\n\t\t\t\tgetArticleList();\n\t\t\t}\n\t\t} finally {\n\t\t\tuni.hideLoading();\n\t\t}\n\t}\n\tconst pageNo = ref(1)\n\t\n\t// 切换分类\n\tconst hanleHeadTab = (index, id) => {\n\t\tactiveIndex.value = index\n\t\tpageNo.value = 1\n\t\tstatus.value = 'more'\n\t\t\n\t\t// 设置当前分类ID\n\t\tcurrentCateId.value = id;\n\t\tgetArticleList(id);\n\t}\n\t\n\t// 初始文章数据\n\tconst articleList = ref([])\n\tlet tempCateId = ''\n\t// 加载状态\n\tconst isLoading = ref(true);\n\t\n\t// 获取文章\n\tconst getArticleList = async (cate_id) => {\n\t\t// 避免重复请求\n\t\tif (loadingManager.isLoading) return;\n\t\t\n\t\ttry {\n\t\t\t// 保存临时分类ID，如果是\"全部\"分类则传空字符串\n\t\t\ttempCateId = (cate_id === 'all') ? '' : (cate_id || '');\n\t\t\tconsole.log(tempCateId, '临时id')\n\t\t\t\n\t\t\t// 显示加载提示\n\t\t\tloadingManager.showLoading('加载文章列表...', true)\n\t\t\tisLoading.value = true;\n\t\t\t\n\t\t\t// 调用API时传递分类ID参数，始终按最新排序\n\t\t\tconst res = await articleApi.getArticle(tempCateId, pageNo.value, pageSize)\n\t\t\tconsole.log(res)\n\t\t\tarticleList.value = res.data\n\t\t} catch (err) {\n\t\t\tconsole.log(err)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '加载失败，请重试',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t} finally {\n\t\t\t// 确保请求完成后隐藏加载动画\n\t\t\tloadingManager.hideLoading()\n\t\t\tisLoading.value = false;\n\t\t}\n\t}\n\n\t// 监听下拉刷新\n\tonPullDownRefresh(async () => {\n\t\t// 避免重复请求\n\t\tif (loadingManager.isLoading) {\n\t\t\tuni.stopPullDownRefresh();\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tpageNo.value = 1\n\t\tstatus.value = 'more'\n\t\ttry {\n\t\t\t// 下拉刷新时，获取当前分类下的文章\n\t\t\tawait getArticleList(tempCateId)\n\t\t} catch (err) {\n\t\t\tconsole.error('下拉刷新失败:', err)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '刷新失败，请重试',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t} finally {\n\t\t\t// 无论成功或失败，都停止下拉刷新\n\t\t\tuni.stopPullDownRefresh()\n\t\t}\n\t})\n\n\t// 加载更多\n\tconst status = ref('more') // 初始状态为 'more'\n\n\t// 文章列表触底时触发\n\tonReachBottom(async () => {\n\t\tconsole.log('触底')\n\t\t// 如果已经是 'noMore' 状态或正在加载中，直接返回\n\t\tif (status.value === 'noMore' || loadingManager.isLoading) return\n\t\t\n\t\t// 'loading' 状态\n\t\tstatus.value = 'loading'\n\n\t\ttry {\n\t\t\t// 显示加载提示\n\t\t\tloadingManager.showLoading('加载更多...', false)\n\t\t\t\n\t\t\t// 加载更多数据\n\t\t\tpageNo.value++\n\t\t\tconst res = await articleApi.getArticle(tempCateId, pageNo.value, pageSize)\n\n\t\t\t// 拼接新老数据\n\t\t\tarticleList.value = [...articleList.value, ...res.data]\n\n\t\t\t// 根据数据情况设置状态\n\t\t\tif (res.data.length > 0) {\n\t\t\t\tstatus.value = 'more' // 还有更多数据\n\t\t\t} else {\n\t\t\t\tstatus.value = 'noMore' // 没有更多数据了\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error('加载更多失败:', err)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '加载失败，请重试',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\tstatus.value = 'more' // 失败时恢复为 'more' 状态\n\t\t} finally {\n\t\t\t// 确保请求完成后隐藏加载动画\n\t\t\tloadingManager.hideLoading()\n\t\t}\n\t})\n\n\n\t// 处理删除\n\tconst handleDelete = async (articleId) => {\n\t\ttry {\n\t\t\t// 添加确认提示\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '确认删除',\n\t\t\t\tcontent: '确定要删除这篇文章吗？',\n\t\t\t\tsuccess: async (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t// 显示加载提示\n\t\t\t\t\t\tloadingManager.showLoading('删除中...')\n\t\t\t\t\t\t\n\t\t\t\t\t\tconsole.log('正在删除文章ID:', articleId, '用户ID:', userStore.userInfo.uid)\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 确保用户已登录\n\t\t\t\t\t\tif (!userStore.userInfo.uid) {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '请先登录',\n\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tloadingManager.hideLoading()\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 调用接口删除文章\n\t\t\t\t\t\tconst res = await articleApi.del(articleId, userStore.userInfo.uid)\n\t\t\t\t\t\tconsole.log('删除接口返回结果:', res)\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (res && res.deleted) {\n\t\t\t\t\t\t\t// 删除成功，从列表中移除该文章\n\t\t\t\t\t\t\tconst index = articleList.value.findIndex(item => item._id === articleId)\n\t\t\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\t\t\tarticleList.value.splice(index, 1)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tloadingManager.hideLoading()\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '删除成功',\n\t\t\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthrow new Error(res.message || '删除失败，请重试')\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t} catch (err) {\n\t\t\tconsole.error('删除文章失败:', err)\n\t\t\tloadingManager.hideLoading()\n\t\t\tuni.showToast({\n\t\t\t\ttitle: err.message || '删除失败，请重试',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t}\n\t}\n\n\t// 联系电话\n\tconst handelContact = (mobile) => {\n\t\tconsole.log(mobile)\n\t\tif ( !userStore.userInfo.isLogin ) {\n\t\t\treturn testLogin()\n\t\t}\n\n\t\tif ( mobile === '未填写' ) {\n\t\t\treturn uni.showToast({\n\t\t\t\ticon: 'none',\n\t\t\t\ttitle: '他并不想让人联系'\n\t\t\t})\n\t\t}\n\n\t\t// 抖音小程序环境下\n\t\t// #ifdef MP-TOUTIAO\n\t\tconsole.log('运行在抖音小程序环境');\n\t\t\n\t\ttry {\n\t\t\t// 直接尝试拨打，如果失败会触发fail回调\n\t\t\tuni.makePhoneCall({\n\t\t\t\tphoneNumber: mobile,\n\t\t\t\tsuccess: function() {\n\t\t\t\t\tconsole.log('拨打电话成功');\n\t\t\t\t},\n\t\t\t\tfail: function(err) {\n\t\t\t\t\tconsole.error('拨打电话失败:', err);\n\t\t\t\t\t\n\t\t\t\t\t// 如果是权限问题，显示带复制功能的提示框\n\t\t\t\t\tif (err.errNo === 10202 || err.errNo === 10101 || err.errMsg.includes('auth deny') || err.errMsg.includes('not declared in the privacy')) {\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\tcontent: `由于平台限制，无法直接拨打电话。您可以复制此号码(${mobile})后手动拨打。`,\n\t\t\t\t\t\t\tconfirmText: '复制号码',\n\t\t\t\t\t\t\tcancelText: '取消',\n\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t// 复制到剪贴板\n\t\t\t\t\t\t\t\t\tuni.setClipboardData({\n\t\t\t\t\t\t\t\t\t\tdata: mobile,\n\t\t\t\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: '电话号码已复制',\n\t\t\t\t\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 其他错误\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\ttitle: '拨打电话失败，请手动拨打'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tconsole.error('拨打电话异常:', error);\n\t\t\t// 异常情况下，提供复制号码的选项\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '无法拨打电话',\n\t\t\t\tcontent: `您可以复制此号码(${mobile})后手动拨打`,\n\t\t\t\tconfirmText: '复制号码',\n\t\t\t\tcancelText: '取消',\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tuni.setClipboardData({\n\t\t\t\t\t\t\tdata: mobile,\n\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '电话号码已复制',\n\t\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// #endif\n\t\t\n\t\t// 非抖音小程序环境\n\t\t// #ifndef MP-TOUTIAO\n\t\tuni.makePhoneCall({\n\t\t\tphoneNumber: mobile\n\t\t});\n\t\t// #endif\n\t}\n\n\n\n\t// 跳转用户列表\n\tconst handelGoUserList = (user_id) => {\n\t\t// 检查头像点击功能是否启用\n\t\tif (!avatarClickState.value) {\n\t\t\tconsole.log('头像点击功能已禁用')\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '联系管理员',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\t\n\t\tuni.navigateTo({\n\t\t\turl: `/pages/userArticleList/userArticleList?userId=${user_id}`\n\t\t})\n\t}\n\t\n\t\n\n\t// 页面加载完毕\n\tonMounted(() => {\n\t\t// 直接获取分类和文章列表\n\t\tcateListGet();\n\t\t\n\t\t// 监听文章发布成功事件\n\t\tuni.$on('articlePublished', (articleId) => {\n\t\t\tconsole.log('收到文章发布成功事件，文章ID:', articleId)\n\t\t\t// 重新获取文章列表\n\t\t\tpageNo.value = 1\n\t\t\tstatus.value = 'more'\n\t\t\tgetArticleList(tempCateId)\n\t\t\t\n\t\t\t// 显示发布成功提示\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '发布成功，内容已更新',\n\t\t\t\ticon: 'success',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t})\n\t\t\n\t\t// 监听一次性刷新事件 - 从发布页面跳转回来时只刷新一次\n\t\tuni.$on('refreshIndexOnce', (articleId) => {\n\t\t\tconsole.log('收到一次性刷新事件，文章ID:', articleId)\n\t\t\t// 重置页码并刷新文章列表\n\t\t\tpageNo.value = 1\n\t\t\tstatus.value = 'more'\n\t\t\t\n\t\t\t// 显示加载提示\n\t\t\t// uni.showLoading({\n\t\t\t//\ttitle: '正在刷新内容...',\n\t\t\t//\tmask: true\n\t\t\t// })\n\t\t\t\n\t\t\t// 延迟一点执行，确保页面已完全加载\n\t\t\tsetTimeout(() => {\n\t\t\t\tgetArticleList(tempCateId).then(() => {\n\t\t\t\t\t// 刷新完成后隐藏加载提示\n\t\t\t\t\t// uni.hideLoading()\n\t\t\t\t\t\n\t\t\t\t\t// 如果有文章ID，尝试滚动到该文章\n\t\t\t\t\tif (articleId && articleList.value.length > 0) {\n\t\t\t\t\t\t// 查找新发布的文章在列表中的位置\n\t\t\t\t\t\tconst index = articleList.value.findIndex(item => item._id === articleId)\n\t\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\t\tconsole.log('找到新发布的文章，位置:', index)\n\t\t\t\t\t\t\t// 可以在这里添加滚动到该文章的逻辑\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tconsole.error('刷新文章列表失败:', err)\n\t\t\t\t\t// uni.hideLoading()\n\t\t\t\t})\n\t\t\t}, 300)\n\t\t})\n\t\t\n\t\t// 监听浏览量更新事件\n\t\tuni.$on('viewCountUpdated', (articleId) => {\n\t\t\tupdateLocalViewCount(articleId)\n\t\t})\n\t\t\n\t\t// 开启平台原生页面分享\n\t\tuni.showShareMenu({\n\t\t\twithShareTicket: true\n\t\t})\n\t\t\n\t\t// 监听头像点击状态变化事件\n\t\tuni.$on('avatarClickChanged', (newState) => {\n\t\t\tconsole.log('首页收到头像点击状态变化事件:', newState);\n\t\t\tavatarClickState.value = newState;\n\t\t})\n\t})\n\n\t// 在页面卸载时移除事件监听\n\tonUnmounted(() => {\n\t\tuni.$off('articlePublished')\n\t\tuni.$off('refreshIndexOnce') // 移除一次性刷新事件监听\n\t\tuni.$off('viewCountUpdated')\n\t\tuni.$off('avatarClickChanged') // 移除头像点击状态监听\n\t\t\n\t\t// 发出页面销毁事件，用于中断正在进行的请求\n\t\tuni.$emit('index-page-destroyed')\n\t})\n\t\n\t// 使用正确的页面滚动生命周期函数\n\tonPageScroll(() => {\n\t\t// 确保滚动时隐藏加载动画\n\t\tloadingManager.hideLoading()\n\t})\n\n\t// 添加返回事件处理\n\tlet lastRefreshTime = 0;\n\tonBackPress((e) => {\n\t\tconsole.log('检测到返回按钮事件', e);\n\t\t\n\t\t// 获取当前时间\n\t\tconst now = Date.now();\n\t\t\n\t\t// 如果距离上次刷新时间不足1秒，不重复刷新\n\t\tif (now - lastRefreshTime < 1000) {\n\t\t\tconsole.log('距离上次刷新时间不足1秒，跳过刷新');\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\t// 记录本次刷新时间\n\t\tlastRefreshTime = now;\n\t\t\n\t\t// 检查是否从发布页面返回\n\t\tconst pages = getCurrentPages();\n\t\tconst currentPage = pages[pages.length - 1];\n\t\t\n\t\tif (currentPage && currentPage.route === 'pages/index/index') {\n\t\t\tconsole.log('当前在首页，检查是否需要刷新');\n\t\t\t\n\t\t\t// 延迟执行刷新，避免与页面切换冲突\n\t\t\tsetTimeout(() => {\n\t\t\t\t// 重置页码并刷新文章列表\n\t\t\t\tpageNo.value = 1;\n\t\t\t\tstatus.value = 'more';\n\t\t\t\tgetArticleList(tempCateId);\n\t\t\t}, 300);\n\t\t}\n\t\t\n\t\t// 返回false表示不拦截返回事件\n\t\treturn false;\n\t});\n\n\t// 添加页面激活事件处理（用于处理页面从后台切回前台的情况）\n\tonActivated(() => {\n\t\tconsole.log('首页被激活');\n\t\t\n\t\t// 获取当前时间\n\t\tconst now = Date.now();\n\t\t\n\t\t// 如果距离上次刷新时间超过5秒，自动刷新\n\t\tif (now - lastRefreshTime > 5000) {\n\t\t\tconsole.log('页面激活，自动刷新内容');\n\t\t\tlastRefreshTime = now;\n\t\t\t\n\t\t\t// 重置页码并刷新文章列表\n\t\t\tpageNo.value = 1;\n\t\t\tstatus.value = 'more';\n\t\t\tgetArticleList(tempCateId);\n\t\t}\n\t});\n\n\t// 添加这个函数来获取分类图标，移除位置相关代码\n\tconst getCategoryIcon = (category) => {\n\t\t// 如果分类对象有cate_img字段且不为空，直接使用\n\t\tif (category && category.cate_img && category.cate_img.length > 4) {\n\t\t\t// 确保图标URL格式正确\n\t\t\tif (category.cate_img.startsWith('http') || category.cate_img.startsWith('/')) {\n\t\t\t\treturn category.cate_img;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// 根据分类名称选择默认图标 - 可以根据关键字提供特定图标\n\t\tif (category && category.cate_name) {\n\t\t\t// 分类名称关键词映射\n\t\t\tconst iconMapping = {\n\t\t\t\t'餐饮': '/static/images/category/food.png',\n\t\t\t\t'美食': '/static/images/category/food.png',\n\t\t\t\t'购物': '/static/images/category/shopping.png',\n\t\t\t\t'商场': '/static/images/category/shopping.png',\n\t\t\t\t'教育': '/static/images/category/education.png',\n\t\t\t\t'学校': '/static/images/category/education.png',\n\t\t\t\t'医疗': '/static/images/category/medical.png',\n\t\t\t\t'医院': '/static/images/category/medical.png',\n\t\t\t\t'交通': '/static/images/category/transportation.png',\n\t\t\t\t'旅游': '/static/images/category/tourism.png',\n\t\t\t\t'景点': '/static/images/category/tourism.png',\n\t\t\t\t'住宿': '/static/images/category/accommodation.png',\n\t\t\t\t'酒店': '/static/images/category/accommodation.png',\n\t\t\t\t'娱乐': '/static/images/category/entertainment.png',\n\t\t\t\t'运动': '/static/images/category/sports.png',\n\t\t\t\t'健身': '/static/images/category/sports.png',\n\t\t\t\t'服务': '/static/images/category/service.png',\n\t\t\t\t'房产': '/static/images/category/real_estate.png',\n\t\t\t\t'招聘': '/static/images/category/recruitment.png',\n\t\t\t\t'求职': '/static/images/category/recruitment.png',\n\t\t\t\t'金融': '/static/images/category/finance.png',\n\t\t\t\t'科技': '/static/images/category/technology.png',\n\t\t\t\t'办公': '/static/images/category/office.png',\n\t\t\t\t'公司': '/static/images/category/company.png',\n\t\t\t\t'企业': '/static/images/category/company.png',\n\t\t\t};\n\t\t\t\n\t\t\t// 检查分类名称中是否包含关键词\n\t\t\tfor (const [keyword, iconPath] of Object.entries(iconMapping)) {\n\t\t\t\tif (category.cate_name.includes(keyword)) {\n\t\t\t\t\treturn iconPath;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// 如果没有图标，返回默认图标\n\t\treturn '/static/images/defalut.png';\n\t}\n\n\t// 更新本地文章浏览量\n\tconst updateLocalViewCount = (articleId) => {\n\t\tif (!articleId || !articleList.value.length) return;\n\t\t\n\t\tconst index = articleList.value.findIndex(item => item._id === articleId);\n\t\tif (index !== -1) {\n\t\t\t// 增加浏览量 - 同时兼容view_count和look_count两个字段名\n\t\t\tif (articleList.value[index].view_count !== undefined) {\n\t\t\t\tarticleList.value[index].view_count++;\n\t\t\t\tconsole.log(`文章 ${articleId} view_count已更新为:`, articleList.value[index].view_count);\n\t\t\t}\n\t\t\t\n\t\t\t// 同时更新look_count字段(如果存在)\n\t\t\tif (articleList.value[index].look_count !== undefined) {\n\t\t\t\tarticleList.value[index].look_count++;\n\t\t\t\tconsole.log(`文章 ${articleId} look_count已更新为:`, articleList.value[index].look_count);\n\t\t\t} else if (articleList.value[index].view_count !== undefined) {\n\t\t\t\t// 如果只有view_count，创建look_count并赋值\n\t\t\t\tarticleList.value[index].look_count = articleList.value[index].view_count;\n\t\t\t} else {\n\t\t\t\t// 如果两者都不存在，初始化为1\n\t\t\t\tarticleList.value[index].view_count = 1;\n\t\t\t\tarticleList.value[index].look_count = 1;\n\t\t\t\tconsole.log(`文章 ${articleId} 浏览量已初始化为:1`);\n\t\t\t}\n\t\t}\n\t};\n\n\t// 添加图片预览方法\n\tconst previewImage = (urls, current) => {\n\t\t// 检查参数\n\t\tif (!urls || !urls.length) {\n\t\t\tconsole.error('预览图片缺少URLs参数');\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t// 获取预览URL列表 - 使用原始URL，不使用压缩URL\n\t\tlet previewUrls = urls;\n\t\t\n\t\t// 如果当前URL和URLs数组是对象数组，仅在预览时提取compressedURL（如果有）或url\n\t\tif (typeof current === 'object' && current !== null) {\n\t\t\tcurrent = current.compressedURL;\n\t\t}\n\t\t\n\t\t// 如果URLs数组是对象数组，仅在预览时提取compressedURL（如果有）或url\n\t\tif (urls.length > 0 && typeof urls[0] === 'object') {\n\t\t\tpreviewUrls = urls.map(img => img.compressedURL);\n\t\t}\n\t\t\n\t\t// 使用uni.previewImage实现图片预览和左右滑动功能\n\t\tuni.previewImage({\n\t\t\turls: previewUrls,           // 需要预览的图片链接列表（此时已是压缩URL或原始URL）\n\t\t\tcurrent: current || previewUrls[0], // 当前显示图片的链接\n\t\t\tindicator: 'number',  // 显示页码指示器\n\t\t\tloop: true,           // 循环预览\n\t\t\tsuccess: () => {\n\t\t\t\tconsole.log('图片预览成功');\n\t\t\t},\n\t\t\tfail: (err) => {\n\t\t\t\tconsole.error('预览图片失败:', err);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '预览图片失败',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t},\n\t\t\tcomplete: () => {\n\t\t\t\t// 预览完成后可以做一些清理工作\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t};\n\n\t// 页面显示时获取最新权限状态\n\tonShow(() => {\n\t\t// 获取最新的权限状态\n\t\tgetSendOnState();\n\t\t\n\t\t// 检查是否需要重新加载分类（比如从后台切回前台时）\n\t\tif (lastActiveTime && (Date.now() - lastActiveTime > 60000)) { // 如果离开超过1分钟\n\t\t\tconsole.log('应用从后台恢复，重新获取分类');\n\t\t\t// 重新获取分类数据\n\t\t\tcateListGet();\n\t\t}\n\t\t\n\t\t// 更新最后活跃时间\n\t\tlastActiveTime = Date.now();\n\t})\n\n\tconst getCurrentCateName = () => {\n\t\t// 查找当前选中分类的名称\n\t\tif (!currentCateId.value) return '';\n\t\t\n\t\tconst category = cateList.value.find(item => item._id === currentCateId.value);\n\t\treturn category ? category.cate_name : '';\n\t}\n\n\t// 根据位置名称生成兼容的图标信息\n\tconst generateLocationIconUniapp = (locationName) => {\n\t\tif (!locationName || locationName === '未知区域') {\n\t\t\treturn {\n\t\t\t\ttext: '位',\n\t\t\t\tbgColor: '#4cb0f9',\n\t\t\t\ttype: 'text'\n\t\t\t};\n\t\t}\n\t\t\n\t\t// 获取位置的第一个字符\n\t\tconst firstChar = locationName.trim().charAt(0);\n\t\t\n\t\t// 使用图标字典或颜色字典根据首字符生成一致的颜色\n\t\tconst colorMap = {\n\t\t\t'北': '#FF5722', '南': '#2196F3', '东': '#4CAF50', '西': '#9C27B0',\n\t\t\t'中': '#FFEB3B', '河': '#03A9F4', '山': '#8BC34A', '海': '#00BCD4',\n\t\t\t'天': '#673AB7', '朝': '#FFC107', '新': '#E91E63', '广': '#3F51B5',\n\t\t\t'大': '#009688', '小': '#795548', '长': '#607D8B', '金': '#FF9800'\n\t\t};\n\t\t\n\t\t// 根据字符获取颜色，如果没有预设则使用哈希算法生成\n\t\tlet bgColor = colorMap[firstChar] || '#4cb0f9';\n\t\t\n\t\t// 如果没有预设颜色，根据字符生成一个确定的颜色\n\t\tif (!colorMap[firstChar]) {\n\t\t\t// 简单的哈希算法将字符转换为颜色\n\t\t\tlet hash = 0;\n\t\t\tfor (let i = 0; i < firstChar.length; i++) {\n\t\t\t\thash = firstChar.charCodeAt(i) + ((hash << 5) - hash);\n\t\t\t}\n\t\t\t\n\t\t\tconst c = (hash & 0x00FFFFFF)\n\t\t\t\t.toString(16)\n\t\t\t\t.toUpperCase();\n\t\t\t\n\t\t\tbgColor = '#' + '00000'.substring(0, 6 - c.length) + c;\n\t\t}\n\t\t\n\t\treturn {\n\t\t\ttext: firstChar,\n\t\t\tbgColor: bgColor,\n\t\t\ttype: 'text'\n\t\t};\n\t}\n\n\t// 跳转文章详情\n\tconst handelGoArticleDetail = (id) => {\n\t\tuni.navigateTo({\n\t\t\turl: `/pages/article/articleDetail?article_id=${id}`,\n\t\t\tanimationType: 'slide-in-right', // 添加滑入动画\n\t\t\tanimationDuration: 300 // 设置动画持续时间为300ms\n\t\t})\n\t}\n\n\t// 记录最后活跃时间\n\tlet lastActiveTime = Date.now();\n\n</script>\n<template>\n\t<view class=\"home\">\n\t\t<!-- 顶部分类导航 -->\n\t\t<view class=\"category-container\">\n\t\t\t<!-- 动态分类 -->\n\t\t\t<scroll-view class=\"category-scroll\" scroll-y=\"true\" scroll-with-animation=\"true\">\n\t\t\t\t<view class=\"category-list\">\n\t\t\t\t\t<view class=\"category-item\" \n\t\t\t\t\t\tv-for=\"(item, index) in cateList\" \n\t\t\t\t\t\t:key=\"item._id\" \n\t\t\t\t\t\t:class=\"{ active: currentCateId === item._id }\" \n\t\t\t\t\t\t@click=\"hanleHeadTab(index, item._id)\">\n\t\t\t\t\t\t<view class=\"category-content\">\n\t\t\t\t\t\t\t<image v-if=\"item.cate_img\" :src=\"item.cate_img\" class=\"cate-icon\" mode=\"aspectFit\"></image>\n\t\t\t\t\t\t\t<text class=\"cate-text\">{{ item.cate_name }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 加载中显示 -->\n\t\t\t\t\t<view class=\"category-item loading-item\" v-if=\"cateList.length == 0\">\n\t\t\t\t\t\t<view class=\"category-content\">\n\t\t\t\t\t\t\t<uni-icons type=\"spinner-cycle\" size=\"24\" color=\"#399bfe\"></uni-icons>\n\t\t\t\t\t\t\t<text class=\"loading-text\">加载中...</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</scroll-view>\n\t\t</view>\n\n\t\t<!-- 文章列表 -->\n\t\t<view class=\"view-article\">\n\t\t\t<!-- 添加加载中动画 -->\n\t\t\t<view class=\"loading-container\" v-if=\"articleList.length === 0 && isLoading\">\n\t\t\t\t<view class=\"loading-spinner\">\n\t\t\t\t\t<uni-icons type=\"spinner-cycle\" size=\"48\" color=\"#399bfe\"></uni-icons>\n\t\t\t\t</view>\n\t\t\t\t<text class=\"loading-text\">内容加载中...</text>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 空数据提示 -->\n\t\t\t<view class=\"empty-container\" v-if=\"articleList.length === 0 && !isLoading\">\n\t\t\t\t<view class=\"empty-icon\">\n\t\t\t\t\t<uni-icons color=\"#5cb85c\" custom-prefix=\"icon\" type=\"lishuai-a-00jichuiconkongzhuangtaiwuneirong\" size=\"58\"></uni-icons>\n\t\t\t\t</view>\n\t\t\t\t<text class=\"empty-text\">暂无内容</text>\n\t\t\t\t<text class=\"empty-subtext\">该分类下还没有数据，去看看其他分类吧</text>\n\t\t\t</view>\n\t\t\t\n\t\t\t<articleItem v-for=\"item in articleList\" :key=\"item._id\" :item=\"item\" @contact=\"handelContact\"\n\t\t\t\t@preview=\"(url, urls) => previewImage(urls, url)\" @userList=\"handelGoUserList\"\n\t\t\t\t@delete=\"handleDelete\" :avatarClickEnabled=\"avatarClickState\">\n\t\t\t</articleItem>\n\t\t\t\n\t\t\t<!-- 加载更多 -->\n\t\t\t<view class=\"loading\">\n\t\t\t\t<uni-load-more v-if=\"!articleList.length==0\" color=\"#cccccc\" iconType=\"auto\"\n\t\t\t\t\t:status=\"status\" />\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\n\t</view>\n\t\n\t\n</template>\n\n<style lang=\"scss\" scoped>\n\t.home {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpadding-top: 160rpx; /* 减少顶部间距，因为移除了最新最热筛选 */\n\t\theight: 100vh;\n\t\tbackground-color: $pyq-pages-bg-color;\n\n\t\t/* 分类导航容器 */\n\t\t.category-container {\n\t\t\tposition: fixed;\n\t\t\tleft: 0;\n\t\t\ttop: 0;\n\t\t\twidth: 100%;\n\t\t\tz-index: 999;\n\t\t\tbackground-color: #fff;\n\t\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);\n\t\t}\n\t\t\n\t\t/* 分类垂直导航样式 */\n\t\t.category-scroll {\n\t\t\twidth: 100%;\n\t\t\theight: 160rpx; /* 增加高度以适应垂直布局 */\n\t\t\twhite-space: nowrap;\n\t\t\tborder-bottom: 1px solid $pyq-border-color-translucent;\n\t\t\t\n\t\t\t.category-list {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tpadding: 12rpx;\n\t\t\t\tflex-wrap: wrap;\n\t\t\t\t\n\t\t\t\t.category-item {\n\t\t\t\t\tpadding: 8rpx 8rpx;\n\t\t\t\t\tmargin: 6rpx;\n\t\t\t\t\tfont-size: 26rpx;\n\t\t\t\t\tcolor: $pyq-text-color-placeholder;\n\t\t\t\t\theight: 120rpx; /* 增加高度 */\n\t\t\t\t\twidth: 120rpx; /* 固定宽度 */\n\t\t\t\t\tborder-radius: 3rpx;\n\t\t\t\t\tbackground-color: #f8f8f8;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\t\n\t\t\t\t\t.category-content {\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\t\n\t\t\t\t\t\t.loading-text {\n\t\t\t\t\t\t\tfont-size: 22rpx;\n\t\t\t\t\t\t\tmargin-top: 10rpx;\n\t\t\t\t\t\t\tcolor: #399bfe;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.cate-icon {\n\t\t\t\t\t\twidth: 50rpx;\n\t\t\t\t\t\theight: 50rpx;\n\t\t\t\t\t\tmargin-bottom: 10rpx; /* 图标与文字的间距 */\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.cate-text {\n\t\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\t/* 文本溢出显示省略号 */\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\t\tmax-width: 100%;\n\t\t\t\t\t\t/* 限制最多显示4个字符 */\n\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t&.active {\n\t\t\t\t\t\tcolor: #399bfe;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\tbackground-color: rgba(57, 155, 254, 0.1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/* 文章列表 */\n\t\t.view-article {\n\t\t\tbackground-color: $pyq-pages-bg-color;\n\t\t\tpadding-bottom: 120rpx; /* 增加底部间距 */\n\t\t\t\n\t\t\t/* 加载中动画容器 */\n\t\t\t.loading-container {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\theight: 60vh;\n\t\t\t\twidth: 100%;\n\t\t\t\t\n\t\t\t\t.loading-spinner {\n\t\t\t\t\tanimation: rotate 1.5s linear infinite;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.loading-text {\n\t\t\t\t\tmargin-top: 30rpx;\n\t\t\t\t\tcolor: #666;\n\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t@keyframes rotate {\n\t\t\t\t\tfrom { transform: rotate(0deg); }\n\t\t\t\t\tto { transform: rotate(360deg); }\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t/* 空数据提示 */\n\t\t\t.empty-container {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\theight: 70vh;\n\t\t\t\twidth: 100%;\n\t\t\t\tpadding: 0 50rpx;\n\t\t\t\t\n\t\t\t\t.empty-icon {\n\t\t\t\t\topacity: 0.7;\n\t\t\t\t\tmargin-bottom: 30rpx;\n\t\t\t\t\ttransform: scale(1.2);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.empty-text {\n\t\t\t\t\tfont-size: 34rpx;\n\t\t\t\t\tcolor: #888;\n\t\t\t\t\tmargin-bottom: 16rpx;\n\t\t\t\t\tfont-weight: 500;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.empty-subtext {\n\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\tcolor: #aaaaaa;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tline-height: 1.5;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.loading {\n\t\t\t\theight: 100rpx; /* 增加加载区域高度 */\n\t\t\t\tpadding-bottom: 30rpx; /* 额外底部间距 */\n\t\t\t}\n\t\t}\n\t\t\n\t\t/* 测试按钮样式 */\n\t\t.test-buttons {\n\t\t\tposition: fixed;\n\t\t\tleft: 40rpx;\n\t\t\tbottom: 120rpx;\n\t\t\tz-index: 999;\n\t\t\t\n\t\t\t.test-btn {\n\t\t\t\tbackground-color: #007AFF;\n\t\t\t\tcolor: #fff;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tpadding: 10rpx 30rpx;\n\t\t\t\tborder-radius: 50rpx;\n\t\t\t\tbox-shadow: 0 4rpx 10rpx rgba(0, 122, 255, 0.3);\n\t\t\t}\n\t\t}\n\t\t\n\t\t/* 美化后的发布按钮 */\n\t\t.publish-button {\n\t\t\tposition: fixed;\n\t\t\tright: 40rpx;\n\t\t\tbottom: 120rpx;\n\t\t\tz-index: 999;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tbackground: linear-gradient(135deg, #3c7dff, #399bfe);\n\t\t\tpadding: 16rpx 32rpx;\n\t\t\tborder-radius: 50rpx;\n\t\t\tbox-shadow: 0 6rpx 16rpx rgba(60, 125, 255, 0.3);\n\t\t\ttransition: all 0.3s ease;\n\t\t\t\n\t\t\t.publish-icon {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\tmargin-right: 12rpx;\n\t\t\t}\n\t\t\t\n\t\t\t.publish-text {\n\t\t\t\tcolor: #FFFFFF;\n\t\t\t\tfont-size: 30rpx;\n\t\t\t\tfont-weight: 500;\n\t\t\t\tletter-spacing: 2rpx;\n\t\t\t}\n\t\t\t\n\t\t\t&:active {\n\t\t\t\ttransform: scale(0.95);\n\t\t\t\tbox-shadow: 0 3rpx 8rpx rgba(60, 125, 255, 0.3);\n\t\t\t}\n\t\t}\n\t\t\n\t\t/* 七牛云上传按钮样式 */\n\t\t.qiniu-button {\n\t\t\tposition: fixed;\n\t\t\tright: 40rpx;\n\t\t\tbottom: 220rpx;\n\t\t\tz-index: 999;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tbackground: linear-gradient(135deg, #ff7043, #ff5722);\n\t\t\tpadding: 16rpx 32rpx;\n\t\t\tborder-radius: 50rpx;\n\t\t\tbox-shadow: 0 6rpx 16rpx rgba(255, 87, 34, 0.3);\n\t\t\ttransition: all 0.3s ease;\n\t\t\t\n\t\t\t.qiniu-icon {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\tmargin-right: 12rpx;\n\t\t\t}\n\t\t\t\n\t\t\t.qiniu-text {\n\t\t\t\tcolor: #FFFFFF;\n\t\t\t\tfont-size: 30rpx;\n\t\t\t\tfont-weight: 500;\n\t\t\t\tletter-spacing: 2rpx;\n\t\t\t}\n\t\t\t\n\t\t\t&:active {\n\t\t\t\ttransform: scale(0.95);\n\t\t\t\tbox-shadow: 0 3rpx 8rpx rgba(255, 87, 34, 0.3);\n\t\t\t}\n\t\t}\n\t}\n</style>\n\n<!-- 添加全局样式，覆盖组件中的问题样式 -->\n<style lang=\"scss\">\n/* 修复uni-load-more组件样式问题 */\n.uni-load-more {\n\t.uni-load-more__img--android-MP {\n\t\t.uni-load-more__img-icon {\n\t\t\tborder-top-style: solid;\n\t\t\tborder-color: #777777;\n\t\t\tborder-width: 2px;\n\t\t}\n\t}\n\t\n\t.uni-load-more__img--ios-H5 {\n\t\t.uni-load-more__img-icon {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t}\n\t}\n}\n\n/* 修复articleItem组件样式问题 */\n.pyqContent {\n\t.pyq-img {\n\t\t.multi-img {\n\t\t\t.img-grid {\n\t\t\t\t.grid-item {\n\t\t\t\t\twidth: 180rpx;\n\t\t\t\t\theight: 180rpx;\n\t\t\t\t\tborder-radius: 8rpx;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t.single-img {\n\t\t\t.single-img-item {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: auto;\n\t\t\t}\n\t\t}\n\t}\n}\n</style>","import MiniProgramPage from 'E:/dy2/pages/index/index.vue'\ntt.createPage(MiniProgramPage)"],"names":["ref","uni","uniCloud","useUserInfoStore","onPullDownRefresh","onReachBottom","res","testLogin","onMounted","onUnmounted","onPageScroll","onBackPress","onActivated","onShow"],"mappings":"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"}